Started GET "/rails/info/routes" for ::1 at 2024-08-22 17:10:28 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Rails::InfoController#routes as HTML
  Rendering layout /home/egor/.rvm/gems/ruby-3.2.4@product_cart/gems/railties-7.1.3.4/lib/rails/templates/layouts/application.html.erb
  Rendering /home/egor/.rvm/gems/ruby-3.2.4@product_cart/gems/railties-7.1.3.4/lib/rails/templates/rails/info/routes.html.erb within layouts/application
  Rendered collection of /home/egor/.rvm/gems/ruby-3.2.4@product_cart/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/routes/_route.html.erb [46 times] (Duration: 6.7ms | Allocations: 8890)
  Rendered /home/egor/.rvm/gems/ruby-3.2.4@product_cart/gems/actionpack-7.1.3.4/lib/action_dispatch/middleware/templates/routes/_table.html.erb (Duration: 1.3ms | Allocations: 932)
  Rendered /home/egor/.rvm/gems/ruby-3.2.4@product_cart/gems/railties-7.1.3.4/lib/rails/templates/rails/info/routes.html.erb within layouts/application (Duration: 17.8ms | Allocations: 14470)
  Rendered layout /home/egor/.rvm/gems/ruby-3.2.4@product_cart/gems/railties-7.1.3.4/lib/rails/templates/layouts/application.html.erb (Duration: 18.1ms | Allocations: 14777)
Completed 200 OK in 23ms (Views: 19.7ms | ActiveRecord: 0.0ms | Allocations: 18892)


Started GET "/" for ::1 at 2024-08-22 17:11:41 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 4.4ms | Allocations: 7268)
  Rendered products/index.html.slim within layouts/application (Duration: 19.5ms | Allocations: 25623)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 3]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 113.9ms | Allocations: 99134)
Completed 200 OK in 158ms (Views: 110.8ms | ActiveRecord: 12.0ms | Allocations: 121688)


Started GET "/" for ::1 at 2024-08-22 17:11:43 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 0.8ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 1.5ms | Allocations: 1368)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 3]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 5.0ms | Allocations: 4424)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.4ms | Allocations: 5411)


Started GET "/cart" for ::1 at 2024-08-22 17:11:44 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 3]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 8.3ms | Allocations: 14487)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.1ms | Allocations: 10346)
  Rendered carts/show.html.slim within layouts/application (Duration: 17.2ms | Allocations: 32423)
  Rendered layout layouts/application.html.slim (Duration: 19.2ms | Allocations: 34870)
Completed 200 OK in 22ms (Views: 19.3ms | ActiveRecord: 0.7ms | Allocations: 36008)


Started POST "/carts/3/update_discount" for ::1 at 2024-08-22 17:11:48 +0300
  
ActionController::RoutingError (No route matches [POST] "/carts/3/update_discount"):
  
Started POST "/carts/3/update_discount" for ::1 at 2024-08-22 17:11:48 +0300
Started POST "/carts/3/update_discount" for ::1 at 2024-08-22 17:11:48 +0300
Started POST "/carts/3/update_discount" for ::1 at 2024-08-22 17:11:48 +0300
  
ActionController::RoutingError (No route matches [POST] "/carts/3/update_discount"):
  
Started POST "/carts/3/update_discount" for ::1 at 2024-08-22 17:11:48 +0300
Started POST "/carts/3/update_discount" for ::1 at 2024-08-22 17:11:48 +0300
  
ActionController::RoutingError (No route matches [POST] "/carts/3/update_discount"):
  
  
ActionController::RoutingError (No route matches [POST] "/carts/3/update_discount"):
  
  
ActionController::RoutingError (No route matches [POST] "/carts/3/update_discount"):
  
  
ActionController::RoutingError (No route matches [POST] "/carts/3/update_discount"):
  
Started POST "/carts/3/update_discount" for ::1 at 2024-08-22 17:11:49 +0300
  
ActionController::RoutingError (No route matches [POST] "/carts/3/update_discount"):
  
Started GET "/cart" for ::1 at 2024-08-22 17:14:56 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 3]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 18.8ms | Allocations: 17756)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 10339)
  Rendered carts/show.html.slim within layouts/application (Duration: 34.3ms | Allocations: 41895)
  Rendered layout layouts/application.html.slim (Duration: 48.6ms | Allocations: 73148)
Completed 200 OK in 58ms (Views: 44.9ms | ActiveRecord: 7.0ms | Allocations: 78821)


Started DELETE "/line_items/20" for ::1 at 2024-08-22 17:14:58 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"20"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 20], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.5ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 20]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 3]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
  Rendering line_items/destroy.turbo_stream.erb
  Rendered line_items/destroy.turbo_stream.erb (Duration: 0.8ms | Allocations: 452)
Completed 200 OK in 9ms (Views: 1.4ms | ActiveRecord: 2.8ms | Allocations: 5001)


Started DELETE "/cart" for ::1 at 2024-08-22 17:15:00 +0300
Processing by CartsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 3]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 22]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mCart Destroy (0.2ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = $1[0m  [["id", 3]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
Redirected to http://localhost:3000/
Completed 302 Found in 9ms (ActiveRecord: 2.5ms | Allocations: 3646)


Started GET "/" for ::1 at 2024-08-22 17:15:00 +0300
Processing by ProductsController#index as TURBO_STREAM
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mCart Create (1.1ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "discount") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2024-08-22 14:15:00.264239"], ["updated_at", "2024-08-22 14:15:00.264239"], ["discount", "0.0"]]
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 2.6ms | Allocations: 6063)
  Rendered products/index.html.slim within layouts/application (Duration: 4.9ms | Allocations: 9920)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 7.7ms | Allocations: 12937)
Completed 200 OK in 14ms (Views: 7.9ms | ActiveRecord: 3.0ms | Allocations: 16829)


Started POST "/line_items?product_id=1" for ::1 at 2024-08-22 17:15:01 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"1"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 4], ["product_id", 1], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 1], ["cart_id", 4], ["order_id", nil], ["created_at", "2024-08-22 14:15:01.339055"], ["updated_at", "2024-08-22 14:15:01.339055"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.5ms | Allocations: 202)
Completed 200 OK in 21ms (Views: 0.9ms | ActiveRecord: 10.9ms | Allocations: 6373)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 17:15:02 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 4], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 2], ["cart_id", 4], ["order_id", nil], ["created_at", "2024-08-22 14:15:02.035603"], ["updated_at", "2024-08-22 14:15:02.035603"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 21ms (Views: 0.5ms | ActiveRecord: 10.3ms | Allocations: 5222)


Started GET "/cart" for ::1 at 2024-08-22 17:15:02 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 4.3ms | Allocations: 2837)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.4ms | Allocations: 423)
  Rendered carts/show.html.slim within layouts/application (Duration: 6.4ms | Allocations: 4166)
  Rendered layout layouts/application.html.slim (Duration: 9.1ms | Allocations: 6636)
Completed 200 OK in 12ms (Views: 9.5ms | ActiveRecord: 0.5ms | Allocations: 7572)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:15:05 +0300
  
ActionController::RoutingError (No route matches [POST] "/carts/4/update_discount"):
  
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:15:05 +0300
  
ActionController::RoutingError (No route matches [POST] "/carts/4/update_discount"):
  
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:15:05 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:15:05 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:15:05 +0300
  
ActionController::RoutingError (No route matches [POST] "/carts/4/update_discount"):
  
  
ActionController::RoutingError (No route matches [POST] "/carts/4/update_discount"):
  
  
ActionController::RoutingError (No route matches [POST] "/carts/4/update_discount"):
  
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:15:06 +0300
  
ActionController::RoutingError (No route matches [POST] "/carts/4/update_discount"):
  
Started GET "/cart" for ::1 at 2024-08-22 17:16:17 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 11.8ms | Allocations: 17753)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 10331)
  Rendered carts/show.html.slim within layouts/application (Duration: 27.8ms | Allocations: 41904)
  Rendered layout layouts/application.html.slim (Duration: 46.1ms | Allocations: 73151)
Completed 200 OK in 53ms (Views: 43.6ms | ActiveRecord: 5.3ms | Allocations: 78827)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>7, "id"=>"4", "cart"=>{"discount"=>7}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 2ms (ActiveRecord: 0.1ms | Allocations: 1169)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>8, "id"=>"4", "cart"=>{"discount"=>8}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 2ms (ActiveRecord: 0.2ms | Allocations: 873)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>9, "id"=>"4", "cart"=>{"discount"=>9}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 1ms (ActiveRecord: 0.1ms | Allocations: 888)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>10, "id"=>"4", "cart"=>{"discount"=>10}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 2ms (ActiveRecord: 0.1ms | Allocations: 858)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>11, "id"=>"4", "cart"=>{"discount"=>11}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 2ms (ActiveRecord: 0.2ms | Allocations: 861)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>13, "id"=>"4", "cart"=>{"discount"=>13}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 2ms (ActiveRecord: 0.1ms | Allocations: 879)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>14, "id"=>"4", "cart"=>{"discount"=>14}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 2ms (ActiveRecord: 0.1ms | Allocations: 879)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>15, "id"=>"4", "cart"=>{"discount"=>15}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 2ms (ActiveRecord: 0.1ms | Allocations: 882)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>16, "id"=>"4", "cart"=>{"discount"=>16}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Completed 204 No Content in 2ms (ActiveRecord: 0.1ms | Allocations: 1082)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>17, "id"=>"4", "cart"=>{"discount"=>17}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 2ms (ActiveRecord: 0.1ms | Allocations: 870)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>18, "id"=>"4", "cart"=>{"discount"=>18}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 2ms (ActiveRecord: 0.1ms | Allocations: 874)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:16:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>18, "id"=>"4", "cart"=>{"discount"=>18}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
No template found for CartsController#update_discount, rendering head :no_content
Completed 204 No Content in 5ms (ActiveRecord: 0.1ms | Allocations: 867)


Started GET "/cart" for ::1 at 2024-08-22 17:19:19 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 10.8ms | Allocations: 17729)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.3ms | Allocations: 10317)
  Rendered carts/show.html.slim within layouts/application (Duration: 23.4ms | Allocations: 41847)
  Rendered layout layouts/application.html.slim (Duration: 38.7ms | Allocations: 73135)
Completed 200 OK in 46ms (Views: 36.0ms | ActiveRecord: 5.6ms | Allocations: 78805)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:24 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>5, "id"=>"4", "cart"=>{"discount"=>5}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:24.654401"], ["discount", "5.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.9ms | Allocations: 2137)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.6ms | Allocations: 2454)
Completed 200 OK in 12ms (Views: 4.0ms | ActiveRecord: 3.4ms | Allocations: 5605)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:24 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>6, "id"=>"4", "cart"=>{"discount"=>6}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:24.711923"], ["discount", "6.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.5ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 2.7ms | Allocations: 2264)
Completed 200 OK in 9ms (Views: 2.8ms | ActiveRecord: 3.1ms | Allocations: 4884)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:24 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>7, "id"=>"4", "cart"=>{"discount"=>7}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:24.725227"], ["discount", "7.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:24 +0300
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2534)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.3ms | Allocations: 2663)
Completed 200 OK in 11ms (Views: 3.6ms | ActiveRecord: 4.0ms | Allocations: 5286)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>8, "id"=>"4", "cart"=>{"discount"=>8}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:24.739320"], ["discount", "8.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:24 +0300
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2548)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2681)
Completed 200 OK in 11ms (Views: 4.3ms | ActiveRecord: 4.0ms | Allocations: 5304)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>9, "id"=>"4", "cart"=>{"discount"=>9}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:24.755199"], ["discount", "9.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:24 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.7ms | Allocations: 2233)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.0ms | Allocations: 2366)
Completed 200 OK in 12ms (Views: 3.9ms | ActiveRecord: 3.7ms | Allocations: 5557)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>10, "id"=>"4", "cart"=>{"discount"=>10}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:24.770652"], ["discount", "10.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2264)
Completed 200 OK in 12ms (Views: 4.1ms | ActiveRecord: 3.9ms | Allocations: 4860)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:25 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>10, "id"=>"4", "cart"=>{"discount"=>10}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 2264)
Completed 200 OK in 9ms (Views: 5.9ms | ActiveRecord: 0.4ms | Allocations: 3404)


Started GET "/cart" for ::1 at 2024-08-22 17:19:45 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 9.5ms | Allocations: 17729)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.9ms | Allocations: 10317)
  Rendered carts/show.html.slim within layouts/application (Duration: 20.9ms | Allocations: 41847)
  Rendered layout layouts/application.html.slim (Duration: 36.7ms | Allocations: 73103)
Completed 200 OK in 44ms (Views: 34.9ms | ActiveRecord: 4.4ms | Allocations: 78787)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:46 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>26, "id"=>"4", "cart"=>{"discount"=>26}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:46.777398"], ["discount", "26.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.0ms | Allocations: 2137)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.6ms | Allocations: 2452)
Completed 200 OK in 10ms (Views: 3.7ms | ActiveRecord: 2.7ms | Allocations: 5502)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:46 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>27, "id"=>"4", "cart"=>{"discount"=>27}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:46.812549"], ["discount", "27.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.6ms | Allocations: 2175)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:46 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.2ms | Allocations: 2492)
Completed 200 OK in 9ms (Views: 3.4ms | ActiveRecord: 2.6ms | Allocations: 5255)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>28, "id"=>"4", "cart"=>{"discount"=>28}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:46.824236"], ["discount", "28.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:46 +0300
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2530)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2661)
Completed 200 OK in 10ms (Views: 4.1ms | ActiveRecord: 3.3ms | Allocations: 5265)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>29, "id"=>"4", "cart"=>{"discount"=>29}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:46.838353"], ["discount", "29.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:46 +0300
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.5ms | Allocations: 2170)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.9ms | Allocations: 2304)
Completed 200 OK in 11ms (Views: 4.0ms | ActiveRecord: 3.2ms | Allocations: 5605)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>30, "id"=>"4", "cart"=>{"discount"=>30}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:46.851599"], ["discount", "30.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:46 +0300
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:46 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 3041)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.9ms | Allocations: 3173)
Completed 200 OK in 13ms (Views: 6.4ms | ActiveRecord: 3.6ms | Allocations: 5798)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:46 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>31, "id"=>"4", "cart"=>{"discount"=>31}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:46.872686"], ["discount", "31.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>32, "id"=>"4", "cart"=>{"discount"=>32}}
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:46 +0300
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 2370)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2508)
Completed 200 OK in 18ms (Views: 5.7ms | ActiveRecord: 7.2ms | Allocations: 7198)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>33, "id"=>"4", "cart"=>{"discount"=>33}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:46.894958"], ["discount", "33.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>34, "id"=>"4", "cart"=>{"discount"=>34}}
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 3398)
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:46.904153"], ["discount", "32.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.6ms | Allocations: 3587)
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
Completed 200 OK in 15ms (Views: 6.5ms | ActiveRecord: 4.7ms | Allocations: 10084)


  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.6ms | Allocations: 2691)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.8ms | Allocations: 2820)
Completed 200 OK in 36ms (Views: 3.9ms | ActiveRecord: 12.4ms | Allocations: 19554)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:46.918142"], ["discount", "34.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.8ms | Allocations: 2187)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.0ms | Allocations: 2316)
Completed 200 OK in 26ms (Views: 2.9ms | ActiveRecord: 7.4ms | Allocations: 16207)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:47 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>34, "id"=>"4", "cart"=>{"discount"=>34}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.7ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 2.9ms | Allocations: 2264)
Completed 200 OK in 5ms (Views: 2.9ms | ActiveRecord: 0.5ms | Allocations: 3429)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:47 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>42, "id"=>"4", "cart"=>{"discount"=>42}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:47.883345"], ["discount", "42.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2264)
Completed 200 OK in 20ms (Views: 3.9ms | ActiveRecord: 11.4ms | Allocations: 4875)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>43, "id"=>"4", "cart"=>{"discount"=>43}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.014542"], ["discount", "43.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2298)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
Completed 200 OK in 19ms (Views: 5.7ms | ActiveRecord: 10.9ms | Allocations: 5082)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>44, "id"=>"4", "cart"=>{"discount"=>44}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.039905"], ["discount", "44.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.2ms | Allocations: 2595)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.4ms | Allocations: 2727)
Completed 200 OK in 10ms (Views: 3.0ms | ActiveRecord: 3.7ms | Allocations: 6086)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>45, "id"=>"4", "cart"=>{"discount"=>45}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.054110"], ["discount", "45.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
  [1m[36mLineItem Load (2.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 20.0ms | Allocations: 2695)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 20.4ms | Allocations: 2840)
Completed 200 OK in 32ms (Views: 20.0ms | ActiveRecord: 6.9ms | Allocations: 6393)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>46, "id"=>"4", "cart"=>{"discount"=>46}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.132300"], ["discount", "46.0"], ["id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Parameters: {"discount"=>47, "id"=>"4", "cart"=>{"discount"=>47}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.138521"], ["discount", "47.0"], ["id", 4]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.4ms | Allocations: 3355)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.1ms | Allocations: 3725)
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
Completed 200 OK in 48ms (Views: 6.7ms | ActiveRecord: 4.5ms | Allocations: 8131)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
  [1m[36mProduct Load (2.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 2700)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 2839)
Completed 200 OK in 22ms (Views: 6.7ms | ActiveRecord: 8.4ms | Allocations: 8941)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>48, "id"=>"4", "cart"=>{"discount"=>48}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>49, "id"=>"4", "cart"=>{"discount"=>49}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
  [1m[36mCart Load (2.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.166258"], ["discount", "48.0"], ["id", 4]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>52, "id"=>"4", "cart"=>{"discount"=>52}}
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.169072"], ["discount", "49.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Parameters: {"discount"=>53, "id"=>"4", "cart"=>{"discount"=>53}}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (5.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.174991"], ["discount", "52.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.3ms | Allocations: 6992)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.7ms | Allocations: 7351)
Completed 200 OK in 27ms (Views: 9.3ms | ActiveRecord: 9.3ms | Allocations: 13689)


  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.5ms | Allocations: 4758)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 4890)
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 29ms (Views: 5.8ms | ActiveRecord: 8.0ms | Allocations: 16512)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 4416)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.1ms | Allocations: 4546)
Completed 200 OK in 23ms (Views: 7.1ms | ActiveRecord: 9.8ms | Allocations: 14421)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>54, "id"=>"4", "cart"=>{"discount"=>54}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.205476"], ["discount", "53.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (4.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.204578"], ["discount", "54.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.4ms | Allocations: 4313)
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.9ms | Allocations: 4506)
Completed 200 OK in 39ms (Views: 7.5ms | ActiveRecord: 12.8ms | Allocations: 23382)


  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 4944)
  Parameters: {"discount"=>55, "id"=>"4", "cart"=>{"discount"=>55}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 5103)
Completed 200 OK in 20ms (Views: 7.0ms | ActiveRecord: 9.8ms | Allocations: 10934)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>56, "id"=>"4", "cart"=>{"discount"=>56}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
  [1m[36mCart Load (1.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (2.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.227857"], ["discount", "55.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>57, "id"=>"4", "cart"=>{"discount"=>57}}
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (4.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.229265"], ["discount", "56.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mProduct Load (2.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.241243"], ["discount", "57.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.1ms | Allocations: 5730)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.7ms | Allocations: 6156)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 26ms (Views: 9.6ms | ActiveRecord: 9.3ms | Allocations: 12787)


  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.5ms | Allocations: 5263)
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.9ms | Allocations: 5443)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 28ms (Views: 10.2ms | ActiveRecord: 10.6ms | Allocations: 14109)


  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 3140)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 3279)
Completed 200 OK in 22ms (Views: 4.7ms | ActiveRecord: 8.2ms | Allocations: 11823)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>58, "id"=>"4", "cart"=>{"discount"=>58}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>59, "id"=>"4", "cart"=>{"discount"=>59}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.263169"], ["discount", "58.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.266624"], ["discount", "59.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 2876)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 3309)
Completed 200 OK in 15ms (Views: 5.4ms | ActiveRecord: 5.7ms | Allocations: 8529)


  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.6ms | Allocations: 3388)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.9ms | Allocations: 3517)
Completed 200 OK in 19ms (Views: 7.1ms | ActiveRecord: 6.2ms | Allocations: 9599)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>59, "id"=>"4", "cart"=>{"discount"=>59}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.5ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 2.7ms | Allocations: 2264)
Completed 200 OK in 6ms (Views: 2.7ms | ActiveRecord: 0.6ms | Allocations: 3412)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:19:48 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>51, "id"=>"4", "cart"=>{"discount"=>51}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:19:48.460998"], ["discount", "51.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:17:in `block in update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.5ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.7ms | Allocations: 2264)
Completed 200 OK in 18ms (Views: 3.6ms | ActiveRecord: 10.8ms | Allocations: 4863)


Started GET "/cart" for ::1 at 2024-08-22 17:21:01 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 11.4ms | Allocations: 17750)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 10317)
  Rendered carts/show.html.slim within layouts/application (Duration: 28.1ms | Allocations: 41883)
  Rendered layout layouts/application.html.slim (Duration: 45.9ms | Allocations: 73130)
Completed 200 OK in 55ms (Views: 43.4ms | ActiveRecord: 7.0ms | Allocations: 78903)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>64, "id"=>"4", "cart"=>{"discount"=>64}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.376814"], ["discount", "64.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.2ms | Allocations: 2512)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.0ms | Allocations: 2853)
Completed 200 OK in 16ms (Views: 5.8ms | ActiveRecord: 4.9ms | Allocations: 6804)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>65, "id"=>"4", "cart"=>{"discount"=>65}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.397925"], ["discount", "65.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 2264)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.7ms | Allocations: 2404)
Completed 200 OK in 17ms (Views: 4.8ms | ActiveRecord: 5.1ms | Allocations: 6779)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>67, "id"=>"4", "cart"=>{"discount"=>67}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>66, "id"=>"4", "cart"=>{"discount"=>66}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.420616"], ["discount", "67.0"], ["id", 4]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>68, "id"=>"4", "cart"=>{"discount"=>68}}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (3.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.422993"], ["discount", "66.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.429573"], ["discount", "68.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>70, "id"=>"4", "cart"=>{"discount"=>70}}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.6ms | Allocations: 5716)
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.7ms | Allocations: 6907)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 25ms (Views: 14.0ms | ActiveRecord: 4.9ms | Allocations: 13715)


  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 4831)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 5005)
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 25ms (Views: 8.4ms | ActiveRecord: 8.2ms | Allocations: 13951)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mProduct Load (3.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>71, "id"=>"4", "cart"=>{"discount"=>71}}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 14.3ms | Allocations: 6726)
  [1m[36mCart Update (6.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.448787"], ["discount", "70.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.7ms | Allocations: 6909)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
Completed 200 OK in 35ms (Views: 15.9ms | ActiveRecord: 12.5ms | Allocations: 16585)


  Parameters: {"discount"=>72, "id"=>"4", "cart"=>{"discount"=>72}}
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (4.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.463209"], ["discount", "71.0"], ["id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.470405"], ["discount", "72.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.1ms | Allocations: 5130)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.8ms | Allocations: 5549)
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 36ms (Views: 7.6ms | ActiveRecord: 12.3ms | Allocations: 17221)


  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (2.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.1ms | Allocations: 4351)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.4ms | Allocations: 4493)
  [1m[36mProduct Load (2.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 7.9ms | ActiveRecord: 13.2ms | Allocations: 15148)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.5ms | Allocations: 4105)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.8ms | Allocations: 4245)
Completed 200 OK in 27ms (Views: 5.2ms | ActiveRecord: 8.8ms | Allocations: 14048)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>73, "id"=>"4", "cart"=>{"discount"=>73}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>76, "id"=>"4", "cart"=>{"discount"=>76}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.501198"], ["discount", "73.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (3.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.503204"], ["discount", "76.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>77, "id"=>"4", "cart"=>{"discount"=>77}}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>79, "id"=>"4", "cart"=>{"discount"=>79}}
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.1ms | Allocations: 5134)
  Parameters: {"discount"=>78, "id"=>"4", "cart"=>{"discount"=>78}}
  [1m[36mCart Update (5.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.514947"], ["discount", "77.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.4ms | Allocations: 6137)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 23ms (Views: 12.4ms | ActiveRecord: 6.8ms | Allocations: 12444)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 15.4ms | Allocations: 7307)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 17.6ms | Allocations: 8285)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 33ms (Views: 17.9ms | ActiveRecord: 8.5ms | Allocations: 16847)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Update (3.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.530460"], ["discount", "79.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (6.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.532028"], ["discount", "78.0"], ["id", 4]]
  Parameters: {"discount"=>80, "id"=>"4", "cart"=>{"discount"=>80}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (4.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 14.4ms | Allocations: 7836)
  [1m[36mLineItem Load (1.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.9ms | Allocations: 8021)
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 37ms (Views: 15.4ms | ActiveRecord: 10.4ms | Allocations: 19295)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.7ms | Allocations: 6802)
  [1m[36mCart Update (5.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.546792"], ["discount", "80.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.2ms | Allocations: 6983)
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 34ms (Views: 9.0ms | ActiveRecord: 12.0ms | Allocations: 18303)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.7ms | Allocations: 6039)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.0ms | Allocations: 6173)
Completed 200 OK in 35ms (Views: 8.5ms | ActiveRecord: 13.6ms | Allocations: 19571)


  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 2876)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.5ms | Allocations: 3010)
Completed 200 OK in 24ms (Views: 4.1ms | ActiveRecord: 10.3ms | Allocations: 14164)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>83, "id"=>"4", "cart"=>{"discount"=>83}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.574674"], ["discount", "83.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>81, "id"=>"4", "cart"=>{"discount"=>81}}
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (2.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.582506"], ["discount", "81.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.6ms | Allocations: 3950)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.9ms | Allocations: 4086)
Completed 200 OK in 16ms (Views: 6.5ms | ActiveRecord: 5.6ms | Allocations: 7855)


  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  Parameters: {"discount"=>82, "id"=>"4", "cart"=>{"discount"=>82}}
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>84, "id"=>"4", "cart"=>{"discount"=>84}}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.4ms | Allocations: 3309)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.7ms | Allocations: 3444)
Completed 200 OK in 20ms (Views: 5.4ms | ActiveRecord: 11.0ms | Allocations: 9671)


  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.599201"], ["discount", "82.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>85, "id"=>"4", "cart"=>{"discount"=>85}}
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (5.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.600963"], ["discount", "84.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (2.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (3.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.9ms | Allocations: 4725)
  [1m[36mCart Update (5.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.615149"], ["discount", "85.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.9ms | Allocations: 5254)
Completed 200 OK in 30ms (Views: 12.3ms | ActiveRecord: 9.4ms | Allocations: 14326)


  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.9ms | Allocations: 5629)
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.3ms | Allocations: 5813)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 33ms (Views: 11.0ms | ActiveRecord: 14.6ms | Allocations: 15908)


  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 3567)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3891)
Completed 200 OK in 27ms (Views: 6.7ms | ActiveRecord: 12.4ms | Allocations: 12853)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  Parameters: {"discount"=>86, "id"=>"4", "cart"=>{"discount"=>86}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.642591"], ["discount", "86.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 2331)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.7ms | Allocations: 2472)
Completed 200 OK in 15ms (Views: 4.6ms | ActiveRecord: 4.3ms | Allocations: 5816)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>89, "id"=>"4", "cart"=>{"discount"=>89}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.658370"], ["discount", "89.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>90, "id"=>"4", "cart"=>{"discount"=>90}}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 2565)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.3ms | Allocations: 2715)
Completed 200 OK in 14ms (Views: 4.7ms | ActiveRecord: 4.7ms | Allocations: 6266)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>91, "id"=>"4", "cart"=>{"discount"=>91}}
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.672335"], ["discount", "90.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.678885"], ["discount", "91.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>92, "id"=>"4", "cart"=>{"discount"=>92}}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.5ms | Allocations: 3442)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3900)
Completed 200 OK in 22ms (Views: 8.2ms | ActiveRecord: 6.2ms | Allocations: 10982)


  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mCart Load (1.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 3316)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 3913)
Completed 200 OK in 21ms (Views: 9.2ms | ActiveRecord: 5.7ms | Allocations: 10479)


  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.696308"], ["discount", "92.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2292)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.4ms | Allocations: 2450)
Completed 200 OK in 19ms (Views: 4.5ms | ActiveRecord: 6.3ms | Allocations: 9132)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>93, "id"=>"4", "cart"=>{"discount"=>93}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.712633"], ["discount", "93.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>95, "id"=>"4", "cart"=>{"discount"=>95}}
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 2543)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 2730)
Completed 200 OK in 15ms (Views: 5.0ms | ActiveRecord: 4.9ms | Allocations: 6379)


  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.726947"], ["discount", "95.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>96, "id"=>"4", "cart"=>{"discount"=>96}}
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 2973)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.2ms | Allocations: 3379)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 17ms (Views: 6.1ms | ActiveRecord: 6.0ms | Allocations: 7475)


  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.741271"], ["discount", "96.0"], ["id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  Parameters: {"discount"=>97, "id"=>"4", "cart"=>{"discount"=>97}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.747507"], ["discount", "97.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.0ms | Allocations: 3519)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 4225)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 7.8ms | ActiveRecord: 5.8ms | Allocations: 11548)


Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>98, "id"=>"4", "cart"=>{"discount"=>98}}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 3780)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.3ms | Allocations: 4503)
Completed 200 OK in 22ms (Views: 11.0ms | ActiveRecord: 6.3ms | Allocations: 9465)


  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.768668"], ["discount", "98.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.7ms | Allocations: 2345)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.1ms | Allocations: 2493)
Completed 200 OK in 20ms (Views: 6.0ms | ActiveRecord: 4.7ms | Allocations: 7545)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>101, "id"=>"4", "cart"=>{"discount"=>101}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>99, "id"=>"4", "cart"=>{"discount"=>99}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.789994"], ["discount", "101.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>103, "id"=>"4", "cart"=>{"discount"=>103}}
  [1m[36mCart Update (5.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.795209"], ["discount", "99.0"], ["id", 4]]
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.1ms | Allocations: 3742)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 4109)
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 22ms (Views: 6.2ms | ActiveRecord: 8.0ms | Allocations: 10490)


  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.806232"], ["discount", "103.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.2ms | Allocations: 3599)
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 4152)
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 27ms (Views: 8.6ms | ActiveRecord: 10.0ms | Allocations: 13168)


  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2948)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 3098)
Completed 200 OK in 21ms (Views: 4.5ms | ActiveRecord: 8.3ms | Allocations: 12170)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>104, "id"=>"4", "cart"=>{"discount"=>104}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.826630"], ["discount", "104.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>102, "id"=>"4", "cart"=>{"discount"=>102}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.1ms | Allocations: 3902)
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.836474"], ["discount", "102.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.4ms | Allocations: 4055)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 17ms (Views: 6.4ms | ActiveRecord: 5.7ms | Allocations: 8256)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 2639)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.4ms | Allocations: 2779)
Completed 200 OK in 18ms (Views: 5.4ms | ActiveRecord: 7.0ms | Allocations: 9019)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>105, "id"=>"4", "cart"=>{"discount"=>105}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>106, "id"=>"4", "cart"=>{"discount"=>106}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Parameters: {"discount"=>107, "id"=>"4", "cart"=>{"discount"=>107}}
  [1m[36mCart Load (1.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.863013"], ["discount", "105.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Parameters: {"discount"=>109, "id"=>"4", "cart"=>{"discount"=>109}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (5.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.864376"], ["discount", "106.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (5.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.869365"], ["discount", "107.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (4.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.874925"], ["discount", "109.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.5ms | Allocations: 5367)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.9ms | Allocations: 6260)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 25ms (Views: 10.7ms | ActiveRecord: 9.2ms | Allocations: 13934)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.0ms | Allocations: 4976)
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.3ms | Allocations: 5113)
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 31ms (Views: 9.5ms | ActiveRecord: 11.2ms | Allocations: 17056)


  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 14.2ms | Allocations: 7479)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 16.6ms | Allocations: 8569)
Completed 200 OK in 38ms (Views: 15.2ms | ActiveRecord: 10.8ms | Allocations: 19914)


  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:04 +0300
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.6ms | Allocations: 5334)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.0ms | Allocations: 5473)
Processing by CartsController#update_discount as TURBO_STREAM
Completed 200 OK in 32ms (Views: 11.0ms | ActiveRecord: 11.7ms | Allocations: 17032)


  Parameters: {"discount"=>108, "id"=>"4", "cart"=>{"discount"=>108}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.904956"], ["discount", "108.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.1ms | Allocations: 2226)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.5ms | Allocations: 2361)
Completed 200 OK in 15ms (Views: 5.3ms | ActiveRecord: 5.5ms | Allocations: 5547)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>110, "id"=>"4", "cart"=>{"discount"=>110}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>97, "id"=>"4", "cart"=>{"discount"=>97}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.921586"], ["discount", "110.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:04.925360"], ["discount", "97.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.7ms | Allocations: 3288)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.4ms | Allocations: 3417)
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 13ms (Views: 4.8ms | ActiveRecord: 5.7ms | Allocations: 8042)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.2ms | Allocations: 3065)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.4ms | Allocations: 3194)
Completed 200 OK in 14ms (Views: 4.4ms | ActiveRecord: 5.3ms | Allocations: 9040)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:05 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>69, "id"=>"4", "cart"=>{"discount"=>69}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:05.111052"], ["discount", "69.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.3ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.5ms | Allocations: 2264)
Completed 200 OK in 17ms (Views: 3.5ms | ActiveRecord: 10.8ms | Allocations: 4880)


Started GET "/cart" for ::1 at 2024-08-22 17:21:06 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.6ms | Allocations: 2837)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.1ms | Allocations: 4164)
  Rendered layout layouts/application.html.slim (Duration: 7.9ms | Allocations: 6634)
Completed 200 OK in 10ms (Views: 7.9ms | ActiveRecord: 0.7ms | Allocations: 7580)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>85, "id"=>"4", "cart"=>{"discount"=>85}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.512020"], ["discount", "85.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2439)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.3ms | Allocations: 2607)
Completed 200 OK in 15ms (Views: 4.3ms | ActiveRecord: 4.6ms | Allocations: 6453)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>86, "id"=>"4", "cart"=>{"discount"=>86}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.538778"], ["discount", "86.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>88, "id"=>"4", "cart"=>{"discount"=>88}}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>91, "id"=>"4", "cart"=>{"discount"=>91}}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Parameters: {"discount"=>89, "id"=>"4", "cart"=>{"discount"=>89}}
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.548849"], ["discount", "88.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (1.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.0ms | Allocations: 5595)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.1ms | Allocations: 6333)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>90, "id"=>"4", "cart"=>{"discount"=>90}}
Completed 200 OK in 24ms (Views: 11.3ms | ActiveRecord: 6.7ms | Allocations: 11091)


  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (4.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.556396"], ["discount", "91.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (2.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (4.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.563421"], ["discount", "89.0"], ["id", 4]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (4.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.573565"], ["discount", "90.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 16.9ms | Allocations: 8092)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 17.6ms | Allocations: 8641)
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 38ms (Views: 16.4ms | ActiveRecord: 11.6ms | Allocations: 17957)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.6ms | Allocations: 6535)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.6ms | Allocations: 7207)
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Completed 200 OK in 38ms (Views: 14.8ms | ActiveRecord: 10.0ms | Allocations: 17781)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.0ms | Allocations: 5445)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.1ms | Allocations: 6243)
Completed 200 OK in 44ms (Views: 11.8ms | ActiveRecord: 10.9ms | Allocations: 21338)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.0ms | Allocations: 4563)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.3ms | Allocations: 4700)
Completed 200 OK in 37ms (Views: 9.2ms | ActiveRecord: 11.8ms | Allocations: 17191)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>93, "id"=>"4", "cart"=>{"discount"=>93}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.610416"], ["discount", "93.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>95, "id"=>"4", "cart"=>{"discount"=>95}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>94, "id"=>"4", "cart"=>{"discount"=>94}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  Parameters: {"discount"=>97, "id"=>"4", "cart"=>{"discount"=>97}}
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.619559"], ["discount", "95.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.6ms | Allocations: 5742)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.9ms | Allocations: 5871)
Completed 200 OK in 19ms (Views: 8.3ms | ActiveRecord: 6.3ms | Allocations: 9918)


  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>98, "id"=>"4", "cart"=>{"discount"=>98}}
  [1m[36mCart Update (7.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.620595"], ["discount", "94.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (2.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (4.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.634229"], ["discount", "97.0"], ["id", 4]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.7ms | Allocations: 5937)
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.7ms | Allocations: 6450)
Completed 200 OK in 29ms (Views: 9.9ms | ActiveRecord: 10.0ms | Allocations: 15564)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (4.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.640497"], ["discount", "98.0"], ["id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.8ms | Allocations: 6310)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.2ms | Allocations: 6441)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 35ms (Views: 8.6ms | ActiveRecord: 13.0ms | Allocations: 19553)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.7ms | Allocations: 5734)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.0ms | Allocations: 5872)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 4091)
Completed 200 OK in 34ms (Views: 10.2ms | ActiveRecord: 12.1ms | Allocations: 19681)


  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.7ms | Allocations: 4585)
Completed 200 OK in 27ms (Views: 6.9ms | ActiveRecord: 9.3ms | Allocations: 16577)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>99, "id"=>"4", "cart"=>{"discount"=>99}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.671657"], ["discount", "99.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>101, "id"=>"4", "cart"=>{"discount"=>101}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>102, "id"=>"4", "cart"=>{"discount"=>102}}
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"discount"=>103, "id"=>"4", "cart"=>{"discount"=>103}}
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.678124"], ["discount", "101.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.7ms | Allocations: 6253)
  [1m[36mCart Update (2.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.686201"], ["discount", "103.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.2ms | Allocations: 6442)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 21ms (Views: 10.5ms | ActiveRecord: 6.8ms | Allocations: 12448)


  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (8.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.683913"], ["discount", "102.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Parameters: {"discount"=>104, "id"=>"4", "cart"=>{"discount"=>104}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (2.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 12.9ms | Allocations: 6875)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.0ms | Allocations: 5511)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.4ms | Allocations: 5640)
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (1.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 16.6ms | Allocations: 8916)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 35ms (Views: 18.0ms | ActiveRecord: 8.7ms | Allocations: 19508)


  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 15.4ms | Allocations: 7228)
Completed 200 OK in 28ms (Views: 12.9ms | ActiveRecord: 7.8ms | Allocations: 16462)


  Rendered carts/update_discount.turbo_stream.erb (Duration: 15.6ms | Allocations: 7374)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  [1m[36mCart Update (5.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.709009"], ["discount", "104.0"], ["id", 4]]
Completed 200 OK in 39ms (Views: 13.4ms | ActiveRecord: 18.6ms | Allocations: 20908)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.7ms | Allocations: 2346)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2507)
Completed 200 OK in 28ms (Views: 4.9ms | ActiveRecord: 12.1ms | Allocations: 11844)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>108, "id"=>"4", "cart"=>{"discount"=>108}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.734246"], ["discount", "108.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>105, "id"=>"4", "cart"=>{"discount"=>105}}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2944)
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.3ms | Allocations: 3130)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 11ms (Views: 4.2ms | ActiveRecord: 3.7ms | Allocations: 6707)


  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.743579"], ["discount", "105.0"], ["id", 4]]
  Parameters: {"discount"=>106, "id"=>"4", "cart"=>{"discount"=>106}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>107, "id"=>"4", "cart"=>{"discount"=>107}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.751908"], ["discount", "106.0"], ["id", 4]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.9ms | Allocations: 5042)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 5171)
Completed 200 OK in 19ms (Views: 6.0ms | ActiveRecord: 8.9ms | Allocations: 10941)


  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (4.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.755028"], ["discount", "107.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 2880)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 3313)
Completed 200 OK in 21ms (Views: 5.8ms | ActiveRecord: 6.7ms | Allocations: 11631)


  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.7ms | Allocations: 3376)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.0ms | Allocations: 3505)
Completed 200 OK in 22ms (Views: 5.7ms | ActiveRecord: 8.8ms | Allocations: 12739)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>107, "id"=>"4", "cart"=>{"discount"=>107}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.3ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 2.5ms | Allocations: 2264)
Completed 200 OK in 5ms (Views: 2.7ms | ActiveRecord: 0.3ms | Allocations: 3410)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:08 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>92, "id"=>"4", "cart"=>{"discount"=>92}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:08.937464"], ["discount", "92.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.5ms | Allocations: 2264)
Completed 200 OK in 20ms (Views: 4.5ms | ActiveRecord: 11.5ms | Allocations: 4877)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>93, "id"=>"4", "cart"=>{"discount"=>93}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.041068"], ["discount", "93.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>94, "id"=>"4", "cart"=>{"discount"=>94}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (3.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.049480"], ["discount", "94.0"], ["id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mTRANSACTION (9.9ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>95, "id"=>"4", "cart"=>{"discount"=>95}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.058880"], ["discount", "95.0"], ["id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 15.1ms | Allocations: 6553)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 15.6ms | Allocations: 6731)
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 32ms (Views: 13.3ms | ActiveRecord: 14.8ms | Allocations: 14258)


  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.8ms | Allocations: 5784)
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.7ms | Allocations: 6121)
Completed 200 OK in 29ms (Views: 14.7ms | ActiveRecord: 8.3ms | Allocations: 12896)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>99, "id"=>"4", "cart"=>{"discount"=>99}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (5.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.9ms | Allocations: 4678)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 15.3ms | Allocations: 5419)
Completed 200 OK in 36ms (Views: 9.5ms | ActiveRecord: 13.3ms | Allocations: 14767)


  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.088809"], ["discount", "99.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 2265)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 2408)
Completed 200 OK in 18ms (Views: 5.8ms | ActiveRecord: 4.7ms | Allocations: 8159)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>96, "id"=>"4", "cart"=>{"discount"=>96}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.113243"], ["discount", "96.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>97, "id"=>"4", "cart"=>{"discount"=>97}}
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (1.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>101, "id"=>"4", "cart"=>{"discount"=>101}}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (2.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.120958"], ["discount", "97.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.4ms | Allocations: 4872)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.6ms | Allocations: 5375)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 21ms (Views: 9.3ms | ActiveRecord: 6.7ms | Allocations: 10415)


  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.128415"], ["discount", "101.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.5ms | Allocations: 3734)
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.2ms | Allocations: 4078)
Completed 200 OK in 22ms (Views: 7.5ms | ActiveRecord: 7.8ms | Allocations: 11776)


  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 3009)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 3142)
Completed 200 OK in 20ms (Views: 4.5ms | ActiveRecord: 7.4ms | Allocations: 11391)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>102, "id"=>"4", "cart"=>{"discount"=>102}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.151812"], ["discount", "102.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>105, "id"=>"4", "cart"=>{"discount"=>105}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>103, "id"=>"4", "cart"=>{"discount"=>103}}
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 4960)
  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.160931"], ["discount", "105.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 5148)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 16ms (Views: 7.6ms | ActiveRecord: 4.5ms | Allocations: 9699)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (5.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.162479"], ["discount", "103.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>104, "id"=>"4", "cart"=>{"discount"=>104}}
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.1ms | Allocations: 3364)
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.7ms | Allocations: 3557)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 25ms (Views: 8.9ms | ActiveRecord: 9.6ms | Allocations: 12574)


  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.9ms | Allocations: 4968)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.6ms | Allocations: 5335)
Completed 200 OK in 30ms (Views: 8.5ms | ActiveRecord: 11.0ms | Allocations: 15823)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.184037"], ["discount", "104.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Parameters: {"discount"=>106, "id"=>"4", "cart"=>{"discount"=>106}}
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 2899)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.9ms | Allocations: 3046)
Completed 200 OK in 19ms (Views: 5.3ms | ActiveRecord: 8.3ms | Allocations: 9598)


  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.199701"], ["discount", "106.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 2298)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 2436)
Completed 200 OK in 18ms (Views: 5.7ms | ActiveRecord: 4.8ms | Allocations: 6920)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>107, "id"=>"4", "cart"=>{"discount"=>107}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.220956"], ["discount", "107.0"], ["id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>110, "id"=>"4", "cart"=>{"discount"=>110}}
  Parameters: {"discount"=>108, "id"=>"4", "cart"=>{"discount"=>108}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.234674"], ["discount", "108.0"], ["id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>109, "id"=>"4", "cart"=>{"discount"=>109}}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.9ms | Allocations: 4161)
  [1m[36mCart Update (6.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.235338"], ["discount", "110.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 5364)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 26ms (Views: 8.8ms | ActiveRecord: 4.7ms | Allocations: 11480)


  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (3.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (4.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.246051"], ["discount", "109.0"], ["id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>111, "id"=>"4", "cart"=>{"discount"=>111}}
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 12.5ms | Allocations: 7316)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.3ms | Allocations: 8336)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 30ms (Views: 10.2ms | ActiveRecord: 11.8ms | Allocations: 17214)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.258334"], ["discount", "111.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.8ms | Allocations: 7223)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mLineItem Load (2.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.6ms | Allocations: 7616)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 36ms (Views: 13.4ms | ActiveRecord: 14.5ms | Allocations: 20090)


  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.5ms | Allocations: 5361)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.8ms | Allocations: 5496)
Completed 200 OK in 30ms (Views: 10.9ms | ActiveRecord: 11.5ms | Allocations: 17285)


  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.8ms | Allocations: 3579)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.1ms | Allocations: 3716)
Completed 200 OK in 22ms (Views: 5.5ms | ActiveRecord: 6.9ms | Allocations: 13245)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>114, "id"=>"4", "cart"=>{"discount"=>114}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.287259"], ["discount", "114.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>113, "id"=>"4", "cart"=>{"discount"=>113}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.5ms | Allocations: 3878)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.8ms | Allocations: 4035)
Completed 200 OK in 16ms (Views: 6.1ms | ActiveRecord: 5.7ms | Allocations: 7574)


  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.297917"], ["discount", "113.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>115, "id"=>"4", "cart"=>{"discount"=>115}}
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Parameters: {"discount"=>116, "id"=>"4", "cart"=>{"discount"=>116}}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 3898)
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>117, "id"=>"4", "cart"=>{"discount"=>117}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 4791)
Completed 200 OK in 23ms (Views: 7.3ms | ActiveRecord: 8.2ms | Allocations: 12469)


  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Update (5.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.308784"], ["discount", "115.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Update (6.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.313908"], ["discount", "116.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (5.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.319657"], ["discount", "117.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.6ms | Allocations: 5976)
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.9ms | Allocations: 6116)
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 31ms (Views: 11.9ms | ActiveRecord: 11.6ms | Allocations: 16415)


  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 4638)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.4ms | Allocations: 4775)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.5ms | Allocations: 6841)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.4ms | Allocations: 7250)
Completed 200 OK in 27ms (Views: 8.4ms | ActiveRecord: 9.0ms | Allocations: 13773)


Completed 200 OK in 34ms (Views: 11.7ms | ActiveRecord: 13.4ms | Allocations: 18263)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>118, "id"=>"4", "cart"=>{"discount"=>118}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.351767"], ["discount", "118.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>120, "id"=>"4", "cart"=>{"discount"=>120}}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.357261"], ["discount", "120.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>121, "id"=>"4", "cart"=>{"discount"=>121}}
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.5ms | Allocations: 4067)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.8ms | Allocations: 4821)
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 17ms (Views: 8.4ms | ActiveRecord: 5.1ms | Allocations: 9369)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 4656)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 4839)
Completed 200 OK in 20ms (Views: 6.5ms | ActiveRecord: 8.1ms | Allocations: 10654)


  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.369434"], ["discount", "121.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>122, "id"=>"4", "cart"=>{"discount"=>122}}
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>123, "id"=>"4", "cart"=>{"discount"=>123}}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.383807"], ["discount", "122.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.386647"], ["discount", "123.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 5742)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 6434)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 30ms (Views: 10.0ms | ActiveRecord: 9.2ms | Allocations: 16415)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.3ms | Allocations: 4998)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.2ms | Allocations: 5576)
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 8.9ms | ActiveRecord: 7.1ms | Allocations: 13012)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 3896)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 4027)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Completed 200 OK in 23ms (Views: 7.4ms | ActiveRecord: 7.1ms | Allocations: 13906)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>126, "id"=>"4", "cart"=>{"discount"=>126}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.412847"], ["discount", "126.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>124, "id"=>"4", "cart"=>{"discount"=>124}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>128, "id"=>"4", "cart"=>{"discount"=>128}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (7.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.418467"], ["discount", "124.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 15.0ms | Allocations: 5826)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>127, "id"=>"4", "cart"=>{"discount"=>127}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 16.0ms | Allocations: 6724)
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.430218"], ["discount", "128.0"], ["id", 4]]
Completed 200 OK in 23ms (Views: 13.7ms | ActiveRecord: 6.4ms | Allocations: 10869)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (4.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (3.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.441497"], ["discount", "127.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 12.9ms | Allocations: 6003)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.9ms | Allocations: 6596)
Completed 200 OK in 33ms (Views: 9.7ms | ActiveRecord: 15.9ms | Allocations: 14996)


  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.7ms | Allocations: 5121)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.6ms | Allocations: 5569)
Completed 200 OK in 34ms (Views: 12.1ms | ActiveRecord: 10.3ms | Allocations: 15879)


  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.9ms | Allocations: 4056)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.2ms | Allocations: 4195)
Completed 200 OK in 28ms (Views: 7.5ms | ActiveRecord: 9.5ms | Allocations: 12946)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>129, "id"=>"4", "cart"=>{"discount"=>129}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.466484"], ["discount", "129.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2290)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2442)
Completed 200 OK in 12ms (Views: 4.9ms | ActiveRecord: 3.5ms | Allocations: 5960)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>130, "id"=>"4", "cart"=>{"discount"=>130}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.483983"], ["discount", "130.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>131, "id"=>"4", "cart"=>{"discount"=>131}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>133, "id"=>"4", "cart"=>{"discount"=>133}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.490093"], ["discount", "131.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.495392"], ["discount", "133.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.4ms | Allocations: 5796)
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.5ms | Allocations: 6862)
Completed 200 OK in 19ms (Views: 8.4ms | ActiveRecord: 6.4ms | Allocations: 10920)


  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Parameters: {"discount"=>134, "id"=>"4", "cart"=>{"discount"=>134}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 4599)
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.8ms | Allocations: 5144)
Completed 200 OK in 22ms (Views: 8.1ms | ActiveRecord: 7.3ms | Allocations: 13615)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.2ms | Allocations: 5090)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.7ms | Allocations: 5909)
Completed 200 OK in 28ms (Views: 10.8ms | ActiveRecord: 7.1ms | Allocations: 15364)


  [1m[36mCart Update (6.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.511126"], ["discount", "134.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 2348)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.4ms | Allocations: 2495)
Completed 200 OK in 25ms (Views: 7.0ms | ActiveRecord: 9.2ms | Allocations: 10333)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>135, "id"=>"4", "cart"=>{"discount"=>135}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.535084"], ["discount", "135.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>138, "id"=>"4", "cart"=>{"discount"=>138}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.544692"], ["discount", "138.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 3522)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.7ms | Allocations: 4097)
Completed 200 OK in 17ms (Views: 7.3ms | ActiveRecord: 5.7ms | Allocations: 7940)


Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>136, "id"=>"4", "cart"=>{"discount"=>136}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 3785)
  [1m[36mCart Update (4.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.558057"], ["discount", "136.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 3979)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 25ms (Views: 8.2ms | ActiveRecord: 7.4ms | Allocations: 11390)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>139, "id"=>"4", "cart"=>{"discount"=>139}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 3738)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 4417)
Completed 200 OK in 22ms (Views: 6.0ms | ActiveRecord: 10.6ms | Allocations: 10916)


  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.573040"], ["discount", "139.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>140, "id"=>"4", "cart"=>{"discount"=>140}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mTRANSACTION (5.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>141, "id"=>"4", "cart"=>{"discount"=>141}}
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.588174"], ["discount", "140.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.2ms | Allocations: 4833)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.6ms | Allocations: 5226)
Completed 200 OK in 24ms (Views: 8.4ms | ActiveRecord: 10.3ms | Allocations: 11923)


  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.594843"], ["discount", "141.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 3012)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.5ms | Allocations: 3388)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 23ms (Views: 5.9ms | ActiveRecord: 7.1ms | Allocations: 11979)


  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2964)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 3111)
Completed 200 OK in 20ms (Views: 4.2ms | ActiveRecord: 7.7ms | Allocations: 12343)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>142, "id"=>"4", "cart"=>{"discount"=>142}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.616796"], ["discount", "142.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.9ms | Allocations: 2352)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.7ms | Allocations: 2496)
Completed 200 OK in 17ms (Views: 6.6ms | ActiveRecord: 4.6ms | Allocations: 6034)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>143, "id"=>"4", "cart"=>{"discount"=>143}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.635798"], ["discount", "143.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>144, "id"=>"4", "cart"=>{"discount"=>144}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.642928"], ["discount", "144.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>145, "id"=>"4", "cart"=>{"discount"=>145}}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 3609)
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.0ms | Allocations: 3792)
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 17ms (Views: 6.8ms | ActiveRecord: 5.0ms | Allocations: 8898)


  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.653238"], ["discount", "145.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.1ms | Allocations: 4186)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.2ms | Allocations: 4805)
Processing by CartsController#update_discount as TURBO_STREAM
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>147, "id"=>"4", "cart"=>{"discount"=>147}}
  [1m[36mTRANSACTION (4.6ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>146, "id"=>"4", "cart"=>{"discount"=>146}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 24ms (Views: 11.5ms | ActiveRecord: 8.3ms | Allocations: 12399)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (2.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.670214"], ["discount", "147.0"], ["id", 4]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.7ms | Allocations: 5357)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.0ms | Allocations: 5493)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (4.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.672492"], ["discount", "146.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 29ms (Views: 9.2ms | ActiveRecord: 11.7ms | Allocations: 14966)


  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 3061)
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 3837)
Completed 200 OK in 27ms (Views: 5.5ms | ActiveRecord: 10.2ms | Allocations: 12257)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 3139)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 3277)
Completed 200 OK in 27ms (Views: 3.3ms | ActiveRecord: 10.4ms | Allocations: 13745)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>148, "id"=>"4", "cart"=>{"discount"=>148}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.704304"], ["discount", "148.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>98, "id"=>"4", "cart"=>{"discount"=>98}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.710686"], ["discount", "98.0"], ["id", 4]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.8ms | Allocations: 4581)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.1ms | Allocations: 4717)
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 17ms (Views: 8.2ms | ActiveRecord: 4.5ms | Allocations: 8417)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.2ms | Allocations: 3962)
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 4302)
Completed 200 OK in 18ms (Views: 7.1ms | ActiveRecord: 5.5ms | Allocations: 9052)


  Parameters: {"discount"=>149, "id"=>"4", "cart"=>{"discount"=>149}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>151, "id"=>"4", "cart"=>{"discount"=>151}}
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.730341"], ["discount", "149.0"], ["id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>152, "id"=>"4", "cart"=>{"discount"=>152}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.733901"], ["discount", "151.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (2.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (4.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.740321"], ["discount", "152.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.9ms | Allocations: 5906)
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.2ms | Allocations: 4258)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.8ms | Allocations: 4632)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.6ms | Allocations: 6348)
Completed 200 OK in 26ms (Views: 11.9ms | ActiveRecord: 8.4ms | Allocations: 13469)


Completed 200 OK in 24ms (Views: 8.1ms | ActiveRecord: 5.5ms | Allocations: 12404)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2850)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2989)
Completed 200 OK in 24ms (Views: 6.1ms | ActiveRecord: 9.7ms | Allocations: 12837)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>153, "id"=>"4", "cart"=>{"discount"=>153}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>155, "id"=>"4", "cart"=>{"discount"=>155}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.770363"], ["discount", "153.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.774243"], ["discount", "155.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>154, "id"=>"4", "cart"=>{"discount"=>154}}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.3ms | Allocations: 4458)
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.9ms | Allocations: 5015)
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 21ms (Views: 11.2ms | ActiveRecord: 6.4ms | Allocations: 10428)


  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.8ms | Allocations: 4482)
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.9ms | Allocations: 4872)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 24ms (Views: 10.5ms | ActiveRecord: 8.7ms | Allocations: 11777)


  [1m[36mCart Update (5.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.791236"], ["discount", "154.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>157, "id"=>"4", "cart"=>{"discount"=>157}}
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 3380)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 4044)
Completed 200 OK in 30ms (Views: 7.5ms | ActiveRecord: 10.7ms | Allocations: 12484)


  [1m[36mCart Update (3.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.808488"], ["discount", "157.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Parameters: {"discount"=>158, "id"=>"4", "cart"=>{"discount"=>158}}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.821458"], ["discount", "158.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 4328)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.6ms | Allocations: 4470)
Completed 200 OK in 23ms (Views: 7.1ms | ActiveRecord: 8.7ms | Allocations: 10992)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 2615)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.6ms | Allocations: 2747)
Completed 200 OK in 19ms (Views: 5.5ms | ActiveRecord: 6.1ms | Allocations: 8747)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>159, "id"=>"4", "cart"=>{"discount"=>159}}
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Parameters: {"discount"=>160, "id"=>"4", "cart"=>{"discount"=>160}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.846596"], ["discount", "159.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.849820"], ["discount", "160.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.9ms | Allocations: 3490)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.6ms | Allocations: 3954)
Completed 200 OK in 17ms (Views: 5.4ms | ActiveRecord: 5.3ms | Allocations: 8744)


  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 3466)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 3835)
Completed 200 OK in 18ms (Views: 8.3ms | ActiveRecord: 4.7ms | Allocations: 9921)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>161, "id"=>"4", "cart"=>{"discount"=>161}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.871074"], ["discount", "161.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>163, "id"=>"4", "cart"=>{"discount"=>163}}
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 3362)
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 3520)
Completed 200 OK in 17ms (Views: 6.7ms | ActiveRecord: 5.6ms | Allocations: 7717)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (4.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.882174"], ["discount", "163.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>164, "id"=>"4", "cart"=>{"discount"=>164}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (3.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.891987"], ["discount", "164.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 3830)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 3964)
Completed 200 OK in 22ms (Views: 6.7ms | ActiveRecord: 8.7ms | Allocations: 10461)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 2620)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 2759)
Completed 200 OK in 20ms (Views: 5.0ms | ActiveRecord: 8.7ms | Allocations: 9197)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>165, "id"=>"4", "cart"=>{"discount"=>165}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.915098"], ["discount", "165.0"], ["id", 4]]
  Parameters: {"discount"=>166, "id"=>"4", "cart"=>{"discount"=>166}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (4.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (3.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (6.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (18.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:10.933642"], ["discount", "166.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (4.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 62.0ms | Allocations: 3915)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 62.6ms | Allocations: 4050)
  [1m[36mTRANSACTION (29.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 77ms (Views: 52.1ms | ActiveRecord: 19.4ms | Allocations: 7752)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:10 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.4ms | Allocations: 2965)
  Parameters: {"discount"=>167, "id"=>"4", "cart"=>{"discount"=>167}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 3130)
Completed 200 OK in 82ms (Views: 7.4ms | ActiveRecord: 55.4ms | Allocations: 9249)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.005624"], ["discount", "167.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>168, "id"=>"4", "cart"=>{"discount"=>168}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2692)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 3115)
Processing by CartsController#update_discount as TURBO_STREAM
Completed 200 OK in 18ms (Views: 7.4ms | ActiveRecord: 3.6ms | Allocations: 8090)


  Parameters: {"discount"=>170, "id"=>"4", "cart"=>{"discount"=>170}}
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.016357"], ["discount", "168.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>169, "id"=>"4", "cart"=>{"discount"=>169}}
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.022393"], ["discount", "170.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (2.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (4.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.033857"], ["discount", "169.0"], ["id", 4]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.3ms | Allocations: 7152)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.8ms | Allocations: 4876)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.6ms | Allocations: 5581)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.7ms | Allocations: 7293)
Completed 200 OK in 23ms (Views: 7.2ms | ActiveRecord: 8.5ms | Allocations: 12263)


Completed 200 OK in 32ms (Views: 12.6ms | ActiveRecord: 10.1ms | Allocations: 16613)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>171, "id"=>"4", "cart"=>{"discount"=>171}}
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.050253"], ["discount", "171.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.4ms | Allocations: 4103)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 4642)
Completed 200 OK in 30ms (Views: 6.9ms | ActiveRecord: 11.5ms | Allocations: 15013)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2324)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2474)
Completed 200 OK in 21ms (Views: 5.0ms | ActiveRecord: 6.9ms | Allocations: 9724)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>172, "id"=>"4", "cart"=>{"discount"=>172}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.070275"], ["discount", "172.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2645)
  Parameters: {"discount"=>172, "id"=>"4", "cart"=>{"discount"=>172}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.3ms | Allocations: 2816)
Completed 200 OK in 13ms (Views: 5.3ms | ActiveRecord: 3.3ms | Allocations: 6436)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>173, "id"=>"4", "cart"=>{"discount"=>173}}
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2892)
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.4ms | Allocations: 3074)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 10ms (Views: 5.0ms | ActiveRecord: 1.3ms | Allocations: 5073)


  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.091050"], ["discount", "173.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Parameters: {"discount"=>174, "id"=>"4", "cart"=>{"discount"=>174}}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2569)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2721)
Completed 200 OK in 16ms (Views: 5.6ms | ActiveRecord: 5.3ms | Allocations: 8941)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Update (2.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.103978"], ["discount", "174.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>176, "id"=>"4", "cart"=>{"discount"=>176}}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (2.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.113097"], ["discount", "176.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 3913)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 4047)
Completed 200 OK in 20ms (Views: 5.2ms | ActiveRecord: 8.6ms | Allocations: 9794)


  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 2633)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.4ms | Allocations: 2768)
Completed 200 OK in 19ms (Views: 5.3ms | ActiveRecord: 6.9ms | Allocations: 8734)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>177, "id"=>"4", "cart"=>{"discount"=>177}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.137797"], ["discount", "177.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>178, "id"=>"4", "cart"=>{"discount"=>178}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (2.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.6ms | Allocations: 3352)
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (5.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.144444"], ["discount", "178.0"], ["id", 4]]
  Parameters: {"discount"=>181, "id"=>"4", "cart"=>{"discount"=>181}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 3736)
Completed 200 OK in 16ms (Views: 5.1ms | ActiveRecord: 7.4ms | Allocations: 7600)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.155209"], ["discount", "181.0"], ["id", 4]]
  Parameters: {"discount"=>179, "id"=>"4", "cart"=>{"discount"=>179}}
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.2ms | Allocations: 4843)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.1ms | Allocations: 5323)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 29ms (Views: 10.6ms | ActiveRecord: 14.2ms | Allocations: 14049)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (5.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.167178"], ["discount", "179.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.9ms | Allocations: 5223)
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.4ms | Allocations: 5396)
Completed 200 OK in 27ms (Views: 11.2ms | ActiveRecord: 8.2ms | Allocations: 12781)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>180, "id"=>"4", "cart"=>{"discount"=>180}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.4ms | Allocations: 3345)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 3482)
Completed 200 OK in 27ms (Views: 10.2ms | ActiveRecord: 10.4ms | Allocations: 11750)


  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.191853"], ["discount", "180.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2293)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.2ms | Allocations: 2436)
Completed 200 OK in 18ms (Views: 4.1ms | ActiveRecord: 5.5ms | Allocations: 7269)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>183, "id"=>"4", "cart"=>{"discount"=>183}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>184, "id"=>"4", "cart"=>{"discount"=>184}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (2.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Parameters: {"discount"=>185, "id"=>"4", "cart"=>{"discount"=>185}}
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>182, "id"=>"4", "cart"=>{"discount"=>182}}
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Update (3.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.213611"], ["discount", "183.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (4.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.216759"], ["discount", "184.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (5.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.220541"], ["discount", "185.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (7.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.221574"], ["discount", "182.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.0ms | Allocations: 4642)
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 4857)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 28ms (Views: 8.2ms | ActiveRecord: 10.6ms | Allocations: 15418)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.8ms | Allocations: 7872)
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.9ms | Allocations: 6823)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.7ms | Allocations: 7341)
Completed 200 OK in 27ms (Views: 8.3ms | ActiveRecord: 11.6ms | Allocations: 18020)


  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.8ms | Allocations: 8531)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 35ms (Views: 12.8ms | ActiveRecord: 9.2ms | Allocations: 20868)


  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.6ms | Allocations: 6250)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.0ms | Allocations: 6610)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Completed 200 OK in 29ms (Views: 8.7ms | ActiveRecord: 13.7ms | Allocations: 18482)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>190, "id"=>"4", "cart"=>{"discount"=>190}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>191, "id"=>"4", "cart"=>{"discount"=>191}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.266316"], ["discount", "190.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>189, "id"=>"4", "cart"=>{"discount"=>189}}
  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.265477"], ["discount", "191.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.271795"], ["discount", "189.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.1ms | Allocations: 5997)
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.9ms | Allocations: 6331)
Completed 200 OK in 28ms (Views: 9.2ms | ActiveRecord: 6.6ms | Allocations: 14163)


  Parameters: {"discount"=>156, "id"=>"4", "cart"=>{"discount"=>156}}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.1ms | Allocations: 6389)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.3ms | Allocations: 6987)
Completed 200 OK in 27ms (Views: 9.8ms | ActiveRecord: 9.3ms | Allocations: 15270)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.9ms | Allocations: 6363)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.5ms | Allocations: 6760)
  [1m[36mCart Load (1.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Completed 200 OK in 21ms (Views: 9.9ms | ActiveRecord: 7.4ms | Allocations: 13210)


  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.291942"], ["discount", "156.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>188, "id"=>"4", "cart"=>{"discount"=>188}}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.7ms | Allocations: 3357)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.7ms | Allocations: 4064)
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.306523"], ["discount", "188.0"], ["id", 4]]
Completed 200 OK in 25ms (Views: 10.1ms | ActiveRecord: 6.9ms | Allocations: 11585)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.7ms | Allocations: 2729)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2869)
Completed 200 OK in 21ms (Views: 4.3ms | ActiveRecord: 6.3ms | Allocations: 8343)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>192, "id"=>"4", "cart"=>{"discount"=>192}}
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"discount"=>193, "id"=>"4", "cart"=>{"discount"=>193}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>193, "id"=>"4", "cart"=>{"discount"=>193}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.330283"], ["discount", "192.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.333763"], ["discount", "193.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (5.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.336213"], ["discount", "193.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 3922)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.6ms | Allocations: 4060)
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 19ms (Views: 6.8ms | ActiveRecord: 5.9ms | Allocations: 10786)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (2.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.4ms | Allocations: 4840)
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.8ms | Allocations: 5023)
Completed 200 OK in 25ms (Views: 6.5ms | ActiveRecord: 10.3ms | Allocations: 14027)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.0ms | Allocations: 4263)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.3ms | Allocations: 4417)
Completed 200 OK in 25ms (Views: 5.4ms | ActiveRecord: 9.8ms | Allocations: 14985)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  Parameters: {"discount"=>194, "id"=>"4", "cart"=>{"discount"=>194}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.361320"], ["discount", "194.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>195, "id"=>"4", "cart"=>{"discount"=>195}}
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.369020"], ["discount", "195.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 3699)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 3836)
Completed 200 OK in 15ms (Views: 5.1ms | ActiveRecord: 5.3ms | Allocations: 7852)


  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2724)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2859)
Completed 200 OK in 15ms (Views: 4.1ms | ActiveRecord: 5.8ms | Allocations: 8963)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>186, "id"=>"4", "cart"=>{"discount"=>186}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  Parameters: {"discount"=>197, "id"=>"4", "cart"=>{"discount"=>197}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.389257"], ["discount", "186.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>198, "id"=>"4", "cart"=>{"discount"=>198}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.393246"], ["discount", "197.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.399964"], ["discount", "198.0"], ["id", 4]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.2ms | Allocations: 5223)
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.5ms | Allocations: 5356)
Completed 200 OK in 23ms (Views: 9.3ms | ActiveRecord: 7.7ms | Allocations: 12162)


  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.8ms | Allocations: 6297)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 15.0ms | Allocations: 6962)
Completed 200 OK in 29ms (Views: 14.1ms | ActiveRecord: 7.3ms | Allocations: 13512)


  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.6ms | Allocations: 4473)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.1ms | Allocations: 4650)
Completed 200 OK in 30ms (Views: 10.5ms | ActiveRecord: 8.6ms | Allocations: 13973)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>199, "id"=>"4", "cart"=>{"discount"=>199}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.429880"], ["discount", "199.0"], ["id", 4]]
  Parameters: {"discount"=>199, "id"=>"4", "cart"=>{"discount"=>199}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.434845"], ["discount", "199.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2809)
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 2984)
Completed 200 OK in 17ms (Views: 6.7ms | ActiveRecord: 4.7ms | Allocations: 8552)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2778)
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 3684)
Completed 200 OK in 20ms (Views: 9.2ms | ActiveRecord: 6.1ms | Allocations: 9788)


  Parameters: {"discount"=>204, "id"=>"4", "cart"=>{"discount"=>204}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>201, "id"=>"4", "cart"=>{"discount"=>201}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  Parameters: {"discount"=>203, "id"=>"4", "cart"=>{"discount"=>203}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (8.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.461882"], ["discount", "204.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (3.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.474374"], ["discount", "201.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (3.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (8.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.473701"], ["discount", "203.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.5ms | Allocations: 4837)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.9ms | Allocations: 4973)
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 35ms (Views: 8.1ms | ActiveRecord: 15.6ms | Allocations: 12817)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 4886)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.5ms | Allocations: 5252)
Completed 200 OK in 26ms (Views: 9.5ms | ActiveRecord: 8.7ms | Allocations: 14047)


  Parameters: {"discount"=>196, "id"=>"4", "cart"=>{"discount"=>196}}
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.9ms | Allocations: 5021)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.1ms | Allocations: 5158)
Completed 200 OK in 28ms (Views: 6.7ms | ActiveRecord: 14.8ms | Allocations: 14768)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.502204"], ["discount", "196.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2346)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.4ms | Allocations: 2493)
Completed 200 OK in 15ms (Views: 4.5ms | ActiveRecord: 3.9ms | Allocations: 7911)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>202, "id"=>"4", "cart"=>{"discount"=>202}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.517500"], ["discount", "202.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2297)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2438)
Completed 200 OK in 14ms (Views: 5.0ms | ActiveRecord: 4.3ms | Allocations: 5887)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>205, "id"=>"4", "cart"=>{"discount"=>205}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.533833"], ["discount", "205.0"], ["id", 4]]
  Parameters: {"discount"=>207, "id"=>"4", "cart"=>{"discount"=>207}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>206, "id"=>"4", "cart"=>{"discount"=>206}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.539068"], ["discount", "207.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 2726)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.7ms | Allocations: 2857)
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 17ms (Views: 5.6ms | ActiveRecord: 4.6ms | Allocations: 9874)


  [1m[36mCart Update (6.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.540688"], ["discount", "206.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (1.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.8ms | Allocations: 4033)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.1ms | Allocations: 4737)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 25ms (Views: 8.4ms | ActiveRecord: 10.8ms | Allocations: 13333)


  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.7ms | Allocations: 3768)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.8ms | Allocations: 4231)
Completed 200 OK in 26ms (Views: 7.9ms | ActiveRecord: 11.3ms | Allocations: 13982)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  Parameters: {"discount"=>209, "id"=>"4", "cart"=>{"discount"=>209}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.569244"], ["discount", "209.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>210, "id"=>"4", "cart"=>{"discount"=>210}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2705)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 2845)
Completed 200 OK in 14ms (Views: 5.4ms | ActiveRecord: 4.2ms | Allocations: 6441)


  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.583150"], ["discount", "210.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.5ms | Allocations: 2292)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.8ms | Allocations: 2440)
Completed 200 OK in 16ms (Views: 3.8ms | ActiveRecord: 5.2ms | Allocations: 7614)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>211, "id"=>"4", "cart"=>{"discount"=>211}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"discount"=>213, "id"=>"4", "cart"=>{"discount"=>213}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.600650"], ["discount", "211.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.603406"], ["discount", "213.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>214, "id"=>"4", "cart"=>{"discount"=>214}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.7ms | Allocations: 3461)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.3ms | Allocations: 4208)
Completed 200 OK in 24ms (Views: 11.1ms | ActiveRecord: 6.9ms | Allocations: 9462)


  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.621511"], ["discount", "214.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.4ms | Allocations: 4758)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.8ms | Allocations: 4925)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 28ms (Views: 10.5ms | ActiveRecord: 5.8ms | Allocations: 12753)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2682)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 2850)
Completed 200 OK in 21ms (Views: 5.6ms | ActiveRecord: 7.2ms | Allocations: 10355)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>215, "id"=>"4", "cart"=>{"discount"=>215}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.644428"], ["discount", "215.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>216, "id"=>"4", "cart"=>{"discount"=>216}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.8ms | Allocations: 3775)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.1ms | Allocations: 3960)
Completed 200 OK in 15ms (Views: 5.6ms | ActiveRecord: 4.3ms | Allocations: 7848)


  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.653056"], ["discount", "216.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>217, "id"=>"4", "cart"=>{"discount"=>217}}
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>218, "id"=>"4", "cart"=>{"discount"=>218}}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.0ms | Allocations: 4030)
  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.664545"], ["discount", "217.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.4ms | Allocations: 4224)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 21ms (Views: 8.8ms | ActiveRecord: 6.9ms | Allocations: 11765)


  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Update (3.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.672305"], ["discount", "218.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>219, "id"=>"4", "cart"=>{"discount"=>219}}
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.0ms | Allocations: 4039)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.0ms | Allocations: 4524)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 10.5ms | ActiveRecord: 8.7ms | Allocations: 12278)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.2ms | Allocations: 4956)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.4ms | Allocations: 5823)
Completed 200 OK in 28ms (Views: 11.1ms | ActiveRecord: 9.0ms | Allocations: 13389)


  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.691088"], ["discount", "219.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2360)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2502)
Completed 200 OK in 20ms (Views: 5.2ms | ActiveRecord: 7.8ms | Allocations: 9318)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>220, "id"=>"4", "cart"=>{"discount"=>220}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.713980"], ["discount", "220.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>221, "id"=>"4", "cart"=>{"discount"=>221}}
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.721034"], ["discount", "221.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.4ms | Allocations: 3974)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.7ms | Allocations: 4121)
Completed 200 OK in 15ms (Views: 5.4ms | ActiveRecord: 5.7ms | Allocations: 7879)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>222, "id"=>"4", "cart"=>{"discount"=>222}}
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mLineItem Load (1.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 4182)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 4319)
Completed 200 OK in 20ms (Views: 5.8ms | ActiveRecord: 10.5ms | Allocations: 10635)


  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.735321"], ["discount", "222.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>223, "id"=>"4", "cart"=>{"discount"=>223}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.0ms | Allocations: 3418)
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.746300"], ["discount", "223.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.4ms | Allocations: 3567)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 24ms (Views: 8.2ms | ActiveRecord: 7.2ms | Allocations: 11460)


  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2680)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2818)
Completed 200 OK in 19ms (Views: 4.5ms | ActiveRecord: 7.7ms | Allocations: 9257)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>224, "id"=>"4", "cart"=>{"discount"=>224}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.766559"], ["discount", "224.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.5ms | Allocations: 2309)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.8ms | Allocations: 2456)
Completed 200 OK in 14ms (Views: 3.8ms | ActiveRecord: 5.8ms | Allocations: 5999)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>226, "id"=>"4", "cart"=>{"discount"=>226}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.782205"], ["discount", "226.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>227, "id"=>"4", "cart"=>{"discount"=>227}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.790396"], ["discount", "227.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.3ms | Allocations: 4355)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.9ms | Allocations: 4530)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 18ms (Views: 8.6ms | ActiveRecord: 5.6ms | Allocations: 8437)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>228, "id"=>"4", "cart"=>{"discount"=>228}}
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.0ms | Allocations: 3292)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 3446)
Completed 200 OK in 20ms (Views: 6.3ms | ActiveRecord: 7.0ms | Allocations: 9511)


  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.807583"], ["discount", "228.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>229, "id"=>"4", "cart"=>{"discount"=>229}}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.817596"], ["discount", "229.0"], ["id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.2ms | Allocations: 3960)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.6ms | Allocations: 4104)
Completed 200 OK in 22ms (Views: 8.0ms | ActiveRecord: 6.2ms | Allocations: 10233)


  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2711)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2848)
Completed 200 OK in 19ms (Views: 4.4ms | ActiveRecord: 8.3ms | Allocations: 8896)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  Parameters: {"discount"=>230, "id"=>"4", "cart"=>{"discount"=>230}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.837860"], ["discount", "230.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2366)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2513)
Completed 200 OK in 14ms (Views: 5.0ms | ActiveRecord: 4.5ms | Allocations: 5568)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>232, "id"=>"4", "cart"=>{"discount"=>232}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>231, "id"=>"4", "cart"=>{"discount"=>231}}
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.856263"], ["discount", "232.0"], ["id", 4]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.858689"], ["discount", "231.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>233, "id"=>"4", "cart"=>{"discount"=>233}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 3912)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 4590)
Completed 200 OK in 21ms (Views: 7.6ms | ActiveRecord: 6.5ms | Allocations: 10333)


  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.5ms | Allocations: 4733)
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 4917)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 23ms (Views: 7.3ms | ActiveRecord: 9.4ms | Allocations: 11676)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>234, "id"=>"4", "cart"=>{"discount"=>234}}
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.878240"], ["discount", "233.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.885300"], ["discount", "234.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.0ms | Allocations: 3059)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.4ms | Allocations: 3201)
Completed 200 OK in 24ms (Views: 6.7ms | ActiveRecord: 7.8ms | Allocations: 11639)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2626)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 2761)
Completed 200 OK in 20ms (Views: 6.6ms | ActiveRecord: 6.3ms | Allocations: 9313)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>235, "id"=>"4", "cart"=>{"discount"=>235}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.910197"], ["discount", "235.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>236, "id"=>"4", "cart"=>{"discount"=>236}}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.1ms | Allocations: 3369)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.6ms | Allocations: 4025)
Completed 200 OK in 17ms (Views: 9.2ms | ActiveRecord: 4.2ms | Allocations: 7755)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.922017"], ["discount", "236.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>238, "id"=>"4", "cart"=>{"discount"=>238}}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.934424"], ["discount", "238.0"], ["id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.2ms | Allocations: 3895)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.5ms | Allocations: 4036)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 24ms (Views: 9.0ms | ActiveRecord: 7.0ms | Allocations: 10389)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>239, "id"=>"4", "cart"=>{"discount"=>239}}
  [1m[36mLineItem Load (1.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.9ms | Allocations: 3952)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.0ms | Allocations: 4624)
Completed 200 OK in 23ms (Views: 6.7ms | ActiveRecord: 8.2ms | Allocations: 10887)


Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (3.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.949895"], ["discount", "239.0"], ["id", 4]]
  Parameters: {"discount"=>240, "id"=>"4", "cart"=>{"discount"=>240}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.957997"], ["discount", "240.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.0ms | Allocations: 3588)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.4ms | Allocations: 3726)
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 18ms (Views: 5.6ms | ActiveRecord: 7.8ms | Allocations: 10428)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.9ms | Allocations: 2652)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.3ms | Allocations: 2793)
Completed 200 OK in 18ms (Views: 5.5ms | ActiveRecord: 6.4ms | Allocations: 9233)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>208, "id"=>"4", "cart"=>{"discount"=>208}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.983439"], ["discount", "208.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>242, "id"=>"4", "cart"=>{"discount"=>242}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:11.992008"], ["discount", "242.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 3875)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.4ms | Allocations: 4431)
Completed 200 OK in 15ms (Views: 6.1ms | ActiveRecord: 4.2ms | Allocations: 7867)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>243, "id"=>"4", "cart"=>{"discount"=>243}}
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:11 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.001582"], ["discount", "243.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.5ms | Allocations: 4080)
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>244, "id"=>"4", "cart"=>{"discount"=>244}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.9ms | Allocations: 4258)
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 20ms (Views: 5.7ms | ActiveRecord: 7.4ms | Allocations: 11393)


Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>245, "id"=>"4", "cart"=>{"discount"=>245}}
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.015334"], ["discount", "244.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 4514)
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.6ms | Allocations: 5389)
Completed 200 OK in 27ms (Views: 10.9ms | ActiveRecord: 8.4ms | Allocations: 13244)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (4.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.020869"], ["discount", "245.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.9ms | Allocations: 3987)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.6ms | Allocations: 4429)
Completed 200 OK in 29ms (Views: 7.5ms | ActiveRecord: 8.8ms | Allocations: 13581)


  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.7ms | Allocations: 4037)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.0ms | Allocations: 4181)
Completed 200 OK in 28ms (Views: 6.8ms | ActiveRecord: 9.2ms | Allocations: 13398)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>246, "id"=>"4", "cart"=>{"discount"=>246}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.053936"], ["discount", "246.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>247, "id"=>"4", "cart"=>{"discount"=>247}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (3.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.9ms | Allocations: 3943)
  [1m[36mCart Update (4.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.063429"], ["discount", "247.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.3ms | Allocations: 4084)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 19ms (Views: 6.9ms | ActiveRecord: 7.2ms | Allocations: 7974)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>248, "id"=>"4", "cart"=>{"discount"=>248}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.9ms | Allocations: 3643)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.3ms | Allocations: 4496)
Processing by CartsController#update_discount as TURBO_STREAM
Completed 200 OK in 24ms (Views: 7.7ms | ActiveRecord: 9.9ms | Allocations: 10901)


  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.077711"], ["discount", "248.0"], ["id", 4]]
  Parameters: {"discount"=>249, "id"=>"4", "cart"=>{"discount"=>249}}
  Parameters: {"discount"=>241, "id"=>"4", "cart"=>{"discount"=>241}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.089310"], ["discount", "249.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.092955"], ["discount", "241.0"], ["id", 4]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.5ms | Allocations: 6175)
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.0ms | Allocations: 6388)
Completed 200 OK in 30ms (Views: 9.6ms | ActiveRecord: 11.1ms | Allocations: 14951)


  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.9ms | Allocations: 5472)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.3ms | Allocations: 5613)
Completed 200 OK in 26ms (Views: 8.8ms | ActiveRecord: 8.2ms | Allocations: 13394)


  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.7ms | Allocations: 4709)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.1ms | Allocations: 4846)
Completed 200 OK in 28ms (Views: 8.4ms | ActiveRecord: 9.2ms | Allocations: 14328)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>252, "id"=>"4", "cart"=>{"discount"=>252}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.123795"], ["discount", "252.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>253, "id"=>"4", "cart"=>{"discount"=>253}}
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.131623"], ["discount", "253.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 3896)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 4027)
Completed 200 OK in 17ms (Views: 5.9ms | ActiveRecord: 6.2ms | Allocations: 7765)


  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>253, "id"=>"4", "cart"=>{"discount"=>253}}
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>254, "id"=>"4", "cart"=>{"discount"=>254}}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 3639)
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.2ms | Allocations: 3835)
Completed 200 OK in 21ms (Views: 7.7ms | ActiveRecord: 6.8ms | Allocations: 10259)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>256, "id"=>"4", "cart"=>{"discount"=>256}}
  [1m[36mCart Load (1.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.153204"], ["discount", "254.0"], ["id", 4]]
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.5ms | Allocations: 4914)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.0ms | Allocations: 5107)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 20ms (Views: 9.3ms | ActiveRecord: 3.4ms | Allocations: 10652)


  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (4.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.159181"], ["discount", "256.0"], ["id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.3ms | Allocations: 4534)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.1ms | Allocations: 4927)
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 27ms (Views: 9.3ms | ActiveRecord: 8.9ms | Allocations: 14016)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.7ms | Allocations: 3103)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.2ms | Allocations: 3239)
Completed 200 OK in 25ms (Views: 6.4ms | ActiveRecord: 9.4ms | Allocations: 13247)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>257, "id"=>"4", "cart"=>{"discount"=>257}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>251, "id"=>"4", "cart"=>{"discount"=>251}}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.192644"], ["discount", "257.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>258, "id"=>"4", "cart"=>{"discount"=>258}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (4.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.194320"], ["discount", "251.0"], ["id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>259, "id"=>"4", "cart"=>{"discount"=>259}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.204901"], ["discount", "258.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (3.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.6ms | Allocations: 5969)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.6ms | Allocations: 6924)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.212501"], ["discount", "259.0"], ["id", 4]]
Completed 200 OK in 27ms (Views: 13.2ms | ActiveRecord: 7.6ms | Allocations: 13572)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 16.4ms | Allocations: 8321)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 16.7ms | Allocations: 8456)
Completed 200 OK in 35ms (Views: 13.4ms | ActiveRecord: 13.7ms | Allocations: 17756)


  [1m[36mLineItem Load (1.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>261, "id"=>"4", "cart"=>{"discount"=>261}}
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.9ms | Allocations: 6087)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.2ms | Allocations: 6494)
Completed 200 OK in 33ms (Views: 11.6ms | ActiveRecord: 10.7ms | Allocations: 16454)


  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mCart Load (2.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 15.1ms | Allocations: 6045)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 15.6ms | Allocations: 6210)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 39ms (Views: 13.5ms | ActiveRecord: 12.1ms | Allocations: 18893)


  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.238672"], ["discount", "261.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2316)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2487)
Completed 200 OK in 21ms (Views: 4.8ms | ActiveRecord: 8.4ms | Allocations: 8914)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>263, "id"=>"4", "cart"=>{"discount"=>263}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>264, "id"=>"4", "cart"=>{"discount"=>264}}
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.260382"], ["discount", "263.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>266, "id"=>"4", "cart"=>{"discount"=>266}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (1.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Parameters: {"discount"=>265, "id"=>"4", "cart"=>{"discount"=>265}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.270072"], ["discount", "264.0"], ["id", 4]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.5ms | Allocations: 5973)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.0ms | Allocations: 6169)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (6.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.272109"], ["discount", "266.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 22ms (Views: 9.8ms | ActiveRecord: 6.9ms | Allocations: 11907)


  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (7.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.277108"], ["discount", "265.0"], ["id", 4]]
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 4463)
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.6ms | Allocations: 4885)
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 28ms (Views: 10.0ms | ActiveRecord: 7.6ms | Allocations: 15361)


  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.1ms | Allocations: 4374)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.8ms | Allocations: 4811)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 33ms (Views: 8.4ms | ActiveRecord: 13.4ms | Allocations: 18502)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.1ms | Allocations: 5030)
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>267, "id"=>"4", "cart"=>{"discount"=>267}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.4ms | Allocations: 5385)
Completed 200 OK in 30ms (Views: 8.9ms | ActiveRecord: 13.2ms | Allocations: 16392)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.305463"], ["discount", "267.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2380)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.6ms | Allocations: 2532)
Completed 200 OK in 15ms (Views: 4.5ms | ActiveRecord: 4.4ms | Allocations: 6813)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>268, "id"=>"4", "cart"=>{"discount"=>268}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>269, "id"=>"4", "cart"=>{"discount"=>269}}
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.329054"], ["discount", "268.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>270, "id"=>"4", "cart"=>{"discount"=>270}}
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (4.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.330895"], ["discount", "269.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>271, "id"=>"4", "cart"=>{"discount"=>271}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (4.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.338857"], ["discount", "270.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (5.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.344664"], ["discount", "271.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 14.8ms | Allocations: 7475)
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 16.2ms | Allocations: 8192)
Completed 200 OK in 31ms (Views: 15.7ms | ActiveRecord: 8.8ms | Allocations: 15411)


  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.0ms | Allocations: 6306)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 15.9ms | Allocations: 7296)
Completed 200 OK in 33ms (Views: 15.8ms | ActiveRecord: 11.3ms | Allocations: 16319)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.9ms | Allocations: 5033)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.7ms | Allocations: 5387)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 35ms (Views: 11.5ms | ActiveRecord: 9.8ms | Allocations: 16868)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.7ms | Allocations: 5144)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.1ms | Allocations: 5282)
Completed 200 OK in 34ms (Views: 10.8ms | ActiveRecord: 13.6ms | Allocations: 16574)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  Parameters: {"discount"=>272, "id"=>"4", "cart"=>{"discount"=>272}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.378602"], ["discount", "272.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.7ms | Allocations: 2364)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.4ms | Allocations: 2511)
Completed 200 OK in 13ms (Views: 4.3ms | ActiveRecord: 3.9ms | Allocations: 5787)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>274, "id"=>"4", "cart"=>{"discount"=>274}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>273, "id"=>"4", "cart"=>{"discount"=>273}}
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>277, "id"=>"4", "cart"=>{"discount"=>277}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.400879"], ["discount", "274.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>276, "id"=>"4", "cart"=>{"discount"=>276}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Update (4.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.402238"], ["discount", "273.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (3.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.408805"], ["discount", "277.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (5.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.410576"], ["discount", "276.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.5ms | Allocations: 6522)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.8ms | Allocations: 6654)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 27ms (Views: 11.4ms | ActiveRecord: 7.9ms | Allocations: 16381)


  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.8ms | Allocations: 6841)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.2ms | Allocations: 7568)
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 29ms (Views: 11.8ms | ActiveRecord: 10.1ms | Allocations: 17551)


  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.6ms | Allocations: 6316)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.7ms | Allocations: 6930)
Completed 200 OK in 30ms (Views: 13.0ms | ActiveRecord: 9.4ms | Allocations: 17235)


  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 14.1ms | Allocations: 7465)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.5ms | Allocations: 7599)
Completed 200 OK in 31ms (Views: 13.8ms | ActiveRecord: 10.0ms | Allocations: 17764)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>277, "id"=>"4", "cart"=>{"discount"=>277}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.448492"], ["discount", "277.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2301)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.5ms | Allocations: 2450)
Completed 200 OK in 13ms (Views: 4.3ms | ActiveRecord: 4.0ms | Allocations: 5743)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>278, "id"=>"4", "cart"=>{"discount"=>278}}
  Parameters: {"discount"=>279, "id"=>"4", "cart"=>{"discount"=>279}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.469772"], ["discount", "279.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>280, "id"=>"4", "cart"=>{"discount"=>280}}
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (3.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.470943"], ["discount", "278.0"], ["id", 4]]
  Parameters: {"discount"=>281, "id"=>"4", "cart"=>{"discount"=>281}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (2.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (5.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.479596"], ["discount", "280.0"], ["id", 4]]
  [1m[36mProduct Load (2.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.5ms | Allocations: 6772)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.9ms | Allocations: 6905)
Completed 200 OK in 26ms (Views: 11.1ms | ActiveRecord: 9.2ms | Allocations: 12783)


  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (8.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.483422"], ["discount", "281.0"], ["id", 4]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 16.3ms | Allocations: 7492)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 17.4ms | Allocations: 7910)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 35ms (Views: 14.2ms | ActiveRecord: 11.4ms | Allocations: 16797)


  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.0ms | Allocations: 4662)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.8ms | Allocations: 5026)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 34ms (Views: 11.1ms | ActiveRecord: 9.7ms | Allocations: 16864)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.4ms | Allocations: 4686)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.7ms | Allocations: 4818)
Completed 200 OK in 35ms (Views: 8.7ms | ActiveRecord: 14.7ms | Allocations: 17505)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>282, "id"=>"4", "cart"=>{"discount"=>282}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.522714"], ["discount", "282.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 2354)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 2496)
Completed 200 OK in 13ms (Views: 5.1ms | ActiveRecord: 4.3ms | Allocations: 5683)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>283, "id"=>"4", "cart"=>{"discount"=>283}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>284, "id"=>"4", "cart"=>{"discount"=>284}}
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.539204"], ["discount", "283.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>285, "id"=>"4", "cart"=>{"discount"=>285}}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.543871"], ["discount", "284.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>286, "id"=>"4", "cart"=>{"discount"=>286}}
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 12.2ms | Allocations: 6340)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.555475"], ["discount", "285.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.6ms | Allocations: 6517)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 13.8ms | ActiveRecord: 7.5ms | Allocations: 14214)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.8ms | Allocations: 6368)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.7ms | Allocations: 6797)
  [1m[36mCart Update (4.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.560588"], ["discount", "286.0"], ["id", 4]]
Completed 200 OK in 25ms (Views: 9.9ms | ActiveRecord: 9.5ms | Allocations: 13094)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mTRANSACTION (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.5ms | Allocations: 4091)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.2ms | Allocations: 4520)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 29ms (Views: 8.4ms | ActiveRecord: 8.9ms | Allocations: 15888)


  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 4171)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.2ms | Allocations: 4307)
Completed 200 OK in 29ms (Views: 7.6ms | ActiveRecord: 11.2ms | Allocations: 15514)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>288, "id"=>"4", "cart"=>{"discount"=>288}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.593316"], ["discount", "288.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.6ms | Allocations: 2325)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.9ms | Allocations: 2473)
Completed 200 OK in 13ms (Views: 4.0ms | ActiveRecord: 4.3ms | Allocations: 5561)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>289, "id"=>"4", "cart"=>{"discount"=>289}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>290, "id"=>"4", "cart"=>{"discount"=>290}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"discount"=>291, "id"=>"4", "cart"=>{"discount"=>291}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.609046"], ["discount", "289.0"], ["id", 4]]
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.613916"], ["discount", "290.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Parameters: {"discount"=>292, "id"=>"4", "cart"=>{"discount"=>292}}
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (5.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.616171"], ["discount", "291.0"], ["id", 4]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.2ms | Allocations: 6052)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.4ms | Allocations: 6815)
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 14.1ms | ActiveRecord: 7.3ms | Allocations: 14158)


  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 12.8ms | Allocations: 6648)
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (8.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.631360"], ["discount", "292.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.6ms | Allocations: 7046)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.2ms | Allocations: 6506)
Completed 200 OK in 37ms (Views: 12.9ms | ActiveRecord: 9.6ms | Allocations: 18421)


  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.2ms | Allocations: 6773)
Completed 200 OK in 35ms (Views: 12.6ms | ActiveRecord: 12.0ms | Allocations: 17252)


  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.1ms | Allocations: 3010)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3171)
Completed 200 OK in 34ms (Views: 6.0ms | ActiveRecord: 14.7ms | Allocations: 15124)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>293, "id"=>"4", "cart"=>{"discount"=>293}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.663608"], ["discount", "293.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>260, "id"=>"4", "cart"=>{"discount"=>260}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.669561"], ["discount", "260.0"], ["id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>234, "id"=>"4", "cart"=>{"discount"=>234}}
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Parameters: {"discount"=>295, "id"=>"4", "cart"=>{"discount"=>295}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.5ms | Allocations: 4975)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 5125)
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 17ms (Views: 8.4ms | ActiveRecord: 5.1ms | Allocations: 9703)


  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (4.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (5.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.682358"], ["discount", "234.0"], ["id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.7ms | Allocations: 4960)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.0ms | Allocations: 5089)
Completed 200 OK in 23ms (Views: 11.8ms | ActiveRecord: 5.3ms | Allocations: 12243)


  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (5.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.685052"], ["discount", "295.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2840)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2969)
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 22ms (Views: 3.5ms | ActiveRecord: 10.0ms | Allocations: 12070)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 3322)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 3451)
Completed 200 OK in 25ms (Views: 4.5ms | ActiveRecord: 13.6ms | Allocations: 14017)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>294, "id"=>"4", "cart"=>{"discount"=>294}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:12.864269"], ["discount", "294.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.6ms | Allocations: 2264)
Completed 200 OK in 19ms (Views: 4.5ms | ActiveRecord: 10.9ms | Allocations: 4887)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>303, "id"=>"4", "cart"=>{"discount"=>303}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.138882"], ["discount", "303.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>310, "id"=>"4", "cart"=>{"discount"=>310}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>306, "id"=>"4", "cart"=>{"discount"=>306}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (12.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.155167"], ["discount", "310.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (6.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.156145"], ["discount", "306.0"], ["id", 4]]
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (2.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.5ms | Allocations: 3925)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.4ms | Allocations: 4398)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 34ms (Views: 7.0ms | ActiveRecord: 20.2ms | Allocations: 14088)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 12.6ms | Allocations: 5206)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.9ms | Allocations: 5340)
Completed 200 OK in 29ms (Views: 12.4ms | ActiveRecord: 8.3ms | Allocations: 12732)


  [1m[36mProduct Load (2.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.7ms | Allocations: 4387)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.6ms | Allocations: 4749)
Completed 200 OK in 33ms (Views: 9.5ms | ActiveRecord: 12.4ms | Allocations: 14346)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  Parameters: {"discount"=>307, "id"=>"4", "cart"=>{"discount"=>307}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.190958"], ["discount", "307.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>311, "id"=>"4", "cart"=>{"discount"=>311}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.197348"], ["discount", "311.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 3664)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.2ms | Allocations: 3840)
Completed 200 OK in 16ms (Views: 6.5ms | ActiveRecord: 4.9ms | Allocations: 8105)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2622)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2759)
Completed 200 OK in 17ms (Views: 4.6ms | ActiveRecord: 5.4ms | Allocations: 8912)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>320, "id"=>"4", "cart"=>{"discount"=>320}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>322, "id"=>"4", "cart"=>{"discount"=>322}}
  [1m[36mCart Update (7.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.220135"], ["discount", "320.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.229682"], ["discount", "322.0"], ["id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Parameters: {"discount"=>319, "id"=>"4", "cart"=>{"discount"=>319}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.5ms | Allocations: 4110)
  Parameters: {"discount"=>315, "id"=>"4", "cart"=>{"discount"=>315}}
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"discount"=>317, "id"=>"4", "cart"=>{"discount"=>317}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 4769)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 23ms (Views: 6.9ms | ActiveRecord: 11.5ms | Allocations: 10593)


  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (3.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (3.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (7.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.241546"], ["discount", "319.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (4.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.247927"], ["discount", "315.0"], ["id", 4]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 14.8ms | Allocations: 8505)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 15.7ms | Allocations: 8896)
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 29ms (Views: 14.8ms | ActiveRecord: 7.7ms | Allocations: 16158)


  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (4.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.252313"], ["discount", "317.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.7ms | Allocations: 4345)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mLineItem Load (5.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.9ms | Allocations: 5682)
Processing by CartsController#update_discount as TURBO_STREAM
Completed 200 OK in 38ms (Views: 14.7ms | ActiveRecord: 15.9ms | Allocations: 18525)


  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>327, "id"=>"4", "cart"=>{"discount"=>327}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.5ms | Allocations: 5886)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.3ms | Allocations: 6173)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.6ms | Allocations: 6824)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.0ms | Allocations: 6669)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 41ms (Views: 21.0ms | ActiveRecord: 11.4ms | Allocations: 20992)


Completed 200 OK in 40ms (Views: 10.6ms | ActiveRecord: 14.8ms | Allocations: 20031)


  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.279821"], ["discount", "327.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mTRANSACTION (5.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>329, "id"=>"4", "cart"=>{"discount"=>329}}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (3.0ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.3ms | Allocations: 4021)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.2ms | Allocations: 4680)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 27ms (Views: 10.2ms | ActiveRecord: 9.8ms | Allocations: 13411)


  Parameters: {"discount"=>333, "id"=>"4", "cart"=>{"discount"=>333}}
  [1m[36mCart Update (5.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.295431"], ["discount", "329.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.307436"], ["discount", "333.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Parameters: {"discount"=>331, "id"=>"4", "cart"=>{"discount"=>331}}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.7ms | Allocations: 4120)
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.1ms | Allocations: 4299)
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 26ms (Views: 7.4ms | ActiveRecord: 12.1ms | Allocations: 12668)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.318089"], ["discount", "331.0"], ["id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.1ms | Allocations: 5215)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.5ms | Allocations: 5352)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 23ms (Views: 8.3ms | ActiveRecord: 7.5ms | Allocations: 11956)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.1ms | Allocations: 2678)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.5ms | Allocations: 2830)
Completed 200 OK in 20ms (Views: 4.9ms | ActiveRecord: 7.1ms | Allocations: 10929)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>336, "id"=>"4", "cart"=>{"discount"=>336}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.337718"], ["discount", "336.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 2456)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 2601)
Completed 200 OK in 13ms (Views: 5.6ms | ActiveRecord: 3.6ms | Allocations: 6065)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>345, "id"=>"4", "cart"=>{"discount"=>345}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>339, "id"=>"4", "cart"=>{"discount"=>339}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.352813"], ["discount", "345.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>341, "id"=>"4", "cart"=>{"discount"=>341}}
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.354979"], ["discount", "339.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (2.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.362613"], ["discount", "341.0"], ["id", 4]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.6ms | Allocations: 5532)
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/update_discount.turbo_stream.erb (Duration: 15.0ms | Allocations: 6579)
Completed 200 OK in 26ms (Views: 15.0ms | ActiveRecord: 6.2ms | Allocations: 12884)


  [1m[36mProduct Load (5.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>352, "id"=>"4", "cart"=>{"discount"=>352}}
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 17.1ms | Allocations: 6624)
  Parameters: {"discount"=>347, "id"=>"4", "cart"=>{"discount"=>347}}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 21.7ms | Allocations: 8356)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 33ms (Views: 15.5ms | ActiveRecord: 13.2ms | Allocations: 15781)


  [1m[36mProduct Load (2.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.385314"], ["discount", "352.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.5ms | Allocations: 5709)
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.9ms | Allocations: 5879)
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.390902"], ["discount", "347.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 37ms (Views: 8.5ms | ActiveRecord: 9.8ms | Allocations: 17860)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.4ms | Allocations: 3970)
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 4155)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 26ms (Views: 7.7ms | ActiveRecord: 9.6ms | Allocations: 14130)


  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 4189)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.9ms | Allocations: 4323)
Completed 200 OK in 23ms (Views: 5.8ms | ActiveRecord: 7.7ms | Allocations: 13350)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>356, "id"=>"4", "cart"=>{"discount"=>356}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>358, "id"=>"4", "cart"=>{"discount"=>358}}
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.422843"], ["discount", "356.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.430872"], ["discount", "358.0"], ["id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>363, "id"=>"4", "cart"=>{"discount"=>363}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>365, "id"=>"4", "cart"=>{"discount"=>365}}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 3272)
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 3452)
Completed 200 OK in 21ms (Views: 7.4ms | ActiveRecord: 5.9ms | Allocations: 8426)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mLineItem Load (2.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (5.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.445106"], ["discount", "363.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>368, "id"=>"4", "cart"=>{"discount"=>368}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.2ms | Allocations: 5634)
  [1m[36mCart Update (4.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.449507"], ["discount", "365.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.7ms | Allocations: 5856)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 30ms (Views: 11.1ms | ActiveRecord: 8.9ms | Allocations: 14278)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.458188"], ["discount", "368.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (2.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.8ms | Allocations: 5695)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.5ms | Allocations: 6161)
Completed 200 OK in 33ms (Views: 8.8ms | ActiveRecord: 11.4ms | Allocations: 17075)


  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.7ms | Allocations: 5311)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.6ms | Allocations: 5670)
Completed 200 OK in 38ms (Views: 9.0ms | ActiveRecord: 11.0ms | Allocations: 19504)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.9ms | Allocations: 5382)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.8ms | Allocations: 5742)
Completed 200 OK in 29ms (Views: 12.1ms | ActiveRecord: 8.5ms | Allocations: 14343)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>370, "id"=>"4", "cart"=>{"discount"=>370}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.495157"], ["discount", "370.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>374, "id"=>"4", "cart"=>{"discount"=>374}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.504961"], ["discount", "374.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.2ms | Allocations: 4412)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.5ms | Allocations: 4545)
Completed 200 OK in 17ms (Views: 6.5ms | ActiveRecord: 6.5ms | Allocations: 7975)


  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>383, "id"=>"4", "cart"=>{"discount"=>383}}
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>385, "id"=>"4", "cart"=>{"discount"=>385}}
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 4271)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.5ms | Allocations: 4451)
Completed 200 OK in 22ms (Views: 7.1ms | ActiveRecord: 8.3ms | Allocations: 11260)


  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (4.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.518442"], ["discount", "383.0"], ["id", 4]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (3.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.523185"], ["discount", "385.0"], ["id", 4]]
  Parameters: {"discount"=>390, "id"=>"4", "cart"=>{"discount"=>390}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (1.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (3.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.534716"], ["discount", "390.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.8ms | Allocations: 5624)
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.7ms | Allocations: 6151)
Completed 200 OK in 29ms (Views: 10.3ms | ActiveRecord: 11.2ms | Allocations: 15327)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.9ms | Allocations: 4790)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.8ms | Allocations: 5603)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 30ms (Views: 9.0ms | ActiveRecord: 9.5ms | Allocations: 15606)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.7ms | Allocations: 3296)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.1ms | Allocations: 3445)
Completed 200 OK in 23ms (Views: 6.3ms | ActiveRecord: 8.4ms | Allocations: 11884)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>394, "id"=>"4", "cart"=>{"discount"=>394}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.565865"], ["discount", "394.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>398, "id"=>"4", "cart"=>{"discount"=>398}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (3.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.571416"], ["discount", "398.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.1ms | Allocations: 3947)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.1ms | Allocations: 4335)
Completed 200 OK in 20ms (Views: 8.6ms | ActiveRecord: 5.4ms | Allocations: 8770)


  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 2964)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.7ms | Allocations: 3254)
Processing by CartsController#update_discount as TURBO_STREAM
Completed 200 OK in 20ms (Views: 8.1ms | ActiveRecord: 6.1ms | Allocations: 9295)


  Parameters: {"discount"=>403, "id"=>"4", "cart"=>{"discount"=>403}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>407, "id"=>"4", "cart"=>{"discount"=>407}}
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"discount"=>411, "id"=>"4", "cart"=>{"discount"=>411}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Update (4.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.595582"], ["discount", "403.0"], ["id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (5.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.598131"], ["discount", "407.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (5.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.601376"], ["discount", "411.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 4830)
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.6ms | Allocations: 5573)
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 26ms (Views: 10.1ms | ActiveRecord: 8.4ms | Allocations: 13924)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.6ms | Allocations: 5584)
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.0ms | Allocations: 5766)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 28ms (Views: 8.6ms | ActiveRecord: 12.6ms | Allocations: 15461)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.9ms | Allocations: 5524)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.8ms | Allocations: 6354)
Completed 200 OK in 27ms (Views: 8.2ms | ActiveRecord: 11.7ms | Allocations: 14986)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>420, "id"=>"4", "cart"=>{"discount"=>420}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>416, "id"=>"4", "cart"=>{"discount"=>416}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.637082"], ["discount", "420.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.639965"], ["discount", "416.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.7ms | Allocations: 2639)
Processing by CartsController#update_discount as TURBO_STREAM
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>424, "id"=>"4", "cart"=>{"discount"=>424}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3468)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 19ms (Views: 8.1ms | ActiveRecord: 4.4ms | Allocations: 8906)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (2.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.3ms | Allocations: 4025)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.6ms | Allocations: 4158)
  Parameters: {"discount"=>429, "id"=>"4", "cart"=>{"discount"=>429}}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
Completed 200 OK in 26ms (Views: 8.9ms | ActiveRecord: 6.9ms | Allocations: 12264)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.660071"], ["discount", "424.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (3.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.666144"], ["discount", "429.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>433, "id"=>"4", "cart"=>{"discount"=>433}}
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 14.3ms | Allocations: 6390)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.7ms | Allocations: 6573)
  [1m[36mCart Update (6.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.678459"], ["discount", "433.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.5ms | Allocations: 4902)
Completed 200 OK in 34ms (Views: 14.0ms | ActiveRecord: 11.2ms | Allocations: 15624)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.2ms | Allocations: 5511)
Completed 200 OK in 27ms (Views: 10.9ms | ActiveRecord: 10.0ms | Allocations: 12361)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 3009)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.2ms | Allocations: 3140)
Completed 200 OK in 26ms (Views: 5.0ms | ActiveRecord: 14.4ms | Allocations: 11646)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>438, "id"=>"4", "cart"=>{"discount"=>438}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.709507"], ["discount", "438.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>442, "id"=>"4", "cart"=>{"discount"=>442}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.717128"], ["discount", "442.0"], ["id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.7ms | Allocations: 3849)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.1ms | Allocations: 3986)
Completed 200 OK in 16ms (Views: 6.6ms | ActiveRecord: 4.9ms | Allocations: 7741)


  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 2674)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 2814)
Completed 200 OK in 18ms (Views: 5.4ms | ActiveRecord: 7.5ms | Allocations: 8752)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>446, "id"=>"4", "cart"=>{"discount"=>446}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>451, "id"=>"4", "cart"=>{"discount"=>451}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.738591"], ["discount", "446.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.741388"], ["discount", "451.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>455, "id"=>"4", "cart"=>{"discount"=>455}}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 3419)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 4111)
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 20ms (Views: 7.6ms | ActiveRecord: 5.2ms | Allocations: 9835)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (3.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.753793"], ["discount", "455.0"], ["id", 4]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.9ms | Allocations: 4144)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 4317)
Completed 200 OK in 25ms (Views: 9.8ms | ActiveRecord: 7.6ms | Allocations: 13054)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2691)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 2827)
Completed 200 OK in 23ms (Views: 5.5ms | ActiveRecord: 8.7ms | Allocations: 11598)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>461, "id"=>"4", "cart"=>{"discount"=>461}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.777175"], ["discount", "461.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>466, "id"=>"4", "cart"=>{"discount"=>466}}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.785432"], ["discount", "466.0"], ["id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 3932)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.9ms | Allocations: 4069)
Completed 200 OK in 15ms (Views: 5.9ms | ActiveRecord: 4.7ms | Allocations: 8043)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.1ms | Allocations: 2301)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.5ms | Allocations: 2441)
Completed 200 OK in 17ms (Views: 5.1ms | ActiveRecord: 5.4ms | Allocations: 8730)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>470, "id"=>"4", "cart"=>{"discount"=>470}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Parameters: {"discount"=>474, "id"=>"4", "cart"=>{"discount"=>474}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (39.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.823792"], ["discount", "470.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.864633"], ["discount", "474.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.7ms | Allocations: 3437)
  [1m[36mLineItem Load (1.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.1ms | Allocations: 3618)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 62ms (Views: 6.5ms | ActiveRecord: 43.1ms | Allocations: 8856)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 3541)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 3900)
Processing by CartsController#update_discount as TURBO_STREAM
Completed 200 OK in 56ms (Views: 6.6ms | ActiveRecord: 6.9ms | Allocations: 10149)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  Parameters: {"discount"=>481, "id"=>"4", "cart"=>{"discount"=>481}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.885318"], ["discount", "481.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>314, "id"=>"4", "cart"=>{"discount"=>314}}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.7ms | Allocations: 3058)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.9ms | Allocations: 3530)
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>485, "id"=>"4", "cart"=>{"discount"=>485}}
Completed 200 OK in 17ms (Views: 7.3ms | ActiveRecord: 4.4ms | Allocations: 7766)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.897774"], ["discount", "314.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.904855"], ["discount", "485.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 3429)
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.7ms | Allocations: 3605)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 22ms (Views: 6.7ms | ActiveRecord: 8.4ms | Allocations: 11514)


  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.5ms | Allocations: 3453)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.4ms | Allocations: 3811)
Completed 200 OK in 20ms (Views: 6.1ms | ActiveRecord: 7.0ms | Allocations: 9921)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>490, "id"=>"4", "cart"=>{"discount"=>490}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>496, "id"=>"4", "cart"=>{"discount"=>496}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.929077"], ["discount", "490.0"], ["id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.932767"], ["discount", "496.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.9ms | Allocations: 3633)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 4080)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 20ms (Views: 7.2ms | ActiveRecord: 5.8ms | Allocations: 9806)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.1ms | Allocations: 3735)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.0ms | Allocations: 4175)
Completed 200 OK in 20ms (Views: 6.0ms | ActiveRecord: 5.8ms | Allocations: 10271)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>501, "id"=>"4", "cart"=>{"discount"=>501}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.954566"], ["discount", "501.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>511, "id"=>"4", "cart"=>{"discount"=>511}}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.960644"], ["discount", "511.0"], ["id", 4]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 3337)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.6ms | Allocations: 3667)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>516, "id"=>"4", "cart"=>{"discount"=>516}}
Completed 200 OK in 15ms (Views: 5.0ms | ActiveRecord: 4.3ms | Allocations: 8546)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (3.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.973706"], ["discount", "516.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.0ms | Allocations: 4764)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.6ms | Allocations: 4911)
Completed 200 OK in 22ms (Views: 7.0ms | ActiveRecord: 8.5ms | Allocations: 11263)


  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2677)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 2808)
Completed 200 OK in 20ms (Views: 4.3ms | ActiveRecord: 7.4ms | Allocations: 9229)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>505, "id"=>"4", "cart"=>{"discount"=>505}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:30 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:30.993892"], ["discount", "505.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.6ms | Allocations: 2392)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.9ms | Allocations: 2532)
Completed 200 OK in 12ms (Views: 4.1ms | ActiveRecord: 3.7ms | Allocations: 6035)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>520, "id"=>"4", "cart"=>{"discount"=>520}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>524, "id"=>"4", "cart"=>{"discount"=>524}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.008861"], ["discount", "520.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.011453"], ["discount", "524.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 3668)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 4122)
Completed 200 OK in 20ms (Views: 8.2ms | ActiveRecord: 6.6ms | Allocations: 10081)


  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.1ms | Allocations: 4091)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.5ms | Allocations: 4224)
Completed 200 OK in 23ms (Views: 8.4ms | ActiveRecord: 8.2ms | Allocations: 11082)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  Parameters: {"discount"=>538, "id"=>"4", "cart"=>{"discount"=>538}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>542, "id"=>"4", "cart"=>{"discount"=>542}}
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (2.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (4.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.038014"], ["discount", "538.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (4.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.041286"], ["discount", "542.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 3070)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 3768)
Completed 200 OK in 20ms (Views: 4.8ms | ActiveRecord: 7.6ms | Allocations: 9240)


  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 3553)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.2ms | Allocations: 3917)
Processing by CartsController#update_discount as TURBO_STREAM
Completed 200 OK in 24ms (Views: 7.0ms | ActiveRecord: 10.3ms | Allocations: 11080)


  Parameters: {"discount"=>546, "id"=>"4", "cart"=>{"discount"=>546}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.062729"], ["discount", "546.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2372)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.5ms | Allocations: 2528)
Completed 200 OK in 15ms (Views: 4.6ms | ActiveRecord: 5.4ms | Allocations: 5948)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>551, "id"=>"4", "cart"=>{"discount"=>551}}
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  Parameters: {"discount"=>557, "id"=>"4", "cart"=>{"discount"=>557}}
  [1m[36mCart Load (1.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.080284"], ["discount", "551.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.084808"], ["discount", "557.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 2996)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 3125)
Completed 200 OK in 19ms (Views: 6.6ms | ActiveRecord: 6.3ms | Allocations: 8700)


  [1m[36mLineItem Load (1.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 3885)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 4038)
Completed 200 OK in 22ms (Views: 6.7ms | ActiveRecord: 6.0ms | Allocations: 10430)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  Parameters: {"discount"=>561, "id"=>"4", "cart"=>{"discount"=>561}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.106594"], ["discount", "561.0"], ["id", 4]]
  Parameters: {"discount"=>568, "id"=>"4", "cart"=>{"discount"=>568}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.112931"], ["discount", "568.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 3296)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 3436)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 16ms (Views: 6.8ms | ActiveRecord: 4.9ms | Allocations: 7680)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2690)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2826)
Completed 200 OK in 18ms (Views: 4.6ms | ActiveRecord: 7.5ms | Allocations: 8803)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>572, "id"=>"4", "cart"=>{"discount"=>572}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.135927"], ["discount", "572.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>577, "id"=>"4", "cart"=>{"discount"=>577}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.144535"], ["discount", "577.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.9ms | Allocations: 3873)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 4422)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 16ms (Views: 5.2ms | ActiveRecord: 6.4ms | Allocations: 7902)


Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>583, "id"=>"4", "cart"=>{"discount"=>583}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 3096)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 3229)
Completed 200 OK in 20ms (Views: 6.6ms | ActiveRecord: 6.6ms | Allocations: 9970)


  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.159574"], ["discount", "583.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2320)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2456)
Completed 200 OK in 20ms (Views: 5.2ms | ActiveRecord: 6.3ms | Allocations: 9030)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>588, "id"=>"4", "cart"=>{"discount"=>588}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.177886"], ["discount", "588.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>594, "id"=>"4", "cart"=>{"discount"=>594}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 3423)
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.187317"], ["discount", "594.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.6ms | Allocations: 3611)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 19ms (Views: 8.4ms | ActiveRecord: 5.3ms | Allocations: 8290)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2725)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 2868)
Completed 200 OK in 20ms (Views: 5.6ms | ActiveRecord: 6.5ms | Allocations: 8875)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>598, "id"=>"4", "cart"=>{"discount"=>598}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  Parameters: {"discount"=>605, "id"=>"4", "cart"=>{"discount"=>605}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.209107"], ["discount", "598.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.215193"], ["discount", "605.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.0ms | Allocations: 3490)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.7ms | Allocations: 3961)
Completed 200 OK in 19ms (Views: 6.7ms | ActiveRecord: 6.6ms | Allocations: 9187)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.6ms | Allocations: 3512)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.5ms | Allocations: 3870)
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
Completed 200 OK in 19ms (Views: 8.1ms | ActiveRecord: 6.5ms | Allocations: 9417)


  Parameters: {"discount"=>609, "id"=>"4", "cart"=>{"discount"=>609}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.235652"], ["discount", "609.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.0ms | Allocations: 2616)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.4ms | Allocations: 2760)
  Parameters: {"discount"=>614, "id"=>"4", "cart"=>{"discount"=>614}}
Completed 200 OK in 17ms (Views: 7.2ms | ActiveRecord: 4.8ms | Allocations: 6264)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.252585"], ["discount", "614.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>620, "id"=>"4", "cart"=>{"discount"=>620}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.2ms | Allocations: 3776)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.8ms | Allocations: 3944)
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.263902"], ["discount", "620.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 18ms (Views: 7.7ms | ActiveRecord: 6.0ms | Allocations: 7786)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2715)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2850)
Completed 200 OK in 18ms (Views: 4.5ms | ActiveRecord: 7.2ms | Allocations: 8671)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>624, "id"=>"4", "cart"=>{"discount"=>624}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.281082"], ["discount", "624.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>629, "id"=>"4", "cart"=>{"discount"=>629}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.286644"], ["discount", "629.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.9ms | Allocations: 3651)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.5ms | Allocations: 4258)
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 18ms (Views: 8.0ms | ActiveRecord: 4.5ms | Allocations: 8958)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2709)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 3075)
Completed 200 OK in 18ms (Views: 5.8ms | ActiveRecord: 5.7ms | Allocations: 8968)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>635, "id"=>"4", "cart"=>{"discount"=>635}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>644, "id"=>"4", "cart"=>{"discount"=>644}}
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.306447"], ["discount", "635.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.312838"], ["discount", "644.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 3049)
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.6ms | Allocations: 3187)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 18ms (Views: 5.7ms | ActiveRecord: 7.3ms | Allocations: 9666)


  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 3531)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 3672)
Completed 200 OK in 15ms (Views: 5.2ms | ActiveRecord: 5.1ms | Allocations: 8937)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>640, "id"=>"4", "cart"=>{"discount"=>640}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.330555"], ["discount", "640.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2250)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 2400)
Completed 200 OK in 13ms (Views: 4.7ms | ActiveRecord: 4.0ms | Allocations: 5791)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>651, "id"=>"4", "cart"=>{"discount"=>651}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>655, "id"=>"4", "cart"=>{"discount"=>655}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.350915"], ["discount", "651.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (4.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.354106"], ["discount", "655.0"], ["id", 4]]
  [1m[36mTRANSACTION (3.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Parameters: {"discount"=>661, "id"=>"4", "cart"=>{"discount"=>661}}
  [1m[36mLineItem Load (1.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 3909)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>666, "id"=>"4", "cart"=>{"discount"=>666}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 4241)
Completed 200 OK in 23ms (Views: 9.5ms | ActiveRecord: 8.8ms | Allocations: 10736)


  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.1ms | Allocations: 5498)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.8ms | Allocations: 6266)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 30ms (Views: 14.7ms | ActiveRecord: 9.6ms | Allocations: 14384)


  [1m[36mCart Update (6.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.372766"], ["discount", "661.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Update (4.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.378599"], ["discount", "666.0"], ["id", 4]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Parameters: {"discount"=>670, "id"=>"4", "cart"=>{"discount"=>670}}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.2ms | Allocations: 3854)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 4034)
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 28ms (Views: 6.4ms | ActiveRecord: 13.1ms | Allocations: 13751)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 12.2ms | Allocations: 6286)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.7ms | Allocations: 6458)
Completed 200 OK in 31ms (Views: 10.7ms | ActiveRecord: 10.2ms | Allocations: 14855)


  [1m[36mCart Update (3.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.397852"], ["discount", "670.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2325)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.4ms | Allocations: 2474)
Completed 200 OK in 20ms (Views: 5.1ms | ActiveRecord: 7.7ms | Allocations: 9486)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  Parameters: {"discount"=>674, "id"=>"4", "cart"=>{"discount"=>674}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.418605"], ["discount", "674.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Parameters: {"discount"=>679, "id"=>"4", "cart"=>{"discount"=>679}}
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.0ms | Allocations: 2591)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.1ms | Allocations: 2720)
Completed 200 OK in 11ms (Views: 2.8ms | ActiveRecord: 3.8ms | Allocations: 5897)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.429825"], ["discount", "679.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>685, "id"=>"4", "cart"=>{"discount"=>685}}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.437629"], ["discount", "685.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>690, "id"=>"4", "cart"=>{"discount"=>690}}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.2ms | Allocations: 4155)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.7ms | Allocations: 4331)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 20ms (Views: 8.8ms | ActiveRecord: 6.6ms | Allocations: 10289)


  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (2.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.448942"], ["discount", "690.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.5ms | Allocations: 4310)
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 4458)
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 24ms (Views: 8.6ms | ActiveRecord: 7.9ms | Allocations: 11597)


  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.8ms | Allocations: 2985)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.4ms | Allocations: 3129)
Completed 200 OK in 22ms (Views: 5.4ms | ActiveRecord: 7.1ms | Allocations: 10400)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>696, "id"=>"4", "cart"=>{"discount"=>696}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.470589"], ["discount", "696.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 2317)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 2472)
Completed 200 OK in 14ms (Views: 5.4ms | ActiveRecord: 3.8ms | Allocations: 6065)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>698, "id"=>"4", "cart"=>{"discount"=>698}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.486756"], ["discount", "698.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>705, "id"=>"4", "cart"=>{"discount"=>705}}
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 3302)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.4ms | Allocations: 3967)
Completed 200 OK in 18ms (Views: 7.7ms | ActiveRecord: 4.6ms | Allocations: 7743)


  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.499011"], ["discount", "705.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>709, "id"=>"4", "cart"=>{"discount"=>709}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>714, "id"=>"4", "cart"=>{"discount"=>714}}
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.5ms | Allocations: 5280)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.8ms | Allocations: 5415)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (7.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.513061"], ["discount", "709.0"], ["id", 4]]
Completed 200 OK in 27ms (Views: 9.4ms | ActiveRecord: 9.4ms | Allocations: 12156)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (7.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.515920"], ["discount", "714.0"], ["id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>720, "id"=>"4", "cart"=>{"discount"=>720}}
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.9ms | Allocations: 3868)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.9ms | Allocations: 4409)
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 31ms (Views: 11.1ms | ActiveRecord: 10.8ms | Allocations: 13204)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.2ms | Allocations: 6233)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.7ms | Allocations: 6387)
Completed 200 OK in 36ms (Views: 10.9ms | ActiveRecord: 15.6ms | Allocations: 15966)


  [1m[36mCart Update (4.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.540095"], ["discount", "720.0"], ["id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2331)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2476)
Completed 200 OK in 22ms (Views: 5.1ms | ActiveRecord: 7.9ms | Allocations: 9513)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>724, "id"=>"4", "cart"=>{"discount"=>724}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.563004"], ["discount", "724.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2268)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.3ms | Allocations: 2410)
Completed 200 OK in 13ms (Views: 4.7ms | ActiveRecord: 4.0ms | Allocations: 5616)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>729, "id"=>"4", "cart"=>{"discount"=>729}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.579226"], ["discount", "729.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>531, "id"=>"4", "cart"=>{"discount"=>531}}
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>733, "id"=>"4", "cart"=>{"discount"=>733}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.586424"], ["discount", "531.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.5ms | Allocations: 4516)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 4657)
  [1m[36mCart Load (1.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 18ms (Views: 7.1ms | ActiveRecord: 6.4ms | Allocations: 8807)


  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (3.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.595822"], ["discount", "733.0"], ["id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.1ms | Allocations: 3489)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 3659)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 22ms (Views: 8.2ms | ActiveRecord: 8.4ms | Allocations: 11344)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>738, "id"=>"4", "cart"=>{"discount"=>738}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 3330)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.8ms | Allocations: 3480)
Completed 200 OK in 25ms (Views: 7.4ms | ActiveRecord: 9.6ms | Allocations: 11819)


  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.616717"], ["discount", "738.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 2362)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2515)
Completed 200 OK in 17ms (Views: 4.6ms | ActiveRecord: 4.6ms | Allocations: 7462)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>748, "id"=>"4", "cart"=>{"discount"=>748}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.634255"], ["discount", "748.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 2311)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.7ms | Allocations: 2454)
Completed 200 OK in 15ms (Views: 4.8ms | ActiveRecord: 5.0ms | Allocations: 5915)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>744, "id"=>"4", "cart"=>{"discount"=>744}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>757, "id"=>"4", "cart"=>{"discount"=>757}}
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.651088"], ["discount", "744.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>753, "id"=>"4", "cart"=>{"discount"=>753}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.657561"], ["discount", "757.0"], ["id", 4]]
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (3.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.662644"], ["discount", "753.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 13.5ms | Allocations: 6046)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 15.7ms | Allocations: 7247)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 28ms (Views: 15.3ms | ActiveRecord: 6.4ms | Allocations: 13035)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.0ms | Allocations: 4777)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.1ms | Allocations: 5472)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 9.5ms | ActiveRecord: 8.1ms | Allocations: 12481)


  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.1ms | Allocations: 4550)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.9ms | Allocations: 4915)
Completed 200 OK in 29ms (Views: 8.9ms | ActiveRecord: 9.1ms | Allocations: 13919)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>766, "id"=>"4", "cart"=>{"discount"=>766}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.694789"], ["discount", "766.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>761, "id"=>"4", "cart"=>{"discount"=>761}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.1ms | Allocations: 3769)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3908)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 16ms (Views: 7.5ms | ActiveRecord: 3.9ms | Allocations: 7560)


  [1m[36mCart Update (5.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.703957"], ["discount", "761.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.7ms | Allocations: 2285)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2445)
Completed 200 OK in 22ms (Views: 5.8ms | ActiveRecord: 8.8ms | Allocations: 8886)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
  Parameters: {"discount"=>779, "id"=>"4", "cart"=>{"discount"=>779}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>774, "id"=>"4", "cart"=>{"discount"=>774}}
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mBEGIN[0m
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>783, "id"=>"4", "cart"=>{"discount"=>783}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.729683"], ["discount", "774.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (6.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.728260"], ["discount", "779.0"], ["id", 4]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (4.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.734929"], ["discount", "783.0"], ["id", 4]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.4ms | Allocations: 4862)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 5001)
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 23ms (Views: 9.8ms | ActiveRecord: 7.4ms | Allocations: 12303)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 12.1ms | Allocations: 6409)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.1ms | Allocations: 4897)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.6ms | Allocations: 6548)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.5ms | Allocations: 5607)
Completed 200 OK in 30ms (Views: 11.4ms | ActiveRecord: 13.2ms | Allocations: 15907)


Completed 200 OK in 23ms (Views: 9.7ms | ActiveRecord: 8.4ms | Allocations: 12198)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>788, "id"=>"4", "cart"=>{"discount"=>788}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>383, "id"=>"4", "cart"=>{"discount"=>383}}
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.761780"], ["discount", "788.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.765713"], ["discount", "383.0"], ["id", 4]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 2666)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.9ms | Allocations: 3024)
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 13ms (Views: 4.4ms | ActiveRecord: 4.2ms | Allocations: 7752)


  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.3ms | Allocations: 2441)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.5ms | Allocations: 2570)
Completed 200 OK in 12ms (Views: 3.1ms | ActiveRecord: 5.4ms | Allocations: 8470)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:21:31 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>770, "id"=>"4", "cart"=>{"discount"=>770}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:21:31.958622"], ["discount", "770.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2143)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2272)
Completed 200 OK in 20ms (Views: 4.9ms | ActiveRecord: 11.3ms | Allocations: 4879)


Started GET "/cart" for ::1 at 2024-08-22 17:21:36 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 2.8ms | Allocations: 2837)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 4.4ms | Allocations: 4164)
  Rendered layout layouts/application.html.slim (Duration: 6.5ms | Allocations: 6634)
Completed 200 OK in 8ms (Views: 6.6ms | ActiveRecord: 0.3ms | Allocations: 7577)


Started GET "/cart" for ::1 at 2024-08-22 17:26:24 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.7ms | Allocations: 2826)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.8ms | Allocations: 4153)
  Rendered layout layouts/application.html.slim (Duration: 21.4ms | Allocations: 27311)
Completed 200 OK in 24ms (Views: 21.6ms | ActiveRecord: 0.4ms | Allocations: 28259)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>769, "id"=>"4", "cart"=>{"discount"=>769}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>769, "id"=>"4", "cart"=>{"discount"=>769}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (5.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:26.867416"], ["discount", "769.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (6.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:26.868541"], ["discount", "769.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 2969)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.3ms | Allocations: 3417)
Completed 200 OK in 23ms (Views: 7.6ms | ActiveRecord: 9.5ms | Allocations: 10211)


  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.8ms | Allocations: 3538)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.8ms | Allocations: 3918)
Completed 200 OK in 30ms (Views: 9.0ms | ActiveRecord: 11.5ms | Allocations: 12830)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>768, "id"=>"4", "cart"=>{"discount"=>768}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>768, "id"=>"4", "cart"=>{"discount"=>768}}
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:26.899655"], ["discount", "768.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:26.901556"], ["discount", "768.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 3604)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.9ms | Allocations: 3741)
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 18ms (Views: 7.1ms | ActiveRecord: 5.9ms | Allocations: 9479)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.2ms | Allocations: 3814)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 3959)
Completed 200 OK in 21ms (Views: 6.2ms | ActiveRecord: 8.7ms | Allocations: 10918)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>767, "id"=>"4", "cart"=>{"discount"=>767}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:26.923729"], ["discount", "767.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>766, "id"=>"4", "cart"=>{"discount"=>766}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>766, "id"=>"4", "cart"=>{"discount"=>766}}
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:26.932248"], ["discount", "766.0"], ["id", 4]]
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.7ms | Allocations: 4826)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.0ms | Allocations: 5349)
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 20ms (Views: 8.3ms | ActiveRecord: 7.1ms | Allocations: 8952)


  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 4024)
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.3ms | Allocations: 4940)
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 4206)
Completed 200 OK in 28ms (Views: 10.5ms | ActiveRecord: 10.2ms | Allocations: 13080)


  Parameters: {"discount"=>765, "id"=>"4", "cart"=>{"discount"=>765}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.7ms | Allocations: 5075)
Completed 200 OK in 21ms (Views: 10.3ms | ActiveRecord: 3.9ms | Allocations: 9352)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:26.960115"], ["discount", "765.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.2ms | Allocations: 2279)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 2420)
Completed 200 OK in 16ms (Views: 5.3ms | ActiveRecord: 5.1ms | Allocations: 6759)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:26 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>765, "id"=>"4", "cart"=>{"discount"=>765}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>764, "id"=>"4", "cart"=>{"discount"=>764}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:26.991196"], ["discount", "764.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 3912)
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.7ms | Allocations: 4252)
Completed 200 OK in 15ms (Views: 10.2ms | ActiveRecord: 0.8ms | Allocations: 6250)


  Parameters: {"discount"=>764, "id"=>"4", "cart"=>{"discount"=>764}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>763, "id"=>"4", "cart"=>{"discount"=>763}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (8.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (1.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (1.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>763, "id"=>"4", "cart"=>{"discount"=>763}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>761, "id"=>"4", "cart"=>{"discount"=>761}}
  [1m[36mProduct Load (10.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (8.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (11.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.014062"], ["discount", "763.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 25.8ms | Allocations: 10617)
  [1m[36mProduct Load (2.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 27.5ms | Allocations: 11487)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 20.5ms | Allocations: 9873)
Completed 200 OK in 45ms (Views: 11.8ms | ActiveRecord: 23.2ms | Allocations: 18778)


  Rendered carts/update_discount.turbo_stream.erb (Duration: 21.0ms | Allocations: 10044)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 31ms (Views: 6.9ms | ActiveRecord: 14.7ms | Allocations: 13011)


  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (4.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.028153"], ["discount", "763.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.4ms | Allocations: 3751)
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 4061)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 38ms (Views: 8.1ms | ActiveRecord: 26.8ms | Allocations: 18015)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>760, "id"=>"4", "cart"=>{"discount"=>760}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mProduct Load (7.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 19.6ms | Allocations: 7531)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 20.9ms | Allocations: 8200)
Completed 200 OK in 46ms (Views: 14.0ms | ActiveRecord: 16.9ms | Allocations: 20650)


  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Update (5.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.057485"], ["discount", "760.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Update (4.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.062553"], ["discount", "761.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.9ms | Allocations: 3702)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.1ms | Allocations: 3835)
Completed 200 OK in 28ms (Views: 6.0ms | ActiveRecord: 9.9ms | Allocations: 12229)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.5ms | Allocations: 4849)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 5210)
Completed 200 OK in 60ms (Views: 7.8ms | ActiveRecord: 24.8ms | Allocations: 28508)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>759, "id"=>"4", "cart"=>{"discount"=>759}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.090228"], ["discount", "759.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>761, "id"=>"4", "cart"=>{"discount"=>761}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>760, "id"=>"4", "cart"=>{"discount"=>760}}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.096946"], ["discount", "761.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 5534)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.2ms | Allocations: 5667)
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.100746"], ["discount", "760.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 16ms (Views: 6.8ms | ActiveRecord: 5.0ms | Allocations: 9884)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.6ms | Allocations: 4498)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 4935)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.1ms | Allocations: 4422)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 4604)
Completed 200 OK in 19ms (Views: 5.7ms | ActiveRecord: 7.4ms | Allocations: 12437)


Completed 200 OK in 22ms (Views: 7.4ms | ActiveRecord: 8.4ms | Allocations: 13755)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>759, "id"=>"4", "cart"=>{"discount"=>759}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (1.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.121675"], ["discount", "759.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>758, "id"=>"4", "cart"=>{"discount"=>758}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.127813"], ["discount", "758.0"], ["id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 3586)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 3787)
Completed 200 OK in 15ms (Views: 5.7ms | ActiveRecord: 5.7ms | Allocations: 8510)


  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.1ms | Allocations: 2671)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.4ms | Allocations: 2812)
Completed 200 OK in 17ms (Views: 6.1ms | ActiveRecord: 5.9ms | Allocations: 8889)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>758, "id"=>"4", "cart"=>{"discount"=>758}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>756, "id"=>"4", "cart"=>{"discount"=>756}}
  Parameters: {"discount"=>757, "id"=>"4", "cart"=>{"discount"=>757}}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 3808)
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.6ms | Allocations: 3947)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 13ms (Views: 9.9ms | ActiveRecord: 1.0ms | Allocations: 6986)


  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.158817"], ["discount", "757.0"], ["id", 4]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (3.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.161916"], ["discount", "756.0"], ["id", 4]]
  Parameters: {"discount"=>757, "id"=>"4", "cart"=>{"discount"=>757}}
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.174357"], ["discount", "757.0"], ["id", 4]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.7ms | Allocations: 5738)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.8ms | Allocations: 5610)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.4ms | Allocations: 6620)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.2ms | Allocations: 5749)
Completed 200 OK in 28ms (Views: 12.7ms | ActiveRecord: 8.7ms | Allocations: 15203)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>756, "id"=>"4", "cart"=>{"discount"=>756}}
Completed 200 OK in 29ms (Views: 9.8ms | ActiveRecord: 10.0ms | Allocations: 15335)


  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.192643"], ["discount", "756.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 4640)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 4775)
Completed 200 OK in 31ms (Views: 6.1ms | ActiveRecord: 10.0ms | Allocations: 14762)


  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.2ms | Allocations: 2722)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 2885)
Completed 200 OK in 19ms (Views: 5.0ms | ActiveRecord: 6.6ms | Allocations: 9856)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>755, "id"=>"4", "cart"=>{"discount"=>755}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.218991"], ["discount", "755.0"], ["id", 4]]
  Parameters: {"discount"=>755, "id"=>"4", "cart"=>{"discount"=>755}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>754, "id"=>"4", "cart"=>{"discount"=>754}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  Parameters: {"discount"=>754, "id"=>"4", "cart"=>{"discount"=>754}}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.6ms | Allocations: 5507)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 12.0ms | Allocations: 6095)
  [1m[36mCart Update (6.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.231908"], ["discount", "754.0"], ["id", 4]]
  [1m[36mCart Load (2.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 14.2ms | Allocations: 7282)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.4ms | Allocations: 6273)
Completed 200 OK in 26ms (Views: 13.1ms | ActiveRecord: 7.0ms | Allocations: 12348)


Completed 200 OK in 20ms (Views: 13.5ms | ActiveRecord: 2.2ms | Allocations: 10110)


  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Update (3.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.242827"], ["discount", "754.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>753, "id"=>"4", "cart"=>{"discount"=>753}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.8ms | Allocations: 4697)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.1ms | Allocations: 5331)
Completed 200 OK in 36ms (Views: 9.1ms | ActiveRecord: 12.2ms | Allocations: 18029)


  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 4428)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.1ms | Allocations: 5363)
Completed 200 OK in 27ms (Views: 7.8ms | ActiveRecord: 11.5ms | Allocations: 13998)


  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Update (2.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.263050"], ["discount", "753.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2351)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2504)
Completed 200 OK in 19ms (Views: 4.8ms | ActiveRecord: 6.5ms | Allocations: 8830)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>753, "id"=>"4", "cart"=>{"discount"=>753}}
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"discount"=>752, "id"=>"4", "cart"=>{"discount"=>752}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.7ms | Allocations: 3896)
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.296015"], ["discount", "752.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.1ms | Allocations: 4085)
Completed 200 OK in 14ms (Views: 9.6ms | ActiveRecord: 2.2ms | Allocations: 6388)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>749, "id"=>"4", "cart"=>{"discount"=>749}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>752, "id"=>"4", "cart"=>{"discount"=>752}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (4.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.308495"], ["discount", "749.0"], ["id", 4]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.5ms | Allocations: 5975)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.3ms | Allocations: 4891)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.3ms | Allocations: 5389)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.3ms | Allocations: 6831)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 31ms (Views: 11.8ms | ActiveRecord: 7.3ms | Allocations: 14959)


Completed 200 OK in 17ms (Views: 8.2ms | ActiveRecord: 2.6ms | Allocations: 9048)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.7ms | Allocations: 3034)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.0ms | Allocations: 3176)
Completed 200 OK in 26ms (Views: 5.6ms | ActiveRecord: 9.4ms | Allocations: 13273)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>749, "id"=>"4", "cart"=>{"discount"=>749}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 2306)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2470)
Completed 200 OK in 10ms (Views: 4.9ms | ActiveRecord: 1.0ms | Allocations: 4003)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>748, "id"=>"4", "cart"=>{"discount"=>748}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.348448"], ["discount", "748.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>748, "id"=>"4", "cart"=>{"discount"=>748}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>746, "id"=>"4", "cart"=>{"discount"=>746}}
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.3ms | Allocations: 4940)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.9ms | Allocations: 5847)
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 8.5ms | ActiveRecord: 7.0ms | Allocations: 9739)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (5.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.361495"], ["discount", "746.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.6ms | Allocations: 5619)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.8ms | Allocations: 6190)
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 20ms (Views: 11.6ms | ActiveRecord: 3.4ms | Allocations: 10075)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>746, "id"=>"4", "cart"=>{"discount"=>746}}
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.4ms | Allocations: 3987)
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.8ms | Allocations: 4144)
Completed 200 OK in 28ms (Views: 8.9ms | ActiveRecord: 10.8ms | Allocations: 13234)


  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.7ms | Allocations: 3015)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3161)
Completed 200 OK in 15ms (Views: 7.6ms | ActiveRecord: 1.6ms | Allocations: 6797)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Parameters: {"discount"=>744, "id"=>"4", "cart"=>{"discount"=>744}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.397561"], ["discount", "744.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2294)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.3ms | Allocations: 2438)
Completed 200 OK in 14ms (Views: 5.1ms | ActiveRecord: 4.9ms | Allocations: 5795)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>744, "id"=>"4", "cart"=>{"discount"=>744}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>743, "id"=>"4", "cart"=>{"discount"=>743}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>743, "id"=>"4", "cart"=>{"discount"=>743}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.9ms | Allocations: 4506)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.2ms | Allocations: 4645)
  [1m[36mCart Update (2.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.423394"], ["discount", "743.0"], ["id", 4]]
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 13ms (Views: 6.2ms | ActiveRecord: 2.9ms | Allocations: 6281)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.430571"], ["discount", "743.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Parameters: {"discount"=>741, "id"=>"4", "cart"=>{"discount"=>741}}
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.2ms | Allocations: 3681)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 3857)
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 25ms (Views: 7.2ms | ActiveRecord: 8.5ms | Allocations: 12380)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.5ms | Allocations: 5136)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.4ms | Allocations: 5295)
  [1m[36mCart Update (5.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.447829"], ["discount", "741.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 31ms (Views: 11.4ms | ActiveRecord: 8.2ms | Allocations: 14233)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 2630)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.9ms | Allocations: 2767)
Completed 200 OK in 22ms (Views: 4.9ms | ActiveRecord: 8.9ms | Allocations: 9662)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>741, "id"=>"4", "cart"=>{"discount"=>741}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2304)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2443)
Completed 200 OK in 9ms (Views: 4.8ms | ActiveRecord: 0.7ms | Allocations: 3746)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>740, "id"=>"4", "cart"=>{"discount"=>740}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.483422"], ["discount", "740.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>740, "id"=>"4", "cart"=>{"discount"=>740}}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 4287)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 4475)
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 15ms (Views: 4.2ms | ActiveRecord: 5.7ms | Allocations: 8779)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 4398)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 4852)
Completed 200 OK in 8ms (Views: 4.8ms | ActiveRecord: 1.8ms | Allocations: 6817)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>738, "id"=>"4", "cart"=>{"discount"=>738}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.501600"], ["discount", "738.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>738, "id"=>"4", "cart"=>{"discount"=>738}}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 2935)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.7ms | Allocations: 3092)
Completed 200 OK in 17ms (Views: 5.9ms | ActiveRecord: 7.3ms | Allocations: 6961)


  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2831)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2973)
Completed 200 OK in 12ms (Views: 4.3ms | ActiveRecord: 2.5ms | Allocations: 6048)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>736, "id"=>"4", "cart"=>{"discount"=>736}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.526950"], ["discount", "736.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2365)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 2505)
Completed 200 OK in 11ms (Views: 4.7ms | ActiveRecord: 3.4ms | Allocations: 5898)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>734, "id"=>"4", "cart"=>{"discount"=>734}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.540699"], ["discount", "734.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>767, "id"=>"4", "cart"=>{"discount"=>767}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (4.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (3.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.547176"], ["discount", "767.0"], ["id", 4]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 2772)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.3ms | Allocations: 3150)
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 19ms (Views: 6.5ms | ActiveRecord: 7.4ms | Allocations: 8753)


  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.8ms | Allocations: 2563)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.2ms | Allocations: 2703)
Completed 200 OK in 19ms (Views: 5.8ms | ActiveRecord: 6.9ms | Allocations: 8583)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Parameters: {"discount"=>736, "id"=>"4", "cart"=>{"discount"=>736}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.571491"], ["discount", "736.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>734, "id"=>"4", "cart"=>{"discount"=>734}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.578643"], ["discount", "734.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.7ms | Allocations: 3488)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.1ms | Allocations: 4053)
Completed 200 OK in 15ms (Views: 5.5ms | ActiveRecord: 4.6ms | Allocations: 7874)


  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.2ms | Allocations: 2645)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 2779)
Completed 200 OK in 16ms (Views: 4.8ms | ActiveRecord: 6.2ms | Allocations: 8922)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Parameters: {"discount"=>733, "id"=>"4", "cart"=>{"discount"=>733}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.603227"], ["discount", "733.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>733, "id"=>"4", "cart"=>{"discount"=>733}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.609071"], ["discount", "733.0"], ["id", 4]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Parameters: {"discount"=>732, "id"=>"4", "cart"=>{"discount"=>732}}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 3484)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 4326)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 24ms (Views: 7.6ms | ActiveRecord: 5.7ms | Allocations: 9622)


  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (1.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.620305"], ["discount", "732.0"], ["id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.4ms | Allocations: 4406)
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.9ms | Allocations: 4582)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 22ms (Views: 9.7ms | ActiveRecord: 7.0ms | Allocations: 11352)


  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.5ms | Allocations: 3013)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 3155)
Completed 200 OK in 23ms (Views: 4.9ms | ActiveRecord: 9.3ms | Allocations: 10923)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>728, "id"=>"4", "cart"=>{"discount"=>728}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>728, "id"=>"4", "cart"=>{"discount"=>728}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.646184"], ["discount", "728.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (3.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.648333"], ["discount", "728.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 3572)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.6ms | Allocations: 3715)
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 19ms (Views: 6.0ms | ActiveRecord: 5.4ms | Allocations: 9487)


  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.8ms | Allocations: 3518)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.0ms | Allocations: 3647)
Completed 200 OK in 20ms (Views: 5.1ms | ActiveRecord: 8.4ms | Allocations: 10278)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>727, "id"=>"4", "cart"=>{"discount"=>727}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.673210"], ["discount", "727.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>727, "id"=>"4", "cart"=>{"discount"=>727}}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 3985)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 4383)
Processing by CartsController#update_discount as TURBO_STREAM
Completed 200 OK in 17ms (Views: 7.2ms | ActiveRecord: 5.3ms | Allocations: 8069)


  Parameters: {"discount"=>724, "id"=>"4", "cart"=>{"discount"=>724}}
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 3788)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.7ms | Allocations: 4507)
Completed 200 OK in 15ms (Views: 8.3ms | ActiveRecord: 2.5ms | Allocations: 7835)


  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.694159"], ["discount", "724.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2343)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.5ms | Allocations: 2486)
Completed 200 OK in 18ms (Views: 4.6ms | ActiveRecord: 5.4ms | Allocations: 7962)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>724, "id"=>"4", "cart"=>{"discount"=>724}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>721, "id"=>"4", "cart"=>{"discount"=>721}}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.6ms | Allocations: 3916)
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.717219"], ["discount", "721.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 4103)
Completed 200 OK in 12ms (Views: 6.8ms | ActiveRecord: 3.1ms | Allocations: 6416)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2329)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2481)
Completed 200 OK in 17ms (Views: 4.0ms | ActiveRecord: 5.7ms | Allocations: 8239)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Parameters: {"discount"=>719, "id"=>"4", "cart"=>{"discount"=>719}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>721, "id"=>"4", "cart"=>{"discount"=>721}}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.737702"], ["discount", "719.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.0ms | Allocations: 4164)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.4ms | Allocations: 4299)
Completed 200 OK in 15ms (Views: 8.8ms | ActiveRecord: 2.3ms | Allocations: 7127)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 3461)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 3609)
Completed 200 OK in 20ms (Views: 5.7ms | ActiveRecord: 9.4ms | Allocations: 9251)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Parameters: {"discount"=>719, "id"=>"4", "cart"=>{"discount"=>719}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2330)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.4ms | Allocations: 2471)
Completed 200 OK in 8ms (Views: 4.2ms | ActiveRecord: 0.9ms | Allocations: 3790)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>717, "id"=>"4", "cart"=>{"discount"=>717}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.772033"], ["discount", "717.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>717, "id"=>"4", "cart"=>{"discount"=>717}}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.8ms | Allocations: 2966)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.2ms | Allocations: 3115)
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 14ms (Views: 6.2ms | ActiveRecord: 4.1ms | Allocations: 6519)


  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>716, "id"=>"4", "cart"=>{"discount"=>716}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 2994)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.4ms | Allocations: 3509)
Completed 200 OK in 12ms (Views: 7.4ms | ActiveRecord: 1.5ms | Allocations: 6603)


  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.794347"], ["discount", "716.0"], ["id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>716, "id"=>"4", "cart"=>{"discount"=>716}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (1.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.6ms | Allocations: 3692)
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.1ms | Allocations: 3878)
Completed 200 OK in 23ms (Views: 8.5ms | ActiveRecord: 6.0ms | Allocations: 9838)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.3ms | Allocations: 4740)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.6ms | Allocations: 4869)
Completed 200 OK in 15ms (Views: 8.6ms | ActiveRecord: 3.7ms | Allocations: 6826)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>715, "id"=>"4", "cart"=>{"discount"=>715}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.822057"], ["discount", "715.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2365)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.4ms | Allocations: 2505)
Completed 200 OK in 12ms (Views: 4.4ms | ActiveRecord: 3.8ms | Allocations: 5659)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>715, "id"=>"4", "cart"=>{"discount"=>715}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>713, "id"=>"4", "cart"=>{"discount"=>713}}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.1ms | Allocations: 3860)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 4023)
  [1m[36mCart Update (2.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.842303"], ["discount", "713.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 11ms (Views: 6.8ms | ActiveRecord: 1.9ms | Allocations: 5946)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Parameters: {"discount"=>713, "id"=>"4", "cart"=>{"discount"=>713}}
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (2.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>710, "id"=>"4", "cart"=>{"discount"=>710}}
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 12.4ms | Allocations: 4511)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 13.5ms | Allocations: 4917)
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 24ms (Views: 9.7ms | ActiveRecord: 9.5ms | Allocations: 10439)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.3ms | Allocations: 4636)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.7ms | Allocations: 4774)
Completed 200 OK in 19ms (Views: 10.1ms | ActiveRecord: 2.3ms | Allocations: 8254)


  [1m[36mCart Update (2.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.867509"], ["discount", "710.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 2329)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.6ms | Allocations: 2468)
Completed 200 OK in 18ms (Views: 3.6ms | ActiveRecord: 5.5ms | Allocations: 9324)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>710, "id"=>"4", "cart"=>{"discount"=>710}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>707, "id"=>"4", "cart"=>{"discount"=>707}}
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 2997)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 3455)
Completed 200 OK in 12ms (Views: 6.9ms | ActiveRecord: 1.3ms | Allocations: 5382)


  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.892718"], ["discount", "707.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 2273)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2408)
Completed 200 OK in 19ms (Views: 5.2ms | ActiveRecord: 5.6ms | Allocations: 8211)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>707, "id"=>"4", "cart"=>{"discount"=>707}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.1ms | Allocations: 2298)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.5ms | Allocations: 2434)
Completed 200 OK in 9ms (Views: 5.7ms | ActiveRecord: 0.8ms | Allocations: 3896)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>705, "id"=>"4", "cart"=>{"discount"=>705}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.924783"], ["discount", "705.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>705, "id"=>"4", "cart"=>{"discount"=>705}}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.9ms | Allocations: 3860)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 4309)
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 18ms (Views: 6.4ms | ActiveRecord: 6.1ms | Allocations: 8968)


  Parameters: {"discount"=>703, "id"=>"4", "cart"=>{"discount"=>703}}
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 4301)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 4443)
Completed 200 OK in 13ms (Views: 7.8ms | ActiveRecord: 1.3ms | Allocations: 7073)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.945538"], ["discount", "703.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 2322)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2477)
Completed 200 OK in 16ms (Views: 4.7ms | ActiveRecord: 5.4ms | Allocations: 7177)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>703, "id"=>"4", "cart"=>{"discount"=>703}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.7ms | Allocations: 2288)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.0ms | Allocations: 2439)
Completed 200 OK in 6ms (Views: 3.1ms | ActiveRecord: 0.8ms | Allocations: 4128)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>702, "id"=>"4", "cart"=>{"discount"=>702}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.968993"], ["discount", "702.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 2405)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2552)
Completed 200 OK in 12ms (Views: 4.5ms | ActiveRecord: 3.7ms | Allocations: 6051)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>699, "id"=>"4", "cart"=>{"discount"=>699}}
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Parameters: {"discount"=>702, "id"=>"4", "cart"=>{"discount"=>702}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:27.985407"], ["discount", "699.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 3762)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.7ms | Allocations: 3907)
Completed 200 OK in 13ms (Views: 6.9ms | ActiveRecord: 2.6ms | Allocations: 6673)


  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:27 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 3717)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 4033)
Completed 200 OK in 21ms (Views: 6.9ms | ActiveRecord: 6.3ms | Allocations: 10019)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>699, "id"=>"4", "cart"=>{"discount"=>699}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2305)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.3ms | Allocations: 2452)
Completed 200 OK in 8ms (Views: 4.4ms | ActiveRecord: 0.7ms | Allocations: 4211)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>698, "id"=>"4", "cart"=>{"discount"=>698}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.020889"], ["discount", "698.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.7ms | Allocations: 2310)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.0ms | Allocations: 2452)
Completed 200 OK in 12ms (Views: 3.0ms | ActiveRecord: 3.1ms | Allocations: 6127)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>698, "id"=>"4", "cart"=>{"discount"=>698}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.6ms | Allocations: 2299)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.8ms | Allocations: 2447)
Completed 200 OK in 9ms (Views: 4.0ms | ActiveRecord: 0.6ms | Allocations: 4132)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>696, "id"=>"4", "cart"=>{"discount"=>696}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.043113"], ["discount", "696.0"], ["id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>696, "id"=>"4", "cart"=>{"discount"=>696}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (3.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.047665"], ["discount", "696.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2851)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>694, "id"=>"4", "cart"=>{"discount"=>694}}
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3987)
Completed 200 OK in 18ms (Views: 7.9ms | ActiveRecord: 4.8ms | Allocations: 9607)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (1.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.6ms | Allocations: 3757)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.8ms | Allocations: 4195)
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 20ms (Views: 7.7ms | ActiveRecord: 8.1ms | Allocations: 10158)


  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.064701"], ["discount", "694.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.7ms | Allocations: 2248)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2390)
Completed 200 OK in 20ms (Views: 5.1ms | ActiveRecord: 6.6ms | Allocations: 8906)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  Parameters: {"discount"=>694, "id"=>"4", "cart"=>{"discount"=>694}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2343)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2511)
Completed 200 OK in 8ms (Views: 4.8ms | ActiveRecord: 0.9ms | Allocations: 3824)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>689, "id"=>"4", "cart"=>{"discount"=>689}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.091834"], ["discount", "689.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Parameters: {"discount"=>689, "id"=>"4", "cart"=>{"discount"=>689}}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2939)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 3074)
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 12ms (Views: 4.6ms | ActiveRecord: 4.0ms | Allocations: 6880)


  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>688, "id"=>"4", "cart"=>{"discount"=>688}}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 2926)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 3061)
Completed 200 OK in 11ms (Views: 5.0ms | ActiveRecord: 2.1ms | Allocations: 6166)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.111868"], ["discount", "688.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>688, "id"=>"4", "cart"=>{"discount"=>688}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.9ms | Allocations: 4229)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 4882)
Completed 200 OK in 21ms (Views: 7.2ms | ActiveRecord: 7.6ms | Allocations: 9835)


  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.4ms | Allocations: 3761)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.7ms | Allocations: 3901)
Completed 200 OK in 13ms (Views: 5.3ms | ActiveRecord: 3.5ms | Allocations: 6564)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>685, "id"=>"4", "cart"=>{"discount"=>685}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.139325"], ["discount", "685.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2328)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.2ms | Allocations: 2477)
Completed 200 OK in 13ms (Views: 4.0ms | ActiveRecord: 4.0ms | Allocations: 5997)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>685, "id"=>"4", "cart"=>{"discount"=>685}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>684, "id"=>"4", "cart"=>{"discount"=>684}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.7ms | Allocations: 2953)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 3487)
Completed 200 OK in 11ms (Views: 7.0ms | ActiveRecord: 1.5ms | Allocations: 4772)


  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Update (4.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.163804"], ["discount", "684.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendering carts/update_discount.turbo_stream.erb
  Parameters: {"discount"=>684, "id"=>"4", "cart"=>{"discount"=>684}}
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.1ms | Allocations: 3674)
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3854)
Completed 200 OK in 22ms (Views: 6.2ms | ActiveRecord: 8.7ms | Allocations: 9068)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.9ms | Allocations: 3232)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.2ms | Allocations: 3373)
Completed 200 OK in 12ms (Views: 5.7ms | ActiveRecord: 2.0ms | Allocations: 6198)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>732, "id"=>"4", "cart"=>{"discount"=>732}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.192126"], ["discount", "732.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2287)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 2432)
Completed 200 OK in 15ms (Views: 4.8ms | ActiveRecord: 3.9ms | Allocations: 6227)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>682, "id"=>"4", "cart"=>{"discount"=>682}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.208361"], ["discount", "682.0"], ["id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>682, "id"=>"4", "cart"=>{"discount"=>682}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (3.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.214027"], ["discount", "682.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 3037)
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 3196)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 21ms (Views: 8.1ms | ActiveRecord: 7.8ms | Allocations: 9227)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.4ms | Allocations: 3557)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 3704)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Completed 200 OK in 20ms (Views: 6.7ms | ActiveRecord: 6.1ms | Allocations: 8632)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  Parameters: {"discount"=>681, "id"=>"4", "cart"=>{"discount"=>681}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>679, "id"=>"4", "cart"=>{"discount"=>679}}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (1.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.239743"], ["discount", "681.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (2.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.242072"], ["discount", "679.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.9ms | Allocations: 3659)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 4101)
Completed 200 OK in 18ms (Views: 6.7ms | ActiveRecord: 5.5ms | Allocations: 9633)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 4045)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.1ms | Allocations: 4183)
Completed 200 OK in 20ms (Views: 5.0ms | ActiveRecord: 8.9ms | Allocations: 10630)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>679, "id"=>"4", "cart"=>{"discount"=>679}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2661)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 2804)
Completed 200 OK in 9ms (Views: 4.9ms | ActiveRecord: 1.6ms | Allocations: 4092)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>678, "id"=>"4", "cart"=>{"discount"=>678}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.276675"], ["discount", "678.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>678, "id"=>"4", "cart"=>{"discount"=>678}}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (1.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.4ms | Allocations: 4292)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 4427)
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 16ms (Views: 6.5ms | ActiveRecord: 5.7ms | Allocations: 8193)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 4648)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 4791)
Completed 200 OK in 12ms (Views: 5.9ms | ActiveRecord: 3.2ms | Allocations: 6803)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>672, "id"=>"4", "cart"=>{"discount"=>672}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (35.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.316667"], ["discount", "672.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>681, "id"=>"4", "cart"=>{"discount"=>681}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.355455"], ["discount", "681.0"], ["id", 4]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>670, "id"=>"4", "cart"=>{"discount"=>670}}
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 3562)
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.6ms | Allocations: 3761)
Completed 200 OK in 58ms (Views: 4.1ms | ActiveRecord: 40.2ms | Allocations: 8606)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.365444"], ["discount", "670.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 4187)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.7ms | Allocations: 4735)
Completed 200 OK in 17ms (Views: 7.0ms | ActiveRecord: 6.5ms | Allocations: 11196)


  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 2479)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.7ms | Allocations: 2628)
Completed 200 OK in 20ms (Views: 4.9ms | ActiveRecord: 6.9ms | Allocations: 9568)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>669, "id"=>"4", "cart"=>{"discount"=>669}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>670, "id"=>"4", "cart"=>{"discount"=>670}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.386133"], ["discount", "669.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.9ms | Allocations: 4145)
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.3ms | Allocations: 4327)
Completed 200 OK in 13ms (Views: 6.6ms | ActiveRecord: 2.3ms | Allocations: 7525)


  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.4ms | Allocations: 4659)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 4795)
Completed 200 OK in 17ms (Views: 6.6ms | ActiveRecord: 6.5ms | Allocations: 9272)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>669, "id"=>"4", "cart"=>{"discount"=>669}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2340)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.2ms | Allocations: 2483)
Completed 200 OK in 8ms (Views: 4.6ms | ActiveRecord: 0.7ms | Allocations: 3818)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>668, "id"=>"4", "cart"=>{"discount"=>668}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.420970"], ["discount", "668.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>668, "id"=>"4", "cart"=>{"discount"=>668}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.3ms | Allocations: 4397)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.7ms | Allocations: 4199)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.3ms | Allocations: 4427)
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.0ms | Allocations: 5324)
Completed 200 OK in 20ms (Views: 11.0ms | ActiveRecord: 5.1ms | Allocations: 9815)


  Parameters: {"discount"=>666, "id"=>"4", "cart"=>{"discount"=>666}}
Completed 200 OK in 14ms (Views: 8.5ms | ActiveRecord: 2.7ms | Allocations: 6692)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.442078"], ["discount", "666.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>666, "id"=>"4", "cart"=>{"discount"=>666}}
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 4302)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 4481)
Completed 200 OK in 19ms (Views: 7.5ms | ActiveRecord: 6.2ms | Allocations: 9214)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.4ms | Allocations: 4097)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.8ms | Allocations: 4228)
Completed 200 OK in 13ms (Views: 7.4ms | ActiveRecord: 2.5ms | Allocations: 6768)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>664, "id"=>"4", "cart"=>{"discount"=>664}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.470418"], ["discount", "664.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2247)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.5ms | Allocations: 2391)
Completed 200 OK in 13ms (Views: 4.5ms | ActiveRecord: 4.3ms | Allocations: 5698)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>663, "id"=>"4", "cart"=>{"discount"=>663}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>664, "id"=>"4", "cart"=>{"discount"=>664}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.487829"], ["discount", "663.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>663, "id"=>"4", "cart"=>{"discount"=>663}}
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.7ms | Allocations: 3823)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.8ms | Allocations: 4351)
Completed 200 OK in 14ms (Views: 8.7ms | ActiveRecord: 1.4ms | Allocations: 7555)


  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.2ms | Allocations: 4362)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.5ms | Allocations: 4498)
Completed 200 OK in 20ms (Views: 6.8ms | ActiveRecord: 7.1ms | Allocations: 10354)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Parameters: {"discount"=>660, "id"=>"4", "cart"=>{"discount"=>660}}
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.9ms | Allocations: 3592)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.3ms | Allocations: 3755)
Completed 200 OK in 14ms (Views: 5.9ms | ActiveRecord: 1.7ms | Allocations: 7824)


  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.511835"], ["discount", "660.0"], ["id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2317)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.5ms | Allocations: 2462)
Completed 200 OK in 21ms (Views: 6.4ms | ActiveRecord: 7.2ms | Allocations: 9035)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>660, "id"=>"4", "cart"=>{"discount"=>660}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 2297)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.4ms | Allocations: 2446)
Completed 200 OK in 10ms (Views: 5.4ms | ActiveRecord: 0.9ms | Allocations: 3731)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>659, "id"=>"4", "cart"=>{"discount"=>659}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>657, "id"=>"4", "cart"=>{"discount"=>657}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>659, "id"=>"4", "cart"=>{"discount"=>659}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Update (2.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.550104"], ["discount", "659.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (5.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.551405"], ["discount", "657.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.555491"], ["discount", "659.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 4055)
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 4760)
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 23ms (Views: 8.0ms | ActiveRecord: 7.4ms | Allocations: 12606)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.7ms | Allocations: 4807)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.4ms | Allocations: 5242)
Completed 200 OK in 24ms (Views: 9.5ms | ActiveRecord: 11.2ms | Allocations: 13627)


  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.5ms | Allocations: 3826)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.2ms | Allocations: 4181)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Completed 200 OK in 28ms (Views: 8.3ms | ActiveRecord: 7.2ms | Allocations: 15767)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>657, "id"=>"4", "cart"=>{"discount"=>657}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.586223"], ["discount", "657.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>654, "id"=>"4", "cart"=>{"discount"=>654}}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.0ms | Allocations: 3802)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3944)
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.596032"], ["discount", "654.0"], ["id", 4]]
Completed 200 OK in 17ms (Views: 7.1ms | ActiveRecord: 4.9ms | Allocations: 7756)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Parameters: {"discount"=>652, "id"=>"4", "cart"=>{"discount"=>652}}
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.7ms | Allocations: 2696)
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>654, "id"=>"4", "cart"=>{"discount"=>654}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 3065)
Completed 200 OK in 21ms (Views: 6.4ms | ActiveRecord: 8.1ms | Allocations: 9945)


  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (4.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.614681"], ["discount", "652.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.8ms | Allocations: 3220)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 3654)
Completed 200 OK in 15ms (Views: 6.0ms | ActiveRecord: 2.2ms | Allocations: 7225)


  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>652, "id"=>"4", "cart"=>{"discount"=>652}}
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.3ms | Allocations: 4722)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.9ms | Allocations: 5167)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Completed 200 OK in 25ms (Views: 8.4ms | ActiveRecord: 11.6ms | Allocations: 12439)


  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.3ms | Allocations: 3484)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.6ms | Allocations: 3613)
Completed 200 OK in 14ms (Views: 6.6ms | ActiveRecord: 3.4ms | Allocations: 6090)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>651, "id"=>"4", "cart"=>{"discount"=>651}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.651828"], ["discount", "651.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>651, "id"=>"4", "cart"=>{"discount"=>651}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.0ms | Allocations: 3860)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 4305)
Completed 200 OK in 15ms (Views: 7.0ms | ActiveRecord: 4.4ms | Allocations: 8262)


  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 4110)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.2ms | Allocations: 4251)
Completed 200 OK in 13ms (Views: 6.4ms | ActiveRecord: 3.6ms | Allocations: 6864)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>648, "id"=>"4", "cart"=>{"discount"=>648}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>648, "id"=>"4", "cart"=>{"discount"=>648}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>647, "id"=>"4", "cart"=>{"discount"=>647}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.675377"], ["discount", "648.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (1.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (3.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.679395"], ["discount", "648.0"], ["id", 4]]
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.682915"], ["discount", "647.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.9ms | Allocations: 3813)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.7ms | Allocations: 4191)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 23ms (Views: 8.2ms | ActiveRecord: 8.1ms | Allocations: 11424)


  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.1ms | Allocations: 5120)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.3ms | Allocations: 5747)
Completed 200 OK in 30ms (Views: 11.1ms | ActiveRecord: 9.0ms | Allocations: 14667)


  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.6ms | Allocations: 4155)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 4290)
Completed 200 OK in 31ms (Views: 7.7ms | ActiveRecord: 11.0ms | Allocations: 15371)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>647, "id"=>"4", "cart"=>{"discount"=>647}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>645, "id"=>"4", "cart"=>{"discount"=>645}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 2933)
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.0ms | Allocations: 3111)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 11ms (Views: 6.8ms | ActiveRecord: 1.5ms | Allocations: 4703)


  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.727461"], ["discount", "645.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.7ms | Allocations: 2284)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.0ms | Allocations: 2421)
Completed 200 OK in 15ms (Views: 3.8ms | ActiveRecord: 5.4ms | Allocations: 7235)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>645, "id"=>"4", "cart"=>{"discount"=>645}}
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  Parameters: {"discount"=>642, "id"=>"4", "cart"=>{"discount"=>642}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>642, "id"=>"4", "cart"=>{"discount"=>642}}
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.2ms | Allocations: 4021)
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.748085"], ["discount", "642.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 4210)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 13ms (Views: 8.1ms | ActiveRecord: 1.5ms | Allocations: 6934)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.755213"], ["discount", "642.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 3279)
  [1m[36mTRANSACTION (2.4ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 3463)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 22ms (Views: 5.6ms | ActiveRecord: 8.0ms | Allocations: 11563)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.1ms | Allocations: 2655)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.3ms | Allocations: 2792)
Completed 200 OK in 22ms (Views: 5.9ms | ActiveRecord: 8.3ms | Allocations: 11484)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>640, "id"=>"4", "cart"=>{"discount"=>640}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.782467"], ["discount", "640.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>640, "id"=>"4", "cart"=>{"discount"=>640}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 4163)
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.9ms | Allocations: 4348)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 18ms (Views: 8.3ms | ActiveRecord: 5.3ms | Allocations: 8401)


  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.5ms | Allocations: 3944)
  Parameters: {"discount"=>636, "id"=>"4", "cart"=>{"discount"=>636}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.9ms | Allocations: 4104)
Completed 200 OK in 14ms (Views: 7.3ms | ActiveRecord: 2.3ms | Allocations: 7062)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.806610"], ["discount", "636.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>636, "id"=>"4", "cart"=>{"discount"=>636}}
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.1ms | Allocations: 3759)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.4ms | Allocations: 3888)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 17ms (Views: 4.6ms | ActiveRecord: 6.2ms | Allocations: 9023)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 4898)
  Parameters: {"discount"=>634, "id"=>"4", "cart"=>{"discount"=>634}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 5043)
Completed 200 OK in 12ms (Views: 6.4ms | ActiveRecord: 3.0ms | Allocations: 7144)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.827186"], ["discount", "634.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 2249)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.7ms | Allocations: 2389)
Completed 200 OK in 15ms (Views: 4.9ms | ActiveRecord: 4.1ms | Allocations: 6797)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>634, "id"=>"4", "cart"=>{"discount"=>634}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Parameters: {"discount"=>633, "id"=>"4", "cart"=>{"discount"=>633}}
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.2ms | Allocations: 2993)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 3707)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 13ms (Views: 7.8ms | ActiveRecord: 1.7ms | Allocations: 5548)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.855641"], ["discount", "633.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>633, "id"=>"4", "cart"=>{"discount"=>633}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>672, "id"=>"4", "cart"=>{"discount"=>672}}
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (3.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (2.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.4ms | Allocations: 5289)
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.3ms | Allocations: 5971)
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.870130"], ["discount", "672.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 26ms (Views: 11.3ms | ActiveRecord: 8.1ms | Allocations: 13177)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (5.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 16.1ms | Allocations: 6488)
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 16.7ms | Allocations: 6692)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 24ms (Views: 10.5ms | ActiveRecord: 10.0ms | Allocations: 9481)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2664)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.3ms | Allocations: 2797)
Completed 200 OK in 28ms (Views: 4.6ms | ActiveRecord: 7.0ms | Allocations: 11731)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>631, "id"=>"4", "cart"=>{"discount"=>631}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.896169"], ["discount", "631.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>631, "id"=>"4", "cart"=>{"discount"=>631}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 3574)
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.2ms | Allocations: 3753)
Completed 200 OK in 16ms (Views: 7.8ms | ActiveRecord: 4.6ms | Allocations: 7260)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 3129)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.1ms | Allocations: 3497)
Completed 200 OK in 14ms (Views: 5.8ms | ActiveRecord: 2.1ms | Allocations: 7135)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  Parameters: {"discount"=>628, "id"=>"4", "cart"=>{"discount"=>628}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.922598"], ["discount", "628.0"], ["id", 4]]
  Parameters: {"discount"=>626, "id"=>"4", "cart"=>{"discount"=>626}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.928027"], ["discount", "626.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.7ms | Allocations: 3529)
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.6ms | Allocations: 3911)
Completed 200 OK in 18ms (Views: 7.2ms | ActiveRecord: 5.4ms | Allocations: 9140)


  Parameters: {"discount"=>626, "id"=>"4", "cart"=>{"discount"=>626}}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.1ms | Allocations: 4463)
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.5ms | Allocations: 4649)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 18ms (Views: 7.3ms | ActiveRecord: 7.0ms | Allocations: 9887)


  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 2959)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 3096)
Completed 200 OK in 13ms (Views: 6.3ms | ActiveRecord: 2.1ms | Allocations: 6241)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>624, "id"=>"4", "cart"=>{"discount"=>624}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.961030"], ["discount", "624.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>624, "id"=>"4", "cart"=>{"discount"=>624}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (1.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 3518)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 3904)
Completed 200 OK in 16ms (Views: 7.3ms | ActiveRecord: 4.3ms | Allocations: 7601)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
  [1m[36mProduct Load (1.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.6ms | Allocations: 4471)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 4616)
Completed 200 OK in 15ms (Views: 7.3ms | ActiveRecord: 5.0ms | Allocations: 7240)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>623, "id"=>"4", "cart"=>{"discount"=>623}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.988274"], ["discount", "623.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>623, "id"=>"4", "cart"=>{"discount"=>623}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:28.993881"], ["discount", "623.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>621, "id"=>"4", "cart"=>{"discount"=>621}}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.7ms | Allocations: 3032)
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.9ms | Allocations: 3206)
Completed 200 OK in 15ms (Views: 4.8ms | ActiveRecord: 5.0ms | Allocations: 9186)


  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.6ms | Allocations: 4096)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 4246)
Completed 200 OK in 16ms (Views: 8.1ms | ActiveRecord: 4.7ms | Allocations: 10630)


  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.005194"], ["discount", "621.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 2257)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.3ms | Allocations: 2390)
Completed 200 OK in 21ms (Views: 5.2ms | ActiveRecord: 7.2ms | Allocations: 10504)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>628, "id"=>"4", "cart"=>{"discount"=>628}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Parameters: {"discount"=>619, "id"=>"4", "cart"=>{"discount"=>619}}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.028172"], ["discount", "628.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>619, "id"=>"4", "cart"=>{"discount"=>619}}
  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.034238"], ["discount", "619.0"], ["id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 3432)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.2ms | Allocations: 4322)
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 23ms (Views: 9.9ms | ActiveRecord: 6.3ms | Allocations: 9916)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (4.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.046005"], ["discount", "619.0"], ["id", 4]]
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.5ms | Allocations: 4321)
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.1ms | Allocations: 4492)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 28ms (Views: 10.0ms | ActiveRecord: 8.8ms | Allocations: 12441)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.0ms | Allocations: 2672)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.4ms | Allocations: 2810)
Completed 200 OK in 26ms (Views: 6.5ms | ActiveRecord: 9.8ms | Allocations: 11396)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>618, "id"=>"4", "cart"=>{"discount"=>618}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.073310"], ["discount", "618.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Parameters: {"discount"=>618, "id"=>"4", "cart"=>{"discount"=>618}}
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.7ms | Allocations: 2503)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2649)
Completed 200 OK in 13ms (Views: 4.9ms | ActiveRecord: 4.2ms | Allocations: 5963)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.1ms | Allocations: 2698)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.4ms | Allocations: 2835)
Completed 200 OK in 11ms (Views: 4.7ms | ActiveRecord: 1.4ms | Allocations: 5073)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Parameters: {"discount"=>616, "id"=>"4", "cart"=>{"discount"=>616}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>616, "id"=>"4", "cart"=>{"discount"=>616}}
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Load (1.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.100777"], ["discount", "616.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (3.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.102829"], ["discount", "616.0"], ["id", 4]]
  Parameters: {"discount"=>614, "id"=>"4", "cart"=>{"discount"=>614}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 3994)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 5009)
Completed 200 OK in 21ms (Views: 8.7ms | ActiveRecord: 5.5ms | Allocations: 11042)


  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (4.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.113279"], ["discount", "614.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.3ms | Allocations: 4448)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.3ms | Allocations: 5035)
Completed 200 OK in 26ms (Views: 9.7ms | ActiveRecord: 8.6ms | Allocations: 13810)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 2646)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.9ms | Allocations: 2795)
Completed 200 OK in 23ms (Views: 5.4ms | ActiveRecord: 8.2ms | Allocations: 12040)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Parameters: {"discount"=>614, "id"=>"4", "cart"=>{"discount"=>614}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2284)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 2439)
Completed 200 OK in 8ms (Views: 4.9ms | ActiveRecord: 0.8ms | Allocations: 3816)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>613, "id"=>"4", "cart"=>{"discount"=>613}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.148035"], ["discount", "613.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2302)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.0ms | Allocations: 2440)
Completed 200 OK in 11ms (Views: 4.0ms | ActiveRecord: 3.7ms | Allocations: 6141)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>613, "id"=>"4", "cart"=>{"discount"=>613}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.8ms | Allocations: 2367)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.3ms | Allocations: 2508)
Processing by CartsController#update_discount as TURBO_STREAM
Completed 200 OK in 10ms (Views: 6.4ms | ActiveRecord: 1.4ms | Allocations: 4384)


  Parameters: {"discount"=>610, "id"=>"4", "cart"=>{"discount"=>610}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.172198"], ["discount", "610.0"], ["id", 4]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>610, "id"=>"4", "cart"=>{"discount"=>610}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.176945"], ["discount", "610.0"], ["id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2852)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2987)
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 14ms (Views: 5.1ms | ActiveRecord: 4.9ms | Allocations: 8214)


  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 3009)
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.2ms | Allocations: 3350)
Completed 200 OK in 16ms (Views: 5.6ms | ActiveRecord: 6.0ms | Allocations: 9234)


  Parameters: {"discount"=>608, "id"=>"4", "cart"=>{"discount"=>608}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.196429"], ["discount", "608.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2295)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2424)
Completed 200 OK in 16ms (Views: 5.0ms | ActiveRecord: 4.0ms | Allocations: 5799)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>608, "id"=>"4", "cart"=>{"discount"=>608}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 2302)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.7ms | Allocations: 2453)
Completed 200 OK in 6ms (Views: 3.7ms | ActiveRecord: 0.4ms | Allocations: 3774)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>607, "id"=>"4", "cart"=>{"discount"=>607}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.220902"], ["discount", "607.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 2330)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2470)
Completed 200 OK in 14ms (Views: 4.7ms | ActiveRecord: 4.7ms | Allocations: 5850)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Parameters: {"discount"=>607, "id"=>"4", "cart"=>{"discount"=>607}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>605, "id"=>"4", "cart"=>{"discount"=>605}}
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.242501"], ["discount", "605.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 3968)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.2ms | Allocations: 4109)
Completed 200 OK in 12ms (Views: 5.3ms | ActiveRecord: 2.8ms | Allocations: 6048)


  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2634)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2780)
Completed 200 OK in 17ms (Views: 4.0ms | ActiveRecord: 7.1ms | Allocations: 8958)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>621, "id"=>"4", "cart"=>{"discount"=>621}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.259383"], ["discount", "621.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>602, "id"=>"4", "cart"=>{"discount"=>602}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 2958)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.9ms | Allocations: 3116)
Completed 200 OK in 16ms (Views: 5.2ms | ActiveRecord: 6.3ms | Allocations: 6800)


  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.273765"], ["discount", "602.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>602, "id"=>"4", "cart"=>{"discount"=>602}}
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 3860)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.1ms | Allocations: 3991)
Completed 200 OK in 17ms (Views: 7.3ms | ActiveRecord: 4.8ms | Allocations: 9149)


  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 3598)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.2ms | Allocations: 3744)
Completed 200 OK in 13ms (Views: 5.5ms | ActiveRecord: 2.8ms | Allocations: 6468)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>599, "id"=>"4", "cart"=>{"discount"=>599}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.298267"], ["discount", "599.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>599, "id"=>"4", "cart"=>{"discount"=>599}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 3631)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 4086)
Completed 200 OK in 17ms (Views: 6.2ms | ActiveRecord: 5.8ms | Allocations: 8117)


  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.8ms | Allocations: 3548)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.1ms | Allocations: 3691)
Completed 200 OK in 12ms (Views: 5.7ms | ActiveRecord: 2.0ms | Allocations: 6843)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>597, "id"=>"4", "cart"=>{"discount"=>597}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.323643"], ["discount", "597.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>597, "id"=>"4", "cart"=>{"discount"=>597}}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.2ms | Allocations: 2671)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.5ms | Allocations: 2810)
Completed 200 OK in 15ms (Views: 6.0ms | ActiveRecord: 4.1ms | Allocations: 6535)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>596, "id"=>"4", "cart"=>{"discount"=>596}}
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 2931)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 3072)
Completed 200 OK in 11ms (Views: 5.7ms | ActiveRecord: 0.7ms | Allocations: 5626)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>590, "id"=>"4", "cart"=>{"discount"=>590}}
  [1m[36mCart Update (7.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.346191"], ["discount", "596.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (8.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.358527"], ["discount", "590.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 3314)
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 3453)
Completed 200 OK in 30ms (Views: 5.1ms | ActiveRecord: 11.6ms | Allocations: 10425)


  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>596, "id"=>"4", "cart"=>{"discount"=>596}}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 3664)
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 3851)
Completed 200 OK in 24ms (Views: 5.2ms | ActiveRecord: 12.3ms | Allocations: 10216)


  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.378931"], ["discount", "596.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.1ms | Allocations: 2295)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.5ms | Allocations: 2442)
Completed 200 OK in 17ms (Views: 5.3ms | ActiveRecord: 5.5ms | Allocations: 7926)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Parameters: {"discount"=>585, "id"=>"4", "cart"=>{"discount"=>585}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>590, "id"=>"4", "cart"=>{"discount"=>590}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (2.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.399468"], ["discount", "585.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (2.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.402671"], ["discount", "590.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.2ms | Allocations: 3585)
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 3777)
Completed 200 OK in 21ms (Views: 8.4ms | ActiveRecord: 6.0ms | Allocations: 9537)


  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.6ms | Allocations: 4069)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.0ms | Allocations: 4210)
Completed 200 OK in 21ms (Views: 6.2ms | ActiveRecord: 7.9ms | Allocations: 10107)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Parameters: {"discount"=>585, "id"=>"4", "cart"=>{"discount"=>585}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>581, "id"=>"4", "cart"=>{"discount"=>581}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.427606"], ["discount", "585.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (3.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.430476"], ["discount", "581.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>581, "id"=>"4", "cart"=>{"discount"=>581}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 3021)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.2ms | Allocations: 3411)
Completed 200 OK in 19ms (Views: 7.0ms | ActiveRecord: 6.7ms | Allocations: 9281)


  [1m[36mLineItem Load (1.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.6ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.7ms | Allocations: 4384)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.3ms | Allocations: 5074)
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 26ms (Views: 6.9ms | ActiveRecord: 9.9ms | Allocations: 13411)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.9ms | Allocations: 3461)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 3889)
Completed 200 OK in 15ms (Views: 9.0ms | ActiveRecord: 1.7ms | Allocations: 8471)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Parameters: {"discount"=>577, "id"=>"4", "cart"=>{"discount"=>577}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.463818"], ["discount", "577.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>577, "id"=>"4", "cart"=>{"discount"=>577}}
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.5ms | Allocations: 3028)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 3180)
Completed 200 OK in 17ms (Views: 6.1ms | ActiveRecord: 5.6ms | Allocations: 6351)


  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.7ms | Allocations: 2269)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2465)
Completed 200 OK in 11ms (Views: 5.6ms | ActiveRecord: 0.9ms | Allocations: 5587)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>572, "id"=>"4", "cart"=>{"discount"=>572}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>574, "id"=>"4", "cart"=>{"discount"=>574}}
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"discount"=>574, "id"=>"4", "cart"=>{"discount"=>574}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (4.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.495820"], ["discount", "572.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (6.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.497055"], ["discount", "574.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (5.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.500835"], ["discount", "574.0"], ["id", 4]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.8ms | Allocations: 4825)
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 5265)
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 23ms (Views: 7.5ms | ActiveRecord: 9.4ms | Allocations: 12595)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mProduct Load (4.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 11.5ms | Allocations: 6093)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.6ms | Allocations: 5485)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.1ms | Allocations: 5706)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 12.6ms | Allocations: 6755)
Completed 200 OK in 28ms (Views: 10.5ms | ActiveRecord: 10.8ms | Allocations: 14636)


Completed 200 OK in 31ms (Views: 8.4ms | ActiveRecord: 14.3ms | Allocations: 15698)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>605, "id"=>"4", "cart"=>{"discount"=>605}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.532090"], ["discount", "605.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Parameters: {"discount"=>571, "id"=>"4", "cart"=>{"discount"=>571}}
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 3556)
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 3727)
Completed 200 OK in 18ms (Views: 6.5ms | ActiveRecord: 6.9ms | Allocations: 7999)


  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.544147"], ["discount", "571.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mLineItem Load (2.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.4ms | Allocations: 2718)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 2865)
Completed 200 OK in 20ms (Views: 5.1ms | ActiveRecord: 8.3ms | Allocations: 8471)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Parameters: {"discount"=>572, "id"=>"4", "cart"=>{"discount"=>572}}
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>571, "id"=>"4", "cart"=>{"discount"=>571}}
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Load (1.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Update (4.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.568100"], ["discount", "572.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.2ms | Allocations: 2823)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 2987)
  [1m[36mTRANSACTION (2.3ms)[0m  [1m[35mCOMMIT[0m
Completed 200 OK in 12ms (Views: 5.8ms | ActiveRecord: 2.8ms | Allocations: 5764)


Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Parameters: {"discount"=>568, "id"=>"4", "cart"=>{"discount"=>568}}
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (1.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.6ms | Allocations: 3657)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 4322)
Completed 200 OK in 24ms (Views: 8.1ms | ActiveRecord: 8.8ms | Allocations: 11472)


  [1m[36mCart Update (3.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.585004"], ["discount", "568.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>564, "id"=>"4", "cart"=>{"discount"=>564}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.596094"], ["discount", "564.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 4266)
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.4ms | Allocations: 4430)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Completed 200 OK in 23ms (Views: 6.6ms | ActiveRecord: 9.2ms | Allocations: 11236)


  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 2966)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 3103)
Completed 200 OK in 18ms (Views: 4.4ms | ActiveRecord: 6.7ms | Allocations: 9117)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>564, "id"=>"4", "cart"=>{"discount"=>564}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2326)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.4ms | Allocations: 2459)
Completed 200 OK in 8ms (Views: 4.1ms | ActiveRecord: 0.9ms | Allocations: 3777)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>561, "id"=>"4", "cart"=>{"discount"=>561}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.628759"], ["discount", "561.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>561, "id"=>"4", "cart"=>{"discount"=>561}}
  [1m[36mTRANSACTION (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (1.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (1.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (2.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>560, "id"=>"4", "cart"=>{"discount"=>560}}
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.9ms | Allocations: 4342)
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.6ms | Allocations: 4680)
  Parameters: {"discount"=>560, "id"=>"4", "cart"=>{"discount"=>560}}
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 19ms (Views: 9.4ms | ActiveRecord: 5.8ms | Allocations: 9830)


  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.1ms | Allocations: 5230)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.1ms | Allocations: 5701)
  [1m[36mCart Load (1.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Completed 200 OK in 16ms (Views: 9.2ms | ActiveRecord: 3.2ms | Allocations: 7769)


  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (1.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mCart Update (4.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.649073"], ["discount", "560.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mCart Update (2.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.654204"], ["discount", "560.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 8.0ms | Allocations: 3938)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.9ms | Allocations: 4303)
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 27ms (Views: 7.6ms | ActiveRecord: 11.2ms | Allocations: 13314)


  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.3ms | Allocations: 4265)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.2ms | Allocations: 4588)
Completed 200 OK in 26ms (Views: 9.8ms | ActiveRecord: 8.2ms | Allocations: 11740)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>558, "id"=>"4", "cart"=>{"discount"=>558}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.683360"], ["discount", "558.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  Parameters: {"discount"=>558, "id"=>"4", "cart"=>{"discount"=>558}}
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"discount"=>557, "id"=>"4", "cart"=>{"discount"=>557}}
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 3494)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.8ms | Allocations: 4257)
Completed 200 OK in 17ms (Views: 6.2ms | ActiveRecord: 4.8ms | Allocations: 7770)


  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.5ms | Allocations: 4583)
  [1m[36mCart Update (3.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.700316"], ["discount", "557.0"], ["id", 4]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.0ms | Allocations: 4769)
Completed 200 OK in 15ms (Views: 8.1ms | ActiveRecord: 3.1ms | Allocations: 8340)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (2.2ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Parameters: {"discount"=>568, "id"=>"4", "cart"=>{"discount"=>568}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.9ms | Allocations: 3795)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.4ms | Allocations: 3964)
  [1m[36mCart Update (3.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.715334"], ["discount", "568.0"], ["id", 4]]
Completed 200 OK in 26ms (Views: 6.2ms | ActiveRecord: 10.4ms | Allocations: 11936)


  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>555, "id"=>"4", "cart"=>{"discount"=>555}}
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCart Update (1.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.728110"], ["discount", "555.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.3ms | Allocations: 4465)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 4600)
Completed 200 OK in 22ms (Views: 6.5ms | ActiveRecord: 8.5ms | Allocations: 11150)


  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.1ms | Allocations: 2675)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.5ms | Allocations: 2812)
Completed 200 OK in 17ms (Views: 5.3ms | ActiveRecord: 5.4ms | Allocations: 9067)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>555, "id"=>"4", "cart"=>{"discount"=>555}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2304)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.3ms | Allocations: 2443)
Completed 200 OK in 8ms (Views: 5.1ms | ActiveRecord: 0.9ms | Allocations: 3766)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>553, "id"=>"4", "cart"=>{"discount"=>553}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (1.0ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.758495"], ["discount", "553.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Parameters: {"discount"=>553, "id"=>"4", "cart"=>{"discount"=>553}}
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.3ms | Allocations: 2540)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 2681)
Completed 200 OK in 14ms (Views: 4.8ms | ActiveRecord: 5.6ms | Allocations: 6310)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2473)
Processing by CartsController#update_discount as TURBO_STREAM
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.9ms | Allocations: 3034)
  Parameters: {"discount"=>552, "id"=>"4", "cart"=>{"discount"=>552}}
Completed 200 OK in 11ms (Views: 5.7ms | ActiveRecord: 1.1ms | Allocations: 5236)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.781909"], ["discount", "552.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>552, "id"=>"4", "cart"=>{"discount"=>552}}
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.0ms | Allocations: 3336)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.9ms | Allocations: 3733)
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
Completed 200 OK in 16ms (Views: 6.5ms | ActiveRecord: 5.7ms | Allocations: 7734)


  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2765)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.6ms | Allocations: 3126)
Completed 200 OK in 13ms (Views: 6.8ms | ActiveRecord: 1.3ms | Allocations: 6832)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>547, "id"=>"4", "cart"=>{"discount"=>547}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.807212"], ["discount", "547.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2343)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.4ms | Allocations: 2480)
Completed 200 OK in 14ms (Views: 5.1ms | ActiveRecord: 4.0ms | Allocations: 6002)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>547, "id"=>"4", "cart"=>{"discount"=>547}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>546, "id"=>"4", "cart"=>{"discount"=>546}}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2915)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.5ms | Allocations: 3048)
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 7ms (Views: 4.0ms | ActiveRecord: 1.4ms | Allocations: 4773)


  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.828047"], ["discount", "546.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2344)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2480)
Completed 200 OK in 17ms (Views: 5.0ms | ActiveRecord: 5.3ms | Allocations: 7624)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>546, "id"=>"4", "cart"=>{"discount"=>546}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>544, "id"=>"4", "cart"=>{"discount"=>544}}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.1ms | Allocations: 2583)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.3ms | Allocations: 2716)
Completed 200 OK in 10ms (Views: 4.5ms | ActiveRecord: 1.5ms | Allocations: 4432)


  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.856511"], ["discount", "544.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2324)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 2485)
Completed 200 OK in 14ms (Views: 4.8ms | ActiveRecord: 4.2ms | Allocations: 7307)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>544, "id"=>"4", "cart"=>{"discount"=>544}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Parameters: {"discount"=>541, "id"=>"4", "cart"=>{"discount"=>541}}
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 2543)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3064)
Completed 200 OK in 12ms (Views: 6.7ms | ActiveRecord: 1.7ms | Allocations: 4759)


  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.883754"], ["discount", "541.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>541, "id"=>"4", "cart"=>{"discount"=>541}}
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 3235)
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.5ms | Allocations: 3747)
Completed 200 OK in 20ms (Views: 5.7ms | ActiveRecord: 5.4ms | Allocations: 9140)


  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2867)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.0ms | Allocations: 3196)
Completed 200 OK in 11ms (Views: 5.2ms | ActiveRecord: 2.1ms | Allocations: 6501)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>540, "id"=>"4", "cart"=>{"discount"=>540}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.906020"], ["discount", "540.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2294)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.9ms | Allocations: 2446)
Completed 200 OK in 15ms (Views: 6.1ms | ActiveRecord: 5.1ms | Allocations: 5886)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>540, "id"=>"4", "cart"=>{"discount"=>540}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>557, "id"=>"4", "cart"=>{"discount"=>557}}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2536)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 3037)
Completed 200 OK in 10ms (Views: 5.3ms | ActiveRecord: 1.2ms | Allocations: 4746)


  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.932731"], ["discount", "557.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2372)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.4ms | Allocations: 2527)
Completed 200 OK in 16ms (Views: 4.4ms | ActiveRecord: 5.9ms | Allocations: 7189)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>538, "id"=>"4", "cart"=>{"discount"=>538}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  Parameters: {"discount"=>536, "id"=>"4", "cart"=>{"discount"=>536}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.949451"], ["discount", "538.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Update (2.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.955272"], ["discount", "536.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 9.0ms | Allocations: 4677)
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 9.5ms | Allocations: 4863)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.0ms | Allocations: 3375)
Completed 200 OK in 22ms (Views: 9.0ms | ActiveRecord: 6.9ms | Allocations: 10861)


  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.9ms | Allocations: 3567)
Completed 200 OK in 19ms (Views: 6.5ms | ActiveRecord: 5.9ms | Allocations: 8937)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>536, "id"=>"4", "cart"=>{"discount"=>536}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2235)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.5ms | Allocations: 2379)
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>534, "id"=>"4", "cart"=>{"discount"=>534}}
Completed 200 OK in 9ms (Views: 5.2ms | ActiveRecord: 0.8ms | Allocations: 4409)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:29 +0300
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:29.986841"], ["discount", "534.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>534, "id"=>"4", "cart"=>{"discount"=>534}}
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.3ms | Allocations: 2668)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.6ms | Allocations: 2813)
Completed 200 OK in 19ms (Views: 7.0ms | ActiveRecord: 5.7ms | Allocations: 7235)


  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.5ms | Allocations: 2629)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.9ms | Allocations: 2768)
Completed 200 OK in 13ms (Views: 5.5ms | ActiveRecord: 2.0ms | Allocations: 5302)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>533, "id"=>"4", "cart"=>{"discount"=>533}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Parameters: {"discount"=>533, "id"=>"4", "cart"=>{"discount"=>533}}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.022089"], ["discount", "533.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Load (0.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.026283"], ["discount", "533.0"], ["id", 4]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[35mCOMMIT[0m
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>532, "id"=>"4", "cart"=>{"discount"=>532}}
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 3521)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.5ms | Allocations: 4293)
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 19ms (Views: 7.9ms | ActiveRecord: 6.1ms | Allocations: 9728)


  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.7ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.0ms | Allocations: 5608)
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 11.3ms | Allocations: 5969)
Completed 200 OK in 22ms (Views: 9.6ms | ActiveRecord: 6.4ms | Allocations: 11666)


  [1m[36mCart Update (4.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.040249"], ["discount", "532.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2264)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 2400)
Completed 200 OK in 20ms (Views: 4.6ms | ActiveRecord: 7.3ms | Allocations: 9956)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>532, "id"=>"4", "cart"=>{"discount"=>532}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Parameters: {"discount"=>530, "id"=>"4", "cart"=>{"discount"=>530}}
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2634)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2780)
Completed 200 OK in 8ms (Views: 4.5ms | ActiveRecord: 1.3ms | Allocations: 4272)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.068518"], ["discount", "530.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.5ms | Allocations: 2318)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.7ms | Allocations: 2451)
Completed 200 OK in 14ms (Views: 3.6ms | ActiveRecord: 5.5ms | Allocations: 7062)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  Parameters: {"discount"=>530, "id"=>"4", "cart"=>{"discount"=>530}}
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mCart Load (0.9ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Parameters: {"discount"=>524, "id"=>"4", "cart"=>{"discount"=>524}}
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.5ms | Allocations: 3261)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.6ms | Allocations: 3957)
Completed 200 OK in 13ms (Views: 7.4ms | ActiveRecord: 2.0ms | Allocations: 5562)


  [1m[36mCart Update (3.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.091904"], ["discount", "524.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[35mCOMMIT[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  Parameters: {"discount"=>524, "id"=>"4", "cart"=>{"discount"=>524}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 3568)
  [1m[36mLineItem Load (1.0ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.0ms | Allocations: 3746)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 23ms (Views: 6.9ms | ActiveRecord: 7.8ms | Allocations: 11121)


  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.1ms | Allocations: 3485)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.4ms | Allocations: 3625)
Completed 200 OK in 12ms (Views: 5.0ms | ActiveRecord: 2.1ms | Allocations: 6563)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>523, "id"=>"4", "cart"=>{"discount"=>523}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.117610"], ["discount", "523.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2323)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.5ms | Allocations: 2480)
Completed 200 OK in 13ms (Views: 4.5ms | ActiveRecord: 4.0ms | Allocations: 5942)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>523, "id"=>"4", "cart"=>{"discount"=>523}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2324)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.6ms | Allocations: 2462)
Completed 200 OK in 8ms (Views: 4.5ms | ActiveRecord: 0.9ms | Allocations: 3789)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>522, "id"=>"4", "cart"=>{"discount"=>522}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.149108"], ["discount", "522.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Processing by CartsController#update_discount as TURBO_STREAM
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2504)
  Parameters: {"discount"=>522, "id"=>"4", "cart"=>{"discount"=>522}}
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.8ms | Allocations: 2653)
Completed 200 OK in 17ms (Views: 6.3ms | ActiveRecord: 3.9ms | Allocations: 6375)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  Parameters: {"discount"=>521, "id"=>"4", "cart"=>{"discount"=>521}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.8ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (1.6ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCart Update (2.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.170409"], ["discount", "521.0"], ["id", 4]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.2ms | Allocations: 3855)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.5ms | Allocations: 3996)
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Completed 200 OK in 14ms (Views: 7.1ms | ActiveRecord: 2.2ms | Allocations: 6517)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2247)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.5ms | Allocations: 2376)
Completed 200 OK in 19ms (Views: 4.4ms | ActiveRecord: 6.8ms | Allocations: 9074)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>538, "id"=>"4", "cart"=>{"discount"=>538}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.187859"], ["discount", "538.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2356)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 2504)
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>520, "id"=>"4", "cart"=>{"discount"=>520}}
Completed 200 OK in 15ms (Views: 5.1ms | ActiveRecord: 5.0ms | Allocations: 6407)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.202870"], ["discount", "520.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Parameters: {"discount"=>521, "id"=>"4", "cart"=>{"discount"=>521}}
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2508)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.4ms | Allocations: 2693)
Completed 200 OK in 16ms (Views: 4.6ms | ActiveRecord: 5.7ms | Allocations: 6526)


  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.218324"], ["discount", "521.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>520, "id"=>"4", "cart"=>{"discount"=>520}}
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (1.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.9ms | Allocations: 3823)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.3ms | Allocations: 3960)
Completed 200 OK in 17ms (Views: 5.7ms | ActiveRecord: 5.9ms | Allocations: 8066)


  [1m[36mCart Update (3.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.227790"], ["discount", "520.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>519, "id"=>"4", "cart"=>{"discount"=>519}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mTRANSACTION (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (0.5ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCart Update (2.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.240309"], ["discount", "519.0"], ["id", 4]]
  â†³ app/models/line_item.rb:9:in `total_price'
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.8ms | Allocations: 3881)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.1ms | Allocations: 4026)
Completed 200 OK in 23ms (Views: 6.0ms | ActiveRecord: 8.4ms | Allocations: 11169)


  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2691)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2826)
Completed 200 OK in 18ms (Views: 4.4ms | ActiveRecord: 5.9ms | Allocations: 9203)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>518, "id"=>"4", "cart"=>{"discount"=>518}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.259605"], ["discount", "518.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>518, "id"=>"4", "cart"=>{"discount"=>518}}
  [1m[36mProduct Load (1.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.2ms | Allocations: 3010)
  [1m[36mCart Load (1.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.0ms | Allocations: 3197)
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 200 OK in 16ms (Views: 5.8ms | ActiveRecord: 5.2ms | Allocations: 7143)


  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.2ms | Allocations: 2662)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.5ms | Allocations: 2801)
Completed 200 OK in 12ms (Views: 5.3ms | ActiveRecord: 2.5ms | Allocations: 5899)


Processing by CartsController#update_discount as TURBO_STREAM
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  Parameters: {"discount"=>517, "id"=>"4", "cart"=>{"discount"=>517}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.288552"], ["discount", "517.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>517, "id"=>"4", "cart"=>{"discount"=>517}}
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mCart Load (2.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (2.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (1.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 10.0ms | Allocations: 4409)
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendered carts/update_discount.turbo_stream.erb (Duration: 10.5ms | Allocations: 4607)
  â†³ app/models/line_item.rb:9:in `total_price'
Completed 200 OK in 21ms (Views: 7.4ms | ActiveRecord: 7.8ms | Allocations: 8715)


  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.7ms | Allocations: 4392)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 8.7ms | Allocations: 4839)
Completed 200 OK in 15ms (Views: 6.8ms | ActiveRecord: 5.2ms | Allocations: 6898)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>516, "id"=>"4", "cart"=>{"discount"=>516}}
Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.312951"], ["discount", "516.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>516, "id"=>"4", "cart"=>{"discount"=>516}}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2597)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2734)
Completed 200 OK in 15ms (Views: 4.6ms | ActiveRecord: 4.6ms | Allocations: 6185)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:26:30 +0300
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Parameters: {"discount"=>515, "id"=>"4", "cart"=>{"discount"=>515}}
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.6ms | Allocations: 2597)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.0ms | Allocations: 2736)
Completed 200 OK in 12ms (Views: 5.3ms | ActiveRecord: 1.4ms | Allocations: 5592)


  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.336693"], ["discount", "515.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
Processing by CartsController#update_discount as TURBO_STREAM
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  Parameters: {"discount"=>515, "id"=>"4", "cart"=>{"discount"=>515}}
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.7ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mCart Load (0.8ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering carts/update_discount.turbo_stream.erb
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mLineItem Load (0.5ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 6.6ms | Allocations: 4122)
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.3ms | Allocations: 4569)
Completed 200 OK in 17ms (Views: 6.4ms | ActiveRecord: 5.3ms | Allocations: 9371)


  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.7ms | Allocations: 3679)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 6.0ms | Allocations: 3812)
Completed 200 OK in 11ms (Views: 5.6ms | ActiveRecord: 1.9ms | Allocations: 6360)


Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>519, "id"=>"4", "cart"=>{"discount"=>519}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:26:30.356792"], ["discount", "519.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.6ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 2.8ms | Allocations: 2264)
Completed 200 OK in 10ms (Views: 2.9ms | ActiveRecord: 3.2ms | Allocations: 4876)


Started GET "/cart" for ::1 at 2024-08-22 17:29:09 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.3ms | Allocations: 2837)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.2ms | Allocations: 4164)
  Rendered layout layouts/application.html.slim (Duration: 16.2ms | Allocations: 27255)
Completed 200 OK in 19ms (Views: 16.3ms | ActiveRecord: 0.6ms | Allocations: 28203)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:29:12 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>431, "id"=>"4", "cart"=>{"discount"=>431}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:29:12.494820"], ["discount", "431.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.7ms | Allocations: 2264)
Completed 200 OK in 19ms (Views: 5.7ms | ActiveRecord: 11.0ms | Allocations: 4867)


Started GET "/cart" for ::1 at 2024-08-22 17:35:36 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 8.0ms | Allocations: 17519)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.4ms | Allocations: 10344)
  Rendered carts/show.html.slim within layouts/application (Duration: 24.6ms | Allocations: 41409)
  Rendered layout layouts/application.html.slim (Duration: 38.9ms | Allocations: 73963)
Completed 200 OK in 58ms (Views: 39.8ms | ActiveRecord: 3.7ms | Allocations: 82186)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:35:38 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>391, "id"=>"4", "cart"=>{"discount"=>391}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:35:38.927381"], ["discount", "391.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2137)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2452)
Completed 200 OK in 20ms (Views: 4.7ms | ActiveRecord: 11.5ms | Allocations: 5501)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:35:55 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>777, "id"=>"4", "cart"=>{"discount"=>777}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:35:55.598755"], ["discount", "777.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.1ms | Allocations: 2264)
Completed 200 OK in 21ms (Views: 5.0ms | ActiveRecord: 11.4ms | Allocations: 4863)


Started GET "/cart" for ::1 at 2024-08-22 17:36:15 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 7.8ms | Allocations: 2832)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.5ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 14.4ms | Allocations: 4159)
  Rendered layout layouts/application.html.slim (Duration: 71.9ms | Allocations: 27179)
Completed 200 OK in 75ms (Views: 71.8ms | ActiveRecord: 1.1ms | Allocations: 28119)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:36:17 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>629, "id"=>"4", "cart"=>{"discount"=>629}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:36:17.096197"], ["discount", "629.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2264)
Completed 200 OK in 19ms (Views: 4.0ms | ActiveRecord: 11.0ms | Allocations: 4881)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:36:18 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>529, "id"=>"4", "cart"=>{"discount"=>529}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:36:19.000578"], ["discount", "529.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.4ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2264)
Completed 200 OK in 19ms (Views: 3.9ms | ActiveRecord: 11.6ms | Allocations: 4866)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:36:20 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>415, "id"=>"4", "cart"=>{"discount"=>415}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:36:20.604630"], ["discount", "415.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.6ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.9ms | Allocations: 2264)
Completed 200 OK in 18ms (Views: 3.9ms | ActiveRecord: 11.1ms | Allocations: 4875)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:36:22 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>858, "id"=>"4", "cart"=>{"discount"=>858}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:36:22.063307"], ["discount", "858.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.7ms | Allocations: 2264)
Completed 200 OK in 20ms (Views: 4.7ms | ActiveRecord: 11.4ms | Allocations: 4866)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:36:25 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>547, "id"=>"4", "cart"=>{"discount"=>547}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:36:25.128706"], ["discount", "547.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.7ms | Allocations: 2264)
Completed 200 OK in 18ms (Views: 3.8ms | ActiveRecord: 10.9ms | Allocations: 4851)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:36:26 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>546, "id"=>"4", "cart"=>{"discount"=>546}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:36:26.621886"], ["discount", "546.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.5ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.8ms | Allocations: 2264)
Completed 200 OK in 20ms (Views: 5.1ms | ActiveRecord: 11.2ms | Allocations: 4863)


Started GET "/cart" for ::1 at 2024-08-22 17:36:34 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 4.7ms | Allocations: 2833)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 7.0ms | Allocations: 4160)
  Rendered layout layouts/application.html.slim (Duration: 22.2ms | Allocations: 27065)
Completed 200 OK in 24ms (Views: 22.2ms | ActiveRecord: 0.5ms | Allocations: 28023)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:36:36 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>667, "id"=>"4", "cart"=>{"discount"=>667}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:36:36.182905"], ["discount", "667.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.7ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2264)
Completed 200 OK in 19ms (Views: 5.0ms | ActiveRecord: 10.9ms | Allocations: 4866)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:36:36 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>664, "id"=>"4", "cart"=>{"discount"=>664}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:36:36.462269"], ["discount", "664.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.0ms | Allocations: 2264)
Completed 200 OK in 18ms (Views: 4.0ms | ActiveRecord: 10.8ms | Allocations: 4854)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:36:37 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>663, "id"=>"4", "cart"=>{"discount"=>663}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:36:37.406085"], ["discount", "663.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.2ms | Allocations: 2264)
Completed 200 OK in 19ms (Views: 4.1ms | ActiveRecord: 11.3ms | Allocations: 4861)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:38:23 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>409, "id"=>"4", "cart"=>{"discount"=>409}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:38:23.448323"], ["discount", "409.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (10.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.6ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.8ms | Allocations: 2264)
Completed 200 OK in 20ms (Views: 3.8ms | ActiveRecord: 12.4ms | Allocations: 4863)


Started GET "/cart" for ::1 at 2024-08-22 17:39:03 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.8ms | Allocations: 2834)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.2ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.8ms | Allocations: 4161)
  Rendered layout layouts/application.html.slim (Duration: 18.0ms | Allocations: 27143)
Completed 200 OK in 20ms (Views: 18.2ms | ActiveRecord: 0.4ms | Allocations: 28079)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:39:04 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>343, "id"=>"4", "cart"=>{"discount"=>343}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:39:04.604963"], ["discount", "343.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.4ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 2.6ms | Allocations: 2264)
Completed 200 OK in 9ms (Views: 2.7ms | ActiveRecord: 3.0ms | Allocations: 4854)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:39:06 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>546, "id"=>"4", "cart"=>{"discount"=>546}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:39:06.950669"], ["discount", "546.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.3ms | Allocations: 2264)
Completed 200 OK in 20ms (Views: 4.4ms | ActiveRecord: 11.5ms | Allocations: 4876)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:39:08 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>779, "id"=>"4", "cart"=>{"discount"=>779}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (2.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:39:08.958922"], ["discount", "779.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.3ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.5ms | Allocations: 2264)
Completed 200 OK in 20ms (Views: 3.6ms | ActiveRecord: 12.5ms | Allocations: 4864)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:39:14 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>507, "id"=>"4", "cart"=>{"discount"=>507}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:39:14.022189"], ["discount", "507.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2264)
Completed 200 OK in 19ms (Views: 4.1ms | ActiveRecord: 10.9ms | Allocations: 4866)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:39:15 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>165, "id"=>"4", "cart"=>{"discount"=>165}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:39:15.166257"], ["discount", "165.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.3ms | Allocations: 2264)
Completed 200 OK in 19ms (Views: 4.2ms | ActiveRecord: 11.6ms | Allocations: 4866)


Started GET "/cart" for ::1 at 2024-08-22 17:39:16 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 4.2ms | Allocations: 2837)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.4ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 6.4ms | Allocations: 4164)
  Rendered layout layouts/application.html.slim (Duration: 9.5ms | Allocations: 6634)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.5ms | Allocations: 7613)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:39:26 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>276, "id"=>"4", "cart"=>{"discount"=>276}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:39:26.147184"], ["discount", "276.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.7ms | Allocations: 2135)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.9ms | Allocations: 2264)
Completed 200 OK in 19ms (Views: 3.9ms | ActiveRecord: 11.7ms | Allocations: 4869)


Started PATCH "/line_items/24" for ::1 at 2024-08-22 17:40:54 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"24", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.9ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 14:40:54.361223"], ["id", 24]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 6.8ms | Allocations: 11407)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.8ms | Allocations: 1427)
  Rendered line_items/update.turbo_stream.erb (Duration: 9.7ms | Allocations: 13422)
Completed 200 OK in 27ms (Views: 10.0ms | ActiveRecord: 11.4ms | Allocations: 18066)


Started PATCH "/line_items/24" for ::1 at 2024-08-22 17:40:55 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>1, "id"=>"24", "line_item"=>{"quantity"=>1}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 1], ["updated_at", "2024-08-22 14:40:55.497404"], ["id", 24]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.2ms | Allocations: 1384)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.0ms | Allocations: 1420)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.6ms | Allocations: 3113)
Completed 200 OK in 20ms (Views: 4.7ms | ActiveRecord: 10.9ms | Allocations: 6762)


Started PATCH "/line_items/24" for ::1 at 2024-08-22 17:40:56 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"24", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 14:40:56.111474"], ["id", 24]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.6ms | Allocations: 1390)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.8ms | Allocations: 1420)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.8ms | Allocations: 3119)
Completed 200 OK in 20ms (Views: 5.0ms | ActiveRecord: 10.9ms | Allocations: 6789)


Started GET "/cart" for ::1 at 2024-08-22 17:43:03 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 12.5ms | Allocations: 17740)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.1ms | Allocations: 10346)
  Rendered carts/show.html.slim within layouts/application (Duration: 27.9ms | Allocations: 41887)
  Rendered layout layouts/application.html.slim (Duration: 40.0ms | Allocations: 73136)
Completed 200 OK in 54ms (Views: 38.1ms | ActiveRecord: 7.0ms | Allocations: 78829)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:43:05 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>334, "id"=>"4", "cart"=>{"discount"=>334}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:43:05.190603"], ["discount", "334.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 0.4ms | Allocations: 175)
Completed 200 OK in 15ms (Views: 1.0ms | ActiveRecord: 11.0ms | Allocations: 3239)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:43:07 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>584, "id"=>"4", "cart"=>{"discount"=>584}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:43:07.191042"], ["discount", "584.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 0.1ms | Allocations: 44)
Completed 200 OK in 15ms (Views: 0.4ms | ActiveRecord: 10.9ms | Allocations: 2656)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:43:08 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>148, "id"=>"4", "cart"=>{"discount"=>148}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:43:08.063844"], ["discount", "148.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 0.1ms | Allocations: 44)
Completed 200 OK in 14ms (Views: 0.6ms | ActiveRecord: 10.7ms | Allocations: 2650)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:43:08 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>355, "id"=>"4", "cart"=>{"discount"=>355}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:43:08.826783"], ["discount", "355.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 0.1ms | Allocations: 44)
Completed 200 OK in 15ms (Views: 0.5ms | ActiveRecord: 11.0ms | Allocations: 2653)


Started GET "/cart" for ::1 at 2024-08-22 17:43:58 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 19.2ms | Allocations: 22053)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.2ms | Allocations: 10377)
  Rendered carts/show.html.slim within layouts/application (Duration: 46.0ms | Allocations: 61268)
  Rendered layout layouts/application.html.slim (Duration: 110.6ms | Allocations: 122294)
Completed 200 OK in 160ms (Views: 108.7ms | ActiveRecord: 11.7ms | Allocations: 147263)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:44:00 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>242, "id"=>"4", "cart"=>{"discount"=>242}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.4ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:44:00.287525"], ["discount", "242.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2136)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2663)
Completed 200 OK in 22ms (Views: 5.1ms | ActiveRecord: 11.9ms | Allocations: 6959)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:44:01 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>667, "id"=>"4", "cart"=>{"discount"=>667}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:44:01.699037"], ["discount", "667.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.4ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.6ms | Allocations: 2263)
Completed 200 OK in 19ms (Views: 4.4ms | ActiveRecord: 11.1ms | Allocations: 4885)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:44:04 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>811, "id"=>"4", "cart"=>{"discount"=>811}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:44:04.065915"], ["discount", "811.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.7ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.0ms | Allocations: 2263)
Completed 200 OK in 19ms (Views: 3.9ms | ActiveRecord: 11.0ms | Allocations: 4889)


Started PATCH "/line_items/24" for ::1 at 2024-08-22 17:44:04 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>3, "id"=>"24", "line_item"=>{"quantity"=>3}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.8ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 14:44:04.542625"], ["id", 24]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 6.0ms | Allocations: 11417)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.1ms | Allocations: 1430)
  Rendered line_items/update.turbo_stream.erb (Duration: 8.1ms | Allocations: 13439)
Completed 200 OK in 24ms (Views: 8.5ms | ActiveRecord: 11.1ms | Allocations: 18177)


Started PATCH "/line_items/24" for ::1 at 2024-08-22 17:44:05 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"24", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (1.3ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 14:44:05.341341"], ["id", 24]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.4ms | Allocations: 1391)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.8ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.7ms | Allocations: 3119)
Completed 200 OK in 22ms (Views: 4.8ms | ActiveRecord: 11.7ms | Allocations: 6767)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:44:06 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>452, "id"=>"4", "cart"=>{"discount"=>452}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:44:06.433735"], ["discount", "452.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.0ms | Allocations: 2263)
Completed 200 OK in 19ms (Views: 4.0ms | ActiveRecord: 11.1ms | Allocations: 4887)


Started GET "/cart" for ::1 at 2024-08-22 17:44:16 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.3ms | Allocations: 2833)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.3ms | Allocations: 4160)
  Rendered layout layouts/application.html.slim (Duration: 7.2ms | Allocations: 6630)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.5ms | Allocations: 7568)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:44:17 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>809, "id"=>"4", "cart"=>{"discount"=>809}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:44:17.928436"], ["discount", "809.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.2ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 2.6ms | Allocations: 2263)
Completed 200 OK in 11ms (Views: 2.7ms | ActiveRecord: 2.7ms | Allocations: 4872)


Started GET "/cart" for ::1 at 2024-08-22 17:44:18 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 4.1ms | Allocations: 2844)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 6.9ms | Allocations: 4171)
  Rendered layout layouts/application.html.slim (Duration: 9.0ms | Allocations: 6641)
Completed 200 OK in 11ms (Views: 8.9ms | ActiveRecord: 0.6ms | Allocations: 7588)


Started GET "/cart" for ::1 at 2024-08-22 17:45:23 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 12.3ms | Allocations: 17726)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 10334)
  Rendered carts/show.html.slim within layouts/application (Duration: 27.4ms | Allocations: 41861)
  Rendered layout layouts/application.html.slim (Duration: 41.0ms | Allocations: 73038)
Completed 200 OK in 49ms (Views: 38.5ms | ActiveRecord: 5.5ms | Allocations: 78688)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:45:26 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>530, "id"=>"4", "cart"=>{"discount"=>530}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:45:26.893837"], ["discount", "530.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 7.1ms | Allocations: 2136)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 7.7ms | Allocations: 2451)
Completed 200 OK in 22ms (Views: 7.8ms | ActiveRecord: 10.7ms | Allocations: 5490)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:45:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>188, "id"=>"4", "cart"=>{"discount"=>188}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:45:28.146013"], ["discount", "188.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.7ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.0ms | Allocations: 2263)
Completed 200 OK in 18ms (Views: 4.0ms | ActiveRecord: 10.6ms | Allocations: 4866)


Started GET "/cart" for ::1 at 2024-08-22 17:46:26 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 9.2ms | Allocations: 17739)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.3ms | Allocations: 10338)
  Rendered carts/show.html.slim within layouts/application (Duration: 21.4ms | Allocations: 41883)
  Rendered layout layouts/application.html.slim (Duration: 31.8ms | Allocations: 73131)
Completed 200 OK in 41ms (Views: 29.3ms | ActiveRecord: 6.3ms | Allocations: 78735)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:46:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>232, "id"=>"4", "cart"=>{"discount"=>232}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:46:27.470562"], ["discount", "232.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 2136)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2447)
Completed 200 OK in 19ms (Views: 4.3ms | ActiveRecord: 11.0ms | Allocations: 5507)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:46:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>460, "id"=>"4", "cart"=>{"discount"=>460}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (7.5ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:46:28.058504"], ["discount", "460.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.7ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2262)
Completed 200 OK in 27ms (Views: 5.0ms | ActiveRecord: 17.6ms | Allocations: 4874)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:46:28 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>649, "id"=>"4", "cart"=>{"discount"=>649}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:46:28.529364"], ["discount", "649.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.9ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.2ms | Allocations: 2262)
Completed 200 OK in 20ms (Views: 5.2ms | ActiveRecord: 11.2ms | Allocations: 4862)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:47:39 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>465, "id"=>"4", "cart"=>{"discount"=>465}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:47:39.886006"], ["discount", "465.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (7.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.2ms | Allocations: 2262)
Completed 200 OK in 17ms (Views: 4.2ms | ActiveRecord: 8.8ms | Allocations: 4860)


Started GET "/cart" for ::1 at 2024-08-22 17:48:34 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.5ms | Allocations: 2844)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.7ms | Allocations: 4171)
  Rendered layout layouts/application.html.slim (Duration: 8.3ms | Allocations: 6641)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.5ms | Allocations: 7565)


Started GET "/cart" for ::1 at 2024-08-22 17:48:35 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.9ms | Allocations: 2834)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.5ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 8.0ms | Allocations: 4161)
  Rendered layout layouts/application.html.slim (Duration: 11.1ms | Allocations: 6608)
Completed 200 OK in 14ms (Views: 11.0ms | ActiveRecord: 0.6ms | Allocations: 7533)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:48:37 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>363, "id"=>"4", "cart"=>{"discount"=>363}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:48:37.223156"], ["discount", "363.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2262)
Completed 200 OK in 18ms (Views: 4.1ms | ActiveRecord: 10.9ms | Allocations: 4892)


Started GET "/" for ::1 at 2024-08-22 17:48:47 +0300
Processing by ProductsController#index as HTML
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mCart Create (1.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "discount") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2024-08-22 14:48:47.899284"], ["updated_at", "2024-08-22 14:48:47.899284"], ["discount", "0.0"]]
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 3.4ms | Allocations: 6134)
  Rendered products/index.html.slim within layouts/application (Duration: 7.3ms | Allocations: 9982)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 5]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 10.9ms | Allocations: 13014)
Completed 200 OK in 17ms (Views: 11.1ms | ActiveRecord: 3.3ms | Allocations: 15825)


Started POST "/line_items?product_id=1" for ::1 at 2024-08-22 17:48:51 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"1"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 5], ["product_id", 1], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 1], ["cart_id", 5], ["order_id", nil], ["created_at", "2024-08-22 14:48:51.933062"], ["updated_at", "2024-08-22 14:48:51.933062"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 5]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.5ms | Allocations: 204)
Completed 200 OK in 19ms (Views: 1.1ms | ActiveRecord: 10.4ms | Allocations: 6341)


Started GET "/cart" for ::1 at 2024-08-22 17:48:52 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 5]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 2.6ms | Allocations: 1457)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.2ms | Allocations: 404)
  Rendered carts/show.html.slim within layouts/application (Duration: 4.5ms | Allocations: 2748)
  Rendered layout layouts/application.html.slim (Duration: 6.5ms | Allocations: 5217)
Completed 200 OK in 9ms (Views: 6.5ms | ActiveRecord: 0.4ms | Allocations: 6080)


Started POST "/carts/5/update_discount" for ::1 at 2024-08-22 17:48:54 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>433, "id"=>"5", "cart"=>{"discount"=>433}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:48:54.274506"], ["discount", "433.0"], ["id", 5]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 5]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.8ms | Allocations: 1541)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.1ms | Allocations: 1669)
Completed 200 OK in 18ms (Views: 3.4ms | ActiveRecord: 11.4ms | Allocations: 4193)


Started GET "/cart" for ::1 at 2024-08-22 17:49:41 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 2.7ms | Allocations: 2833)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 4.3ms | Allocations: 4160)
  Rendered layout layouts/application.html.slim (Duration: 6.3ms | Allocations: 6607)
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.3ms | Allocations: 7549)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:49:42 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>435, "id"=>"4", "cart"=>{"discount"=>435}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:49:42.902354"], ["discount", "435.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.4ms | Allocations: 2262)
Completed 200 OK in 20ms (Views: 4.4ms | ActiveRecord: 11.5ms | Allocations: 4854)


Started GET "/cart" for ::1 at 2024-08-22 17:50:19 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 4.9ms | Allocations: 2834)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.2ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 7.4ms | Allocations: 4161)
  Rendered layout layouts/application.html.slim (Duration: 9.3ms | Allocations: 6608)
Completed 200 OK in 11ms (Views: 9.2ms | ActiveRecord: 0.6ms | Allocations: 7550)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:50:25 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>459, "id"=>"4", "cart"=>{"discount"=>459}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:50:25.221907"], ["discount", "459.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2262)
Completed 200 OK in 19ms (Views: 4.0ms | ActiveRecord: 11.3ms | Allocations: 4862)


Started GET "/cart" for ::1 at 2024-08-22 17:52:28 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 14.3ms | Allocations: 22053)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.2ms | Allocations: 10377)
  Rendered carts/show.html.slim within layouts/application (Duration: 39.0ms | Allocations: 61267)
  Rendered layout layouts/application.html.slim (Duration: 90.2ms | Allocations: 114164)
Completed 200 OK in 143ms (Views: 88.9ms | ActiveRecord: 13.1ms | Allocations: 139147)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:52:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>372, "id"=>"4", "cart"=>{"discount"=>372}}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:52:30.123371"], ["discount", "372.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2136)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 5.0ms | Allocations: 2659)
Completed 200 OK in 22ms (Views: 5.0ms | ActiveRecord: 11.9ms | Allocations: 6936)


Started GET "/cart" for ::1 at 2024-08-22 17:52:58 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 10.2ms | Allocations: 17736)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.1ms | Allocations: 10334)
  Rendered carts/show.html.slim within layouts/application (Duration: 25.5ms | Allocations: 41872)
  Rendered layout layouts/application.html.slim (Duration: 36.7ms | Allocations: 73129)
Completed 200 OK in 46ms (Views: 34.6ms | ActiveRecord: 5.9ms | Allocations: 78804)


Started POST "/carts/4/update_discount" for ::1 at 2024-08-22 17:53:00 +0300
  
ActionController::RoutingError (No route matches [POST] "/carts/4/update_discount"):
  
Started GET "/cart" for ::1 at 2024-08-22 17:53:25 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 4.1ms | Allocations: 2844)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 6.2ms | Allocations: 4173)
  Rendered layout layouts/application.html.slim (Duration: 24.1ms | Allocations: 29688)
Completed 200 OK in 27ms (Views: 24.1ms | ActiveRecord: 0.8ms | Allocations: 30652)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:53:27 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>419, "id"=>"4", "cart"=>{"discount"=>419}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:53:27.281320"], ["discount", "419.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.5ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.2ms | Allocations: 2444)
Completed 200 OK in 20ms (Views: 4.8ms | ActiveRecord: 11.0ms | Allocations: 5530)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:53:29 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>581, "id"=>"4", "cart"=>{"discount"=>581}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:53:29.358203"], ["discount", "581.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.7ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 2.9ms | Allocations: 2262)
Completed 200 OK in 9ms (Views: 2.9ms | ActiveRecord: 2.9ms | Allocations: 4875)


Started GET "/cart" for ::1 at 2024-08-22 17:54:11 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.6ms | Allocations: 2844)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.9ms | Allocations: 4171)
  Rendered layout layouts/application.html.slim (Duration: 8.5ms | Allocations: 6647)
Completed 200 OK in 10ms (Views: 8.5ms | ActiveRecord: 0.4ms | Allocations: 7595)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:54:16 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>620, "id"=>"4", "cart"=>{"discount"=>620}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:54:16.341981"], ["discount", "620.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.6ms | Allocations: 2262)
Completed 200 OK in 18ms (Views: 4.6ms | ActiveRecord: 11.1ms | Allocations: 4884)


Started GET "/cart" for ::1 at 2024-08-22 17:54:18 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.7ms | Allocations: 2833)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.4ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 6.0ms | Allocations: 4160)
  Rendered layout layouts/application.html.slim (Duration: 9.3ms | Allocations: 6607)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.4ms | Allocations: 7543)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:54:25 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>348, "id"=>"4", "cart"=>{"discount"=>348}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:54:25.865680"], ["discount", "348.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.6ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 2.8ms | Allocations: 2262)
Completed 200 OK in 10ms (Views: 2.9ms | ActiveRecord: 3.3ms | Allocations: 4852)


Started GET "/cart" for ::1 at 2024-08-22 17:54:26 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.3ms | Allocations: 2834)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.2ms | Allocations: 4161)
  Rendered layout layouts/application.html.slim (Duration: 8.0ms | Allocations: 6608)
Completed 200 OK in 10ms (Views: 8.0ms | ActiveRecord: 0.4ms | Allocations: 7547)


Started PATCH "/line_items/24" for ::1 at 2024-08-22 17:54:30 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>3, "id"=>"24", "line_item"=>{"quantity"=>3}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 14:54:30.071187"], ["id", 24]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 5.0ms | Allocations: 11418)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.2ms | Allocations: 1430)
  Rendered line_items/update.turbo_stream.erb (Duration: 6.9ms | Allocations: 13440)
Completed 200 OK in 17ms (Views: 7.1ms | ActiveRecord: 2.6ms | Allocations: 18170)


Started PATCH "/line_items/23" for ::1 at 2024-08-22 17:54:32 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"23", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (1.0ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 14:54:32.467238"], ["id", 23]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.5ms | Allocations: 1390)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.8ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.8ms | Allocations: 3118)
Completed 200 OK in 22ms (Views: 4.9ms | ActiveRecord: 11.2ms | Allocations: 6761)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:55:07 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>378, "id"=>"4", "cart"=>{"discount"=>378}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:55:07.134464"], ["discount", "378.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2262)
Completed 200 OK in 19ms (Views: 4.1ms | ActiveRecord: 11.3ms | Allocations: 4862)


Started GET "/cart" for ::1 at 2024-08-22 17:55:08 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 4.3ms | Allocations: 2833)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 6.3ms | Allocations: 4160)
  Rendered layout layouts/application.html.slim (Duration: 8.5ms | Allocations: 6636)
Completed 200 OK in 11ms (Views: 8.5ms | ActiveRecord: 0.5ms | Allocations: 7580)


Started GET "/cart" for ::1 at 2024-08-22 17:55:52 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 9.6ms | Allocations: 17721)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.2ms | Allocations: 10334)
  Rendered carts/show.html.slim within layouts/application (Duration: 21.6ms | Allocations: 41838)
  Rendered layout layouts/application.html.slim (Duration: 36.9ms | Allocations: 73113)
Completed 200 OK in 44ms (Views: 34.5ms | ActiveRecord: 5.1ms | Allocations: 78781)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:55:54 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>292, "id"=>"4", "cart"=>{"discount"=>292}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:55:54.670838"], ["discount", "292.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2136)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 2447)
Completed 200 OK in 21ms (Views: 5.1ms | ActiveRecord: 11.4ms | Allocations: 5470)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:56:02 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>691, "id"=>"4", "cart"=>{"discount"=>691}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:56:02.762315"], ["discount", "691.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.4ms | Allocations: 2262)
Completed 200 OK in 19ms (Views: 4.3ms | ActiveRecord: 11.5ms | Allocations: 4830)


Started GET "/cart" for ::1 at 2024-08-22 17:56:40 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 9.2ms | Allocations: 17732)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.2ms | Allocations: 10334)
  Rendered carts/show.html.slim within layouts/application (Duration: 22.1ms | Allocations: 41856)
  Rendered layout layouts/application.html.slim (Duration: 37.9ms | Allocations: 73138)
Completed 200 OK in 48ms (Views: 35.4ms | ActiveRecord: 5.7ms | Allocations: 78816)


Started PATCH "/line_items/23" for ::1 at 2024-08-22 17:56:41 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>3, "id"=>"23", "line_item"=>{"quantity"=>3}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 14:56:41.803642"], ["id", 23]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (3.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 7.0ms | Allocations: 11398)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.8ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 9.6ms | Allocations: 13455)
Completed 200 OK in 19ms (Views: 9.8ms | ActiveRecord: 4.8ms | Allocations: 18160)


Started GET "/cart" for ::1 at 2024-08-22 17:56:43 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.8ms | Allocations: 2833)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.5ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.9ms | Allocations: 4160)
  Rendered layout layouts/application.html.slim (Duration: 8.4ms | Allocations: 6607)
Completed 200 OK in 11ms (Views: 8.7ms | ActiveRecord: 0.4ms | Allocations: 7548)


Started PATCH "/line_items/23" for ::1 at 2024-08-22 17:56:45 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>4, "id"=>"23", "line_item"=>{"quantity"=>4}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 4], ["updated_at", "2024-08-22 14:56:45.182807"], ["id", 23]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 1.7ms | Allocations: 1401)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.1ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 3.1ms | Allocations: 3129)
Completed 200 OK in 9ms (Views: 3.2ms | ActiveRecord: 2.6ms | Allocations: 6679)


Started PATCH "/line_items/24" for ::1 at 2024-08-22 17:56:46 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>4, "id"=>"24", "line_item"=>{"quantity"=>4}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.9ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 4], ["updated_at", "2024-08-22 14:56:46.482330"], ["id", 24]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.8ms | Allocations: 1391)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.1ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 5.5ms | Allocations: 3119)
Completed 200 OK in 22ms (Views: 5.6ms | ActiveRecord: 11.3ms | Allocations: 6669)


Started PATCH "/line_items/24" for ::1 at 2024-08-22 17:56:47 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>3, "id"=>"24", "line_item"=>{"quantity"=>3}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (1.0ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 14:56:47.938676"], ["id", 24]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.9ms | Allocations: 1391)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.6ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 6.1ms | Allocations: 3119)
Completed 200 OK in 23ms (Views: 6.2ms | ActiveRecord: 11.5ms | Allocations: 6675)


Started PATCH "/line_items/23" for ::1 at 2024-08-22 17:56:48 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>3, "id"=>"23", "line_item"=>{"quantity"=>3}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.7ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 14:56:48.566140"], ["id", 23]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 3.2ms | Allocations: 1390)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.6ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 6.3ms | Allocations: 3118)
Completed 200 OK in 22ms (Views: 6.3ms | ActiveRecord: 11.0ms | Allocations: 6666)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:56:50 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>744, "id"=>"4", "cart"=>{"discount"=>744}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:56:50.709369"], ["discount", "744.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.7ms | Allocations: 2394)
Completed 200 OK in 20ms (Views: 4.7ms | ActiveRecord: 11.5ms | Allocations: 5270)


Started GET "/cart" for ::1 at 2024-08-22 17:57:45 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 13.8ms | Allocations: 17756)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.0ms | Allocations: 10357)
  Rendered carts/show.html.slim within layouts/application (Duration: 27.0ms | Allocations: 41913)
  Rendered layout layouts/application.html.slim (Duration: 39.2ms | Allocations: 73183)
Completed 200 OK in 47ms (Views: 37.1ms | ActiveRecord: 5.1ms | Allocations: 78850)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:57:46 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>668, "id"=>"4", "cart"=>{"discount"=>668}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:57:46.848144"], ["discount", "668.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.5ms | Allocations: 2136)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.1ms | Allocations: 2448)
Completed 200 OK in 21ms (Views: 4.3ms | ActiveRecord: 11.0ms | Allocations: 5494)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:57:47 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>473, "id"=>"4", "cart"=>{"discount"=>473}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:57:47.501368"], ["discount", "473.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 2134)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 3.6ms | Allocations: 2262)
Completed 200 OK in 17ms (Views: 3.8ms | ActiveRecord: 10.5ms | Allocations: 4863)


Started PATCH "/line_items/23" for ::1 at 2024-08-22 17:57:48 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>4, "id"=>"23", "line_item"=>{"quantity"=>4}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.7ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 4], ["updated_at", "2024-08-22 14:57:48.977827"], ["id", 23]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 4.7ms | Allocations: 11395)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.1ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 6.4ms | Allocations: 13399)
Completed 200 OK in 14ms (Views: 6.6ms | ActiveRecord: 2.5ms | Allocations: 18007)


Started PATCH "/line_items/23" for ::1 at 2024-08-22 17:57:50 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>5, "id"=>"23", "line_item"=>{"quantity"=>5}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (1.0ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 5], ["updated_at", "2024-08-22 14:57:50.242752"], ["id", 23]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.6ms | Allocations: 1390)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.1ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 5.3ms | Allocations: 3118)
Completed 200 OK in 22ms (Views: 5.4ms | ActiveRecord: 11.2ms | Allocations: 6764)


Started PATCH "/line_items/23" for ::1 at 2024-08-22 17:57:51 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>6, "id"=>"23", "line_item"=>{"quantity"=>6}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 6], ["updated_at", "2024-08-22 14:57:51.096856"], ["id", 23]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.2ms | Allocations: 1401)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.8ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.9ms | Allocations: 3129)
Completed 200 OK in 22ms (Views: 4.9ms | ActiveRecord: 10.7ms | Allocations: 6781)


Started GET "/cart" for ::1 at 2024-08-22 17:58:43 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 12.5ms | Allocations: 17731)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 10337)
  Rendered carts/show.html.slim within layouts/application (Duration: 26.8ms | Allocations: 41869)
  Rendered layout layouts/application.html.slim (Duration: 42.2ms | Allocations: 73198)
Completed 200 OK in 50ms (Views: 39.7ms | ActiveRecord: 5.2ms | Allocations: 78868)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:58:45 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>306, "id"=>"4", "cart"=>{"discount"=>306}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:58:45.212846"], ["discount", "306.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 0.5ms | Allocations: 1247)
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.8ms | Allocations: 4323)


  
ActionView::Template::Error (undefined method `id' for nil:NilClass):
    1: <%= turbo_stream.replace "line-item-#{@line_item.id}" do %>
    2:   <%= render partial: "line_items/templates/line_item", locals: { line_item: @line_item } %>
    3: <% end %>
    4: 
  
app/views/carts/update_discount.turbo_stream.erb:1
Started GET "/cart" for ::1 at 2024-08-22 17:58:59 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 13.5ms | Allocations: 17767)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.1ms | Allocations: 10338)
  Rendered carts/show.html.slim within layouts/application (Duration: 24.6ms | Allocations: 41905)
  Rendered layout layouts/application.html.slim (Duration: 36.4ms | Allocations: 73161)
Completed 200 OK in 44ms (Views: 34.1ms | ActiveRecord: 5.1ms | Allocations: 78834)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:59:01 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>205, "id"=>"4", "cart"=>{"discount"=>205}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:59:01.958890"], ["discount", "205.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2136)
  Rendered carts/update_discount.turbo_stream.erb (Duration: 4.9ms | Allocations: 2577)
Completed 200 OK in 21ms (Views: 5.1ms | ActiveRecord: 11.5ms | Allocations: 5614)


Started GET "/cart" for ::1 at 2024-08-22 17:59:33 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 11.9ms | Allocations: 17736)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 10334)
  Rendered carts/show.html.slim within layouts/application (Duration: 25.0ms | Allocations: 41871)
  Rendered layout layouts/application.html.slim (Duration: 89.3ms | Allocations: 73139)
Completed 200 OK in 96ms (Views: 87.0ms | ActiveRecord: 4.8ms | Allocations: 78812)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:59:35 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>321, "id"=>"4", "cart"=>{"discount"=>321}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:59:35.382544"], ["discount", "321.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 0.7ms | Allocations: 297)
Completed 200 OK in 17ms (Views: 1.4ms | ActiveRecord: 10.9ms | Allocations: 3350)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 17:59:49 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>373, "id"=>"4", "cart"=>{"discount"=>373}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 14:59:49.648191"], ["discount", "373.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 0.1ms | Allocations: 101)
Completed 200 OK in 15ms (Views: 0.5ms | ActiveRecord: 10.8ms | Allocations: 2703)


Started PATCH "/line_items/23" for ::1 at 2024-08-22 17:59:51 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>7, "id"=>"23", "line_item"=>{"quantity"=>7}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 7], ["updated_at", "2024-08-22 14:59:51.257972"], ["id", 23]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 8.7ms | Allocations: 11406)
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.9ms | Allocations: 1420)
  Rendered line_items/update.turbo_stream.erb (Duration: 11.6ms | Allocations: 13455)
Completed 200 OK in 29ms (Views: 11.9ms | ActiveRecord: 11.0ms | Allocations: 18099)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:00:00 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>492, "id"=>"4", "cart"=>{"discount"=>492}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.2ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:00:00.370789"], ["discount", "492.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  Rendering carts/update_discount.turbo_stream.erb
  Rendered carts/update_discount.turbo_stream.erb (Duration: 0.2ms | Allocations: 101)
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 3.0ms | Allocations: 2719)


Started PATCH "/line_items/23" for ::1 at 2024-08-22 18:00:12 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>8, "id"=>"23", "line_item"=>{"quantity"=>8}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 23], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (1.1ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 8], ["updated_at", "2024-08-22 15:00:12.841380"], ["id", 23]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.2ms | Allocations: 1390)
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.1ms | Allocations: 1420)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.8ms | Allocations: 3119)
Completed 200 OK in 22ms (Views: 4.9ms | ActiveRecord: 11.4ms | Allocations: 6755)


Started GET "/cart" for ::1 at 2024-08-22 18:02:13 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 12.4ms | Allocations: 17760)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 10346)
  Rendered carts/show.html.slim within layouts/application (Duration: 33.7ms | Allocations: 41910)
  Rendered layout layouts/application.html.slim (Duration: 45.9ms | Allocations: 73174)
Completed 200 OK in 53ms (Views: 43.0ms | ActiveRecord: 5.7ms | Allocations: 78851)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:02:14 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>389, "id"=>"4", "cart"=>{"discount"=>389}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:02:14.918473"], ["discount", "389.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2137)
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 11.1ms | Allocations: 4914)


Started GET "/cart" for ::1 at 2024-08-22 18:02:53 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 9.8ms | Allocations: 17746)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.5ms | Allocations: 10343)
  Rendered carts/show.html.slim within layouts/application (Duration: 22.8ms | Allocations: 41890)
  Rendered layout layouts/application.html.slim (Duration: 35.1ms | Allocations: 73146)
Completed 200 OK in 44ms (Views: 32.8ms | ActiveRecord: 5.0ms | Allocations: 78829)


Started GET "/cart" for ::1 at 2024-08-22 18:02:55 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 4.0ms | Allocations: 2833)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.4ms | Allocations: 422)
  Rendered carts/show.html.slim within layouts/application (Duration: 6.1ms | Allocations: 4163)
  Rendered layout layouts/application.html.slim (Duration: 9.2ms | Allocations: 6610)
Completed 200 OK in 11ms (Views: 9.3ms | ActiveRecord: 0.5ms | Allocations: 7558)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:02:56 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>535, "id"=>"4", "cart"=>{"discount"=>535}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:02:56.878234"], ["discount", "535.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.7ms | Allocations: 2135)
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 10.8ms | Allocations: 4923)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:02:57 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>666, "id"=>"4", "cart"=>{"discount"=>666}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:02:57.638582"], ["discount", "666.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.8ms | Allocations: 2135)
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 11.3ms | Allocations: 4701)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:02:58 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>268, "id"=>"4", "cart"=>{"discount"=>268}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:02:58.414804"], ["discount", "268.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.6ms | Allocations: 2135)
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 10.9ms | Allocations: 4684)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:02:59 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>108, "id"=>"4", "cart"=>{"discount"=>108}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:02:59.286033"], ["discount", "108.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 2135)
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 11.3ms | Allocations: 4692)


Started GET "/" for ::1 at 2024-08-22 18:03:05 +0300
Processing by ProductsController#index as HTML
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mCart Create (1.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "discount") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2024-08-22 15:03:05.885497"], ["updated_at", "2024-08-22 15:03:05.885497"], ["discount", "0.0"]]
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 5.1ms | Allocations: 6139)
  Rendered products/index.html.slim within layouts/application (Duration: 9.9ms | Allocations: 9988)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 6]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 13.6ms | Allocations: 13034)
Completed 200 OK in 28ms (Views: 13.8ms | ActiveRecord: 11.2ms | Allocations: 15844)


Started POST "/line_items?product_id=1" for ::1 at 2024-08-22 18:03:08 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"1"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 6], ["product_id", 1], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 1], ["cart_id", 6], ["order_id", nil], ["created_at", "2024-08-22 15:03:08.319592"], ["updated_at", "2024-08-22 15:03:08.319592"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 6]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.5ms | Allocations: 208)
Completed 200 OK in 20ms (Views: 1.2ms | ActiveRecord: 10.6ms | Allocations: 6548)


Started GET "/cart" for ::1 at 2024-08-22 18:03:08 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 6]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 2.2ms | Allocations: 1457)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.6ms | Allocations: 404)
  Rendered carts/show.html.slim within layouts/application (Duration: 4.5ms | Allocations: 2748)
  Rendered layout layouts/application.html.slim (Duration: 7.1ms | Allocations: 5223)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.4ms | Allocations: 6070)


Started PATCH "/carts/6/update_discount" for ::1 at 2024-08-22 18:03:10 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>365, "id"=>"6", "cart"=>{"discount"=>365}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:03:10.436335"], ["discount", "365.0"], ["id", 6]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 6]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.7ms | Allocations: 1541)
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 11.1ms | Allocations: 4001)


Started PATCH "/carts/6/update_discount" for ::1 at 2024-08-22 18:03:11 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>648, "id"=>"6", "cart"=>{"discount"=>648}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.3ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:03:11.202477"], ["discount", "648.0"], ["id", 6]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 6]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.5ms | Allocations: 1534)
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 11.5ms | Allocations: 3996)


Started GET "/cart" for ::1 at 2024-08-22 18:03:12 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 6]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 1.5ms | Allocations: 1450)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.4ms | Allocations: 396)
  Rendered carts/show.html.slim within layouts/application (Duration: 3.0ms | Allocations: 2733)
  Rendered layout layouts/application.html.slim (Duration: 5.0ms | Allocations: 5180)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 0.3ms | Allocations: 6043)


Started GET "/cart" for ::1 at 2024-08-22 18:05:28 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.9ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.2ms | Allocations: 2834)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.2ms | Allocations: 422)
  Rendered carts/show.html.slim within layouts/application (Duration: 6.1ms | Allocations: 4162)
  Rendered layout layouts/application.html.slim (Duration: 18.9ms | Allocations: 27313)
Completed 200 OK in 21ms (Views: 18.2ms | ActiveRecord: 1.3ms | Allocations: 28265)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:05:30 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>342, "id"=>"4", "cart"=>{"discount"=>342}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:05:30.462578"], ["discount", "342.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.6ms | Allocations: 2135)
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 10.9ms | Allocations: 4678)


Started GET "/cart" for ::1 at 2024-08-22 18:08:12 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 4.8ms | Allocations: 2840)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.7ms | Allocations: 422)
  Rendered carts/show.html.slim within layouts/application (Duration: 7.4ms | Allocations: 4168)
  Rendered layout layouts/application.html.slim (Duration: 19.8ms | Allocations: 27084)
Completed 200 OK in 22ms (Views: 19.7ms | ActiveRecord: 0.6ms | Allocations: 28048)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:14 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>418, "id"=>"4", "cart"=>{"discount"=>418}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:14.302091"], ["discount", "418.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.3ms | Allocations: 2135)
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 11.0ms | Allocations: 4692)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:15 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>619, "id"=>"4", "cart"=>{"discount"=>619}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:15.838248"], ["discount", "619.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 2135)
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 10.9ms | Allocations: 4686)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:16 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>717, "id"=>"4", "cart"=>{"discount"=>717}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:16.862018"], ["discount", "717.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 2135)
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 11.3ms | Allocations: 4682)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:17 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>169, "id"=>"4", "cart"=>{"discount"=>169}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:17.877685"], ["discount", "169.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2135)
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 11.5ms | Allocations: 4701)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:18 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>33, "id"=>"4", "cart"=>{"discount"=>33}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:18.658468"], ["discount", "33.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2135)
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 11.1ms | Allocations: 4689)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:19 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>269, "id"=>"4", "cart"=>{"discount"=>269}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:19.438009"], ["discount", "269.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2135)
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 11.3ms | Allocations: 4691)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:20 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>393, "id"=>"4", "cart"=>{"discount"=>393}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:20.350306"], ["discount", "393.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 2135)
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 11.0ms | Allocations: 4693)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:21 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>470, "id"=>"4", "cart"=>{"discount"=>470}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:21.102044"], ["discount", "470.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 2135)
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 11.4ms | Allocations: 4689)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:21 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>505, "id"=>"4", "cart"=>{"discount"=>505}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:21.861378"], ["discount", "505.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2135)
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 11.1ms | Allocations: 4689)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:22 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>567, "id"=>"4", "cart"=>{"discount"=>567}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:22.677726"], ["discount", "567.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 2135)
Completed 200 OK in 10ms (Views: 0.1ms | ActiveRecord: 2.9ms | Allocations: 4705)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:23 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>596, "id"=>"4", "cart"=>{"discount"=>596}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:23.420341"], ["discount", "596.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.2ms | Allocations: 2135)
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 11.2ms | Allocations: 4686)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:24 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>667, "id"=>"4", "cart"=>{"discount"=>667}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:24.174950"], ["discount", "667.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 2135)
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 11.6ms | Allocations: 4690)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:24 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>743, "id"=>"4", "cart"=>{"discount"=>743}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:25.005615"], ["discount", "743.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.8ms | Allocations: 2135)
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 11.3ms | Allocations: 4680)


Started PATCH "/line_items/24" for ::1 at 2024-08-22 18:08:26 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>4, "id"=>"24", "line_item"=>{"quantity"=>4}}
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 24], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (1.5ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 4], ["updated_at", "2024-08-22 15:08:26.068763"], ["id", 24]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 9.2ms | Allocations: 11416)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.1ms | Allocations: 1420)
  Rendered line_items/update.turbo_stream.erb (Duration: 11.4ms | Allocations: 13467)
Completed 200 OK in 29ms (Views: 11.5ms | ActiveRecord: 12.2ms | Allocations: 17816)


Started PATCH "/carts/4/update_discount" for ::1 at 2024-08-22 18:08:45 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>417, "id"=>"4", "cart"=>{"discount"=>417}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.6ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:08:45.762217"], ["discount", "417.0"], ["id", 4]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 17.8ms | Allocations: 22777)
Completed 200 OK in 34ms (Views: 0.1ms | ActiveRecord: 15.6ms | Allocations: 28547)


Started GET "/cart" for ::1 at 2024-08-22 18:09:29 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 6.4ms | Allocations: 12872)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.2ms | Allocations: 422)
  Rendered carts/show.html.slim within layouts/application (Duration: 16.1ms | Allocations: 20776)
  Rendered layout layouts/application.html.slim (Duration: 30.3ms | Allocations: 53334)
Completed 200 OK in 32ms (Views: 30.4ms | ActiveRecord: 0.4ms | Allocations: 54484)


Started GET "/orders/new" for ::1 at 2024-08-22 18:09:32 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
Completed 406 Not Acceptable in 9ms (ActiveRecord: 1.7ms | Allocations: 6717)


  
ActionController::MissingExactTemplate (OrdersController#new is missing a template for request formats: text/html):
  
actionpack (7.1.3.4) lib/action_controller/metal/implicit_render.rb:47:in `default_render'
actionpack (7.1.3.4) lib/action_controller/metal/basic_implicit_render.rb:7:in `send_action'
actionpack (7.1.3.4) lib/abstract_controller/base.rb:224:in `process_action'
actionpack (7.1.3.4) lib/action_controller/metal/rendering.rb:165:in `process_action'
actionpack (7.1.3.4) lib/abstract_controller/callbacks.rb:259:in `block in process_action'
activesupport (7.1.3.4) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
turbo-rails (2.0.6) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.6) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (7.1.3.4) lib/active_support/callbacks.rb:130:in `block in run_callbacks'
actiontext (7.1.3.4) lib/action_text/rendering.rb:23:in `with_renderer'
actiontext (7.1.3.4) lib/action_text/engine.rb:69:in `block (4 levels) in <class:Engine>'
activesupport (7.1.3.4) lib/active_support/callbacks.rb:130:in `instance_exec'
activesupport (7.1.3.4) lib/active_support/callbacks.rb:130:in `block in run_callbacks'
activesupport (7.1.3.4) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.1.3.4) lib/abstract_controller/callbacks.rb:258:in `process_action'
actionpack (7.1.3.4) lib/action_controller/metal/rescue.rb:25:in `process_action'
actionpack (7.1.3.4) lib/action_controller/metal/instrumentation.rb:74:in `block in process_action'
activesupport (7.1.3.4) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.1.3.4) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.1.3.4) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.1.3.4) lib/action_controller/metal/instrumentation.rb:73:in `process_action'
actionpack (7.1.3.4) lib/action_controller/metal/params_wrapper.rb:261:in `process_action'
activerecord (7.1.3.4) lib/active_record/railties/controller_runtime.rb:32:in `process_action'
actionpack (7.1.3.4) lib/abstract_controller/base.rb:160:in `process'
actionview (7.1.3.4) lib/action_view/rendering.rb:40:in `process'
actionpack (7.1.3.4) lib/action_controller/metal.rb:227:in `dispatch'
actionpack (7.1.3.4) lib/action_controller/metal.rb:309:in `dispatch'
actionpack (7.1.3.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.1.3.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.1.3.4) lib/action_dispatch/journey/router.rb:51:in `block in serve'
actionpack (7.1.3.4) lib/action_dispatch/journey/router.rb:131:in `block in find_routes'
actionpack (7.1.3.4) lib/action_dispatch/journey/router.rb:124:in `each'
actionpack (7.1.3.4) lib/action_dispatch/journey/router.rb:124:in `find_routes'
actionpack (7.1.3.4) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.1.3.4) lib/action_dispatch/routing/route_set.rb:882:in `call'
rack (3.1.7) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.1.7) lib/rack/etag.rb:29:in `call'
rack (3.1.7) lib/rack/conditional_get.rb:31:in `call'
rack (3.1.7) lib/rack/head.rb:15:in `call'
actionpack (7.1.3.4) lib/action_dispatch/http/permissions_policy.rb:36:in `call'
actionpack (7.1.3.4) lib/action_dispatch/http/content_security_policy.rb:33:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/cookies.rb:689:in `call'
activerecord (7.1.3.4) lib/active_record/migration.rb:655:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
activesupport (7.1.3.4) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.1.3.4) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/actionable_exceptions.rb:16:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/debug_exceptions.rb:29:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (7.1.3.4) lib/rails/rack/logger.rb:37:in `call_app'
railties (7.1.3.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (7.1.3.4) lib/active_support/tagged_logging.rb:135:in `block in tagged'
activesupport (7.1.3.4) lib/active_support/tagged_logging.rb:39:in `tagged'
activesupport (7.1.3.4) lib/active_support/tagged_logging.rb:135:in `tagged'
activesupport (7.1.3.4) lib/active_support/broadcast_logger.rb:240:in `method_missing'
railties (7.1.3.4) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.5.2) lib/sprockets/rails/quiet_assets.rb:17:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/remote_ip.rb:92:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/request_id.rb:28:in `call'
rack (3.1.7) lib/rack/method_override.rb:28:in `call'
rack (3.1.7) lib/rack/runtime.rb:24:in `call'
activesupport (7.1.3.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/server_timing.rb:59:in `block in call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/server_timing.rb:24:in `collect_events'
actionpack (7.1.3.4) lib/action_dispatch/middleware/server_timing.rb:58:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/static.rb:25:in `call'
rack (3.1.7) lib/rack/sendfile.rb:114:in `call'
actionpack (7.1.3.4) lib/action_dispatch/middleware/host_authorization.rb:141:in `call'
railties (7.1.3.4) lib/rails/engine.rb:536:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started GET "/orders/new" for ::1 at 2024-08-22 18:10:31 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  Rendered orders/new.html.slim within layouts/application (Duration: 9.6ms | Allocations: 7918)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 29.6ms | Allocations: 46050)
Completed 200 OK in 41ms (Views: 28.8ms | ActiveRecord: 5.5ms | Allocations: 55071)


Started GET "/cart" for ::1 at 2024-08-22 18:11:00 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 9.1ms | Allocations: 17740)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.9ms | Allocations: 10335)
  Rendered carts/show.html.slim within layouts/application (Duration: 20.6ms | Allocations: 41876)
  Rendered layout layouts/application.html.slim (Duration: 35.1ms | Allocations: 73147)
Completed 200 OK in 42ms (Views: 32.7ms | ActiveRecord: 5.0ms | Allocations: 78804)


Started GET "/cart" for ::1 at 2024-08-22 18:11:44 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 11.1ms | Allocations: 17749)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.1ms | Allocations: 10336)
  Rendered carts/show.html.slim within layouts/application (Duration: 51.2ms | Allocations: 41899)
  Rendered layout layouts/application.html.slim (Duration: 85.3ms | Allocations: 76816)
Completed 200 OK in 115ms (Views: 83.7ms | ActiveRecord: 6.5ms | Allocations: 82479)


Started GET "/orders/new" for ::1 at 2024-08-22 18:11:46 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  Rendered orders/new.html.slim within layouts/application (Duration: 5.4ms | Allocations: 6928)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 8.6ms | Allocations: 10012)
Completed 200 OK in 16ms (Views: 9.0ms | ActiveRecord: 2.3ms | Allocations: 14528)


Started GET "/orders/new" for ::1 at 2024-08-22 18:25:33 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  Rendered orders/new.html.slim within layouts/application (Duration: 4.7ms | Allocations: 9776)
  Rendered layout layouts/application.html.slim (Duration: 4.8ms | Allocations: 9868)
Completed 500 Internal Server Error in 26ms (ActiveRecord: 3.0ms | Allocations: 21237)


  
ActionView::Template::Error (undefined local variable or method `cart' for #<ActionView::Base:0x000000000499f8>):
    17:       .amount-container--left
    18:         h4 Ð¡ÑƒÐ¼Ð¼Ð° Ð·Ð°ÐºÐ°Ð·Ð°
    19:       .amount-container--right
    20:         #cart_amount_with_discount = number_to_currency(cart.sub_total - cart.discount,
    21:          unit: 'â‚½',
    22:          format: '%n %u',
    23:          delimiter: ' ',
  
app/views/orders/new.html.slim:20
Started GET "/orders/new" for ::1 at 2024-08-22 18:25:52 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 20.8ms | Allocations: 21733)
  Rendered layout layouts/application.html.slim (Duration: 35.5ms | Allocations: 53003)
Completed 200 OK in 55ms (Views: 32.9ms | ActiveRecord: 10.4ms | Allocations: 62074)


Started GET "/orders/new" for ::1 at 2024-08-22 18:26:29 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 4.5ms | Allocations: 2489)
  Rendered layout layouts/application.html.slim (Duration: 22.2ms | Allocations: 8128)
Completed 200 OK in 25ms (Views: 22.2ms | ActiveRecord: 0.7ms | Allocations: 9082)


Started GET "/orders/new" for ::1 at 2024-08-22 18:26:35 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 3.8ms | Allocations: 2485)
  Rendered layout layouts/application.html.slim (Duration: 7.2ms | Allocations: 4933)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.6ms | Allocations: 5895)


Started GET "/orders/new" for ::1 at 2024-08-22 18:26:36 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 5.8ms | Allocations: 2485)
  Rendered layout layouts/application.html.slim (Duration: 8.5ms | Allocations: 4962)
Completed 200 OK in 11ms (Views: 8.5ms | ActiveRecord: 0.5ms | Allocations: 5924)


Started GET "/orders/new" for ::1 at 2024-08-22 18:26:36 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.4ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 4.4ms | Allocations: 2485)
  Rendered layout layouts/application.html.slim (Duration: 7.3ms | Allocations: 4961)
Completed 200 OK in 10ms (Views: 7.1ms | ActiveRecord: 0.8ms | Allocations: 5932)


Started GET "/orders/new" for ::1 at 2024-08-22 18:27:05 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 4.2ms | Allocations: 2485)
  Rendered layout layouts/application.html.slim (Duration: 21.8ms | Allocations: 8122)
Completed 200 OK in 24ms (Views: 21.9ms | ActiveRecord: 0.6ms | Allocations: 9062)


Started GET "/" for ::1 at 2024-08-22 18:27:08 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 3.0ms | Allocations: 6063)
  Rendered products/index.html.slim within layouts/application (Duration: 5.6ms | Allocations: 9894)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 8.6ms | Allocations: 12949)
Completed 200 OK in 10ms (Views: 8.7ms | ActiveRecord: 0.4ms | Allocations: 14117)


Started GET "/cart" for ::1 at 2024-08-22 18:27:10 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 6.1ms | Allocations: 12849)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 10324)
  Rendered carts/show.html.slim within layouts/application (Duration: 14.7ms | Allocations: 30685)
  Rendered layout layouts/application.html.slim (Duration: 16.8ms | Allocations: 33135)
Completed 200 OK in 19ms (Views: 17.0ms | ActiveRecord: 0.4ms | Allocations: 34284)


Started DELETE "/cart" for ::1 at 2024-08-22 18:27:11 +0300
Processing by CartsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 4]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Destroy (0.3ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 23]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Destroy (0.1ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 24]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mCart Destroy (0.1ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = $1[0m  [["id", 4]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
Redirected to http://localhost:3000/
Completed 302 Found in 17ms (ActiveRecord: 10.5ms | Allocations: 4334)


Started GET "/" for ::1 at 2024-08-22 18:27:11 +0300
Processing by ProductsController#index as TURBO_STREAM
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mCart Create (1.2ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "discount") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2024-08-22 15:27:11.251962"], ["updated_at", "2024-08-22 15:27:11.251962"], ["discount", "0.0"]]
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 1.5ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 6.1ms | Allocations: 1410)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 9.7ms | Allocations: 4451)
Completed 200 OK in 16ms (Views: 9.7ms | ActiveRecord: 3.3ms | Allocations: 6754)


Started GET "/cart" for ::1 at 2024-08-22 18:27:18 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 3.0ms | Allocations: 3315)
  Rendered carts/show.html.slim within layouts/application (Duration: 4.6ms | Allocations: 4140)
  Rendered layout layouts/application.html.slim (Duration: 7.3ms | Allocations: 6614)
Completed 200 OK in 10ms (Views: 7.5ms | ActiveRecord: 0.3ms | Allocations: 7551)


Started GET "/cart" for ::1 at 2024-08-22 18:27:18 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 0.7ms | Allocations: 556)
  Rendered carts/show.html.slim within layouts/application (Duration: 2.4ms | Allocations: 1314)
  Rendered layout layouts/application.html.slim (Duration: 4.5ms | Allocations: 3763)
Completed 200 OK in 7ms (Views: 4.7ms | ActiveRecord: 0.3ms | Allocations: 4723)


Started GET "/" for ::1 at 2024-08-22 18:27:20 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 0.9ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 1.8ms | Allocations: 1366)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 5.4ms | Allocations: 4378)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.4ms | Allocations: 5318)


Started POST "/line_items?product_id=1" for ::1 at 2024-08-22 18:27:22 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"1"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 7], ["product_id", 1], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 1], ["cart_id", 7], ["order_id", nil], ["created_at", "2024-08-22 15:27:22.997266"], ["updated_at", "2024-08-22 15:27:22.997266"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.4ms | Allocations: 210)
Completed 200 OK in 21ms (Views: 1.2ms | ActiveRecord: 10.5ms | Allocations: 6521)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 18:27:23 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 7], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 2], ["cart_id", 7], ["order_id", nil], ["created_at", "2024-08-22 15:27:23.545127"], ["updated_at", "2024-08-22 15:27:23.545127"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 18ms (Views: 0.6ms | ActiveRecord: 10.4ms | Allocations: 5201)


Started POST "/line_items?product_id=3" for ::1 at 2024-08-22 18:27:23 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"3"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 7], ["product_id", 3], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 3], ["cart_id", 7], ["order_id", nil], ["created_at", "2024-08-22 15:27:24.001674"], ["updated_at", "2024-08-22 15:27:24.001674"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 17ms (Views: 0.5ms | ActiveRecord: 10.3ms | Allocations: 5244)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 18:27:24 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 7], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Update (1.2ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:27:24.738761"], ["id", 28]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 19ms (Views: 0.8ms | ActiveRecord: 11.6ms | Allocations: 4206)


Started GET "/cart" for ::1 at 2024-08-22 18:27:25 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [3 times] (Duration: 5.6ms | Allocations: 4218)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 439)
  Rendered carts/show.html.slim within layouts/application (Duration: 8.3ms | Allocations: 5582)
  Rendered layout layouts/application.html.slim (Duration: 10.3ms | Allocations: 8029)
Completed 200 OK in 13ms (Views: 10.2ms | ActiveRecord: 0.7ms | Allocations: 8987)


Started PATCH "/line_items/27" for ::1 at 2024-08-22 18:27:29 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"27", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 27], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (3.1ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:27:29.203284"], ["id", 27]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 8.9ms | Allocations: 11417)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.7ms | Allocations: 1993)
  Rendered line_items/update.turbo_stream.erb (Duration: 12.6ms | Allocations: 13996)
Completed 200 OK in 32ms (Views: 12.5ms | ActiveRecord: 13.7ms | Allocations: 18320)


Started PATCH "/line_items/29" for ::1 at 2024-08-22 18:27:29 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"29", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (1.0ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:27:29.935131"], ["id", 29]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 3.0ms | Allocations: 1391)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.2ms | Allocations: 1993)
  Rendered line_items/update.turbo_stream.erb (Duration: 5.7ms | Allocations: 3693)
Completed 200 OK in 23ms (Views: 5.9ms | ActiveRecord: 11.6ms | Allocations: 7359)


Started PATCH "/line_items/29" for ::1 at 2024-08-22 18:27:31 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>3, "id"=>"29", "line_item"=>{"quantity"=>3}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 15:27:31.829120"], ["id", 29]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 1.4ms | Allocations: 1391)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.8ms | Allocations: 1993)
  Rendered line_items/update.turbo_stream.erb (Duration: 3.5ms | Allocations: 3693)
Completed 200 OK in 11ms (Views: 3.5ms | ActiveRecord: 2.7ms | Allocations: 7358)


Started PATCH "/carts/7/update_discount" for ::1 at 2024-08-22 18:27:33 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>413, "id"=>"7", "cart"=>{"discount"=>413}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:27:33.486163"], ["discount", "413.0"], ["id", 7]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 2727)
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 11.3ms | Allocations: 5366)


Started PATCH "/line_items/29" for ::1 at 2024-08-22 18:27:34 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"29", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (1.1ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:27:34.827450"], ["id", 29]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.9ms | Allocations: 1391)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.2ms | Allocations: 1993)
  Rendered line_items/update.turbo_stream.erb (Duration: 6.5ms | Allocations: 3693)
Completed 200 OK in 24ms (Views: 6.5ms | ActiveRecord: 11.7ms | Allocations: 7362)


Started PATCH "/line_items/29" for ::1 at 2024-08-22 18:27:35 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>1, "id"=>"29", "line_item"=>{"quantity"=>1}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (1.1ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 1], ["updated_at", "2024-08-22 15:27:35.658973"], ["id", 29]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 3.1ms | Allocations: 1384)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.9ms | Allocations: 1993)
  Rendered line_items/update.turbo_stream.erb (Duration: 7.6ms | Allocations: 3686)
Completed 200 OK in 25ms (Views: 7.5ms | ActiveRecord: 11.8ms | Allocations: 7342)


Started PATCH "/line_items/28" for ::1 at 2024-08-22 18:27:37 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>1, "id"=>"28", "line_item"=>{"quantity"=>1}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:36:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 1], ["updated_at", "2024-08-22 15:27:37.628011"], ["id", 28]]
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:40:in `update'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:44:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 3.0ms | Allocations: 1384)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.6ms | Allocations: 1993)
  Rendered line_items/update.turbo_stream.erb (Duration: 6.1ms | Allocations: 3686)
Completed 200 OK in 22ms (Views: 6.2ms | ActiveRecord: 11.1ms | Allocations: 7357)


Started DELETE "/line_items/29" for ::1 at 2024-08-22 18:27:39 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"29"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 29], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 29]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
  Rendering line_items/destroy.turbo_stream.erb
  Rendered line_items/destroy.turbo_stream.erb (Duration: 0.5ms | Allocations: 285)
Completed 200 OK in 19ms (Views: 0.9ms | ActiveRecord: 11.2ms | Allocations: 3606)


Started DELETE "/line_items/28" for ::1 at 2024-08-22 18:27:41 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"28"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 28], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 28]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (6.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
  Rendering line_items/destroy.turbo_stream.erb
  Rendered line_items/destroy.turbo_stream.erb (Duration: 0.1ms | Allocations: 102)
Completed 200 OK in 13ms (Views: 0.5ms | ActiveRecord: 7.5ms | Allocations: 3250)


Started DELETE "/cart" for ::1 at 2024-08-22 18:27:47 +0300
Processing by CartsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 7]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 27]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mCart Destroy (0.1ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = $1[0m  [["id", 7]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
Redirected to http://localhost:3000/
Completed 302 Found in 15ms (ActiveRecord: 10.2ms | Allocations: 3408)


Started GET "/" for ::1 at 2024-08-22 18:27:47 +0300
Processing by ProductsController#index as TURBO_STREAM
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mCart Create (1.3ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "discount") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2024-08-22 15:27:47.867291"], ["updated_at", "2024-08-22 15:27:47.867291"], ["discount", "0.0"]]
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 0.9ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 1.8ms | Allocations: 1366)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 4.6ms | Allocations: 4407)
Completed 200 OK in 10ms (Views: 4.7ms | ActiveRecord: 3.2ms | Allocations: 6507)


Started POST "/line_items?product_id=1" for ::1 at 2024-08-22 18:27:50 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"1"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 8], ["product_id", 1], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 1], ["cart_id", 8], ["order_id", nil], ["created_at", "2024-08-22 15:27:50.551362"], ["updated_at", "2024-08-22 15:27:50.551362"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (10.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 10.9ms | Allocations: 5198)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 18:27:51 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 8], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 2], ["cart_id", 8], ["order_id", nil], ["created_at", "2024-08-22 15:27:51.033393"], ["updated_at", "2024-08-22 15:27:51.033393"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 10.6ms | Allocations: 5213)


Started GET "/cart" for ::1 at 2024-08-22 18:27:51 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.4ms | Allocations: 2833)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.3ms | Allocations: 4160)
  Rendered layout layouts/application.html.slim (Duration: 7.3ms | Allocations: 6607)
Completed 200 OK in 10ms (Views: 7.3ms | ActiveRecord: 0.5ms | Allocations: 7561)


Started DELETE "/line_items/31" for ::1 at 2024-08-22 18:27:54 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"31"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 31], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 31]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (4.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
  Rendering line_items/destroy.turbo_stream.erb
  Rendered line_items/destroy.turbo_stream.erb (Duration: 0.2ms | Allocations: 102)
Completed 200 OK in 12ms (Views: 0.7ms | ActiveRecord: 5.5ms | Allocations: 3249)


Started GET "/orders/new" for ::1 at 2024-08-22 18:28:06 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 3.3ms | Allocations: 1904)
  Rendered layout layouts/application.html.slim (Duration: 6.9ms | Allocations: 4352)
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 0.4ms | Allocations: 5310)


Started GET "/cart" for ::1 at 2024-08-22 18:28:38 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 10.2ms | Allocations: 16353)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.5ms | Allocations: 10316)
  Rendered carts/show.html.slim within layouts/application (Duration: 24.1ms | Allocations: 40451)
  Rendered layout layouts/application.html.slim (Duration: 37.9ms | Allocations: 71703)
Completed 200 OK in 46ms (Views: 35.6ms | ActiveRecord: 5.1ms | Allocations: 77374)


Started GET "/orders/new" for ::1 at 2024-08-22 18:28:42 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 5.4ms | Allocations: 10125)
  Rendered layout layouts/application.html.slim (Duration: 7.5ms | Allocations: 12577)
Completed 200 OK in 14ms (Views: 7.7ms | ActiveRecord: 1.9ms | Allocations: 17102)


Started GET "/orders/new" for ::1 at 2024-08-22 18:29:22 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 20.6ms | Allocations: 21167)
  Rendered layout layouts/application.html.slim (Duration: 36.5ms | Allocations: 52457)
Completed 200 OK in 48ms (Views: 34.3ms | ActiveRecord: 6.7ms | Allocations: 61404)


Started GET "/cart" for ::1 at 2024-08-22 18:29:28 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 4.3ms | Allocations: 11471)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.0ms | Allocations: 10305)
  Rendered carts/show.html.slim within layouts/application (Duration: 12.8ms | Allocations: 29294)
  Rendered layout layouts/application.html.slim (Duration: 14.7ms | Allocations: 31744)
Completed 200 OK in 17ms (Views: 15.1ms | ActiveRecord: 0.4ms | Allocations: 32884)


Started PATCH "/carts/8/update_discount" for ::1 at 2024-08-22 18:29:32 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>423, "id"=>"8", "cart"=>{"discount"=>423}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:29:32.974718"], ["discount", "423.0"], ["id", 8]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.5ms | Allocations: 1541)
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 10.8ms | Allocations: 4317)


Started GET "/orders/new" for ::1 at 2024-08-22 18:29:33 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 3.9ms | Allocations: 1906)
  Rendered layout layouts/application.html.slim (Duration: 6.7ms | Allocations: 4354)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.4ms | Allocations: 5324)


Started GET "/cart" for ::1 at 2024-08-22 18:29:36 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 2.9ms | Allocations: 1450)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.4ms | Allocations: 403)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.3ms | Allocations: 2740)
  Rendered layout layouts/application.html.slim (Duration: 7.4ms | Allocations: 5187)
Completed 200 OK in 10ms (Views: 7.5ms | ActiveRecord: 0.4ms | Allocations: 6134)


Started GET "/cart" for ::1 at 2024-08-22 18:29:43 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 2.5ms | Allocations: 1450)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 403)
  Rendered carts/show.html.slim within layouts/application (Duration: 4.3ms | Allocations: 2740)
  Rendered layout layouts/application.html.slim (Duration: 6.7ms | Allocations: 5187)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.3ms | Allocations: 6131)


Started GET "/" for ::1 at 2024-08-22 18:29:46 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 4.0ms | Allocations: 6063)
  Rendered products/index.html.slim within layouts/application (Duration: 8.2ms | Allocations: 9893)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 12.0ms | Allocations: 12956)
Completed 200 OK in 15ms (Views: 12.1ms | ActiveRecord: 0.6ms | Allocations: 14105)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 18:29:47 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 8], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 2], ["cart_id", 8], ["order_id", nil], ["created_at", "2024-08-22 15:29:47.688432"], ["updated_at", "2024-08-22 15:29:47.688432"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.5ms | Allocations: 207)
Completed 200 OK in 10ms (Views: 1.2ms | ActiveRecord: 2.3ms | Allocations: 6564)


Started GET "/cart" for ::1 at 2024-08-22 18:29:48 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.1ms | Allocations: 2833)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.2ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.0ms | Allocations: 4160)
  Rendered layout layouts/application.html.slim (Duration: 6.9ms | Allocations: 6607)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.5ms | Allocations: 7533)


Started DELETE "/line_items/32" for ::1 at 2024-08-22 18:29:56 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"32"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 32], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (1.1ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 32]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
  Rendering line_items/destroy.turbo_stream.erb
  Rendered line_items/destroy.turbo_stream.erb (Duration: 0.5ms | Allocations: 282)
Completed 200 OK in 10ms (Views: 0.8ms | ActiveRecord: 3.3ms | Allocations: 4158)


Started GET "/cart" for ::1 at 2024-08-22 18:31:01 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 10.5ms | Allocations: 16343)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.3ms | Allocations: 10316)
  Rendered carts/show.html.slim within layouts/application (Duration: 24.5ms | Allocations: 40437)
  Rendered layout layouts/application.html.slim (Duration: 43.2ms | Allocations: 71761)
Completed 200 OK in 52ms (Views: 40.7ms | ActiveRecord: 5.6ms | Allocations: 77437)


Started GET "/" for ::1 at 2024-08-22 18:31:04 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 4.2ms | Allocations: 6056)
  Rendered products/index.html.slim within layouts/application (Duration: 8.2ms | Allocations: 9885)
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 11.7ms | Allocations: 12926)
Completed 200 OK in 14ms (Views: 11.8ms | ActiveRecord: 0.6ms | Allocations: 14092)


Started POST "/line_items?product_id=3" for ::1 at 2024-08-22 18:31:05 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"3"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 8], ["product_id", 3], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 3], ["cart_id", 8], ["order_id", nil], ["created_at", "2024-08-22 15:31:05.397193"], ["updated_at", "2024-08-22 15:31:05.397193"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.3ms | Allocations: 210)
Completed 200 OK in 10ms (Views: 0.8ms | ActiveRecord: 2.3ms | Allocations: 6569)


Started GET "/cart" for ::1 at 2024-08-22 18:31:06 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.4ms | Allocations: 2834)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.6ms | Allocations: 4161)
  Rendered layout layouts/application.html.slim (Duration: 7.7ms | Allocations: 6608)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 0.5ms | Allocations: 7541)


Started DELETE "/line_items/33" for ::1 at 2024-08-22 18:31:07 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"33"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 33], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.6ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 33]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:27:in `block in destroy'
  Rendering line_items/destroy.turbo_stream.erb
  Rendered line_items/destroy.turbo_stream.erb (Duration: 0.4ms | Allocations: 284)
Completed 200 OK in 7ms (Views: 0.6ms | ActiveRecord: 2.5ms | Allocations: 4644)


Started DELETE "/line_items/30" for ::1 at 2024-08-22 18:31:08 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"30"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 30], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 30]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
Redirected to http://localhost:3000/cart.8
Completed 302 Found in 15ms (ActiveRecord: 10.9ms | Allocations: 3005)


Started GET "/cart.8" for ::1 at 2024-08-22 18:31:08 +0300
Processing by CartsController#show as */*
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 2.3ms | Allocations: 3272)
  Rendered carts/show.html.slim within layouts/application (Duration: 3.3ms | Allocations: 4094)
  Rendered layout layouts/application.html.slim (Duration: 5.1ms | Allocations: 6543)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.2ms | Allocations: 7566)


Started GET "/cart.8" for ::1 at 2024-08-22 18:31:08 +0300
Processing by CartsController#show as */*
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 0.6ms | Allocations: 557)
  Rendered carts/show.html.slim within layouts/application (Duration: 1.5ms | Allocations: 1315)
  Rendered layout layouts/application.html.slim (Duration: 3.3ms | Allocations: 3764)
Completed 200 OK in 7ms (Views: 3.6ms | ActiveRecord: 0.2ms | Allocations: 4707)


Started GET "/" for ::1 at 2024-08-22 18:31:09 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 1.2ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 2.2ms | Allocations: 1366)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 5.4ms | Allocations: 4403)
Completed 200 OK in 8ms (Views: 5.4ms | ActiveRecord: 0.9ms | Allocations: 5350)


Started GET "/" for ::1 at 2024-08-22 18:31:11 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 0.7ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 1.4ms | Allocations: 1366)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 4.3ms | Allocations: 4404)
Completed 200 OK in 7ms (Views: 4.3ms | ActiveRecord: 0.4ms | Allocations: 5345)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 18:31:13 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 8], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 2], ["cart_id", 8], ["order_id", nil], ["created_at", "2024-08-22 15:31:13.276274"], ["updated_at", "2024-08-22 15:31:13.276274"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 19ms (Views: 0.6ms | ActiveRecord: 10.3ms | Allocations: 5188)


Started POST "/line_items?product_id=1" for ::1 at 2024-08-22 18:31:13 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"1"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 8], ["product_id", 1], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 1], ["cart_id", 8], ["order_id", nil], ["created_at", "2024-08-22 15:31:13.900704"], ["updated_at", "2024-08-22 15:31:13.900704"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.2ms | Allocations: 67)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 10.7ms | Allocations: 5201)


Started GET "/cart" for ::1 at 2024-08-22 18:31:14 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 2.8ms | Allocations: 2834)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.2ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 4.9ms | Allocations: 4161)
  Rendered layout layouts/application.html.slim (Duration: 6.9ms | Allocations: 6609)
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 0.4ms | Allocations: 7551)


Started PATCH "/carts/8/update_discount" for ::1 at 2024-08-22 18:31:16 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>577, "id"=>"8", "cart"=>{"discount"=>577}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.0ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:31:16.570408"], ["discount", "577.0"], ["id", 8]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.4ms | Allocations: 2134)
Completed 200 OK in 18ms (Views: 0.1ms | ActiveRecord: 11.3ms | Allocations: 4892)


Started PATCH "/line_items/35" for ::1 at 2024-08-22 18:31:17 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"35", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (1.0ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:31:17.461908"], ["id", 35]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 8.4ms | Allocations: 11401)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.0ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 11.8ms | Allocations: 13451)
Completed 200 OK in 30ms (Views: 12.1ms | ActiveRecord: 11.5ms | Allocations: 17191)


Started GET "/cart" for ::1 at 2024-08-22 18:31:41 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 11.3ms | Allocations: 17729)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 3.7ms | Allocations: 10347)
  Rendered carts/show.html.slim within layouts/application (Duration: 26.1ms | Allocations: 41877)
  Rendered layout layouts/application.html.slim (Duration: 39.4ms | Allocations: 73129)
Completed 200 OK in 47ms (Views: 36.9ms | ActiveRecord: 5.3ms | Allocations: 78786)


Started DELETE "/line_items/35" for ::1 at 2024-08-22 18:31:44 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"35"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 35], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 35]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:27:in `block in destroy'
  Rendering line_items/destroy.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.8ms | Allocations: 945)
  Rendered line_items/destroy.turbo_stream.erb (Duration: 1.4ms | Allocations: 1466)
Completed 200 OK in 10ms (Views: 1.7ms | ActiveRecord: 3.2ms | Allocations: 6166)


Started PATCH "/carts/8/update_discount" for ::1 at 2024-08-22 18:31:46 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>729, "id"=>"8", "cart"=>{"discount"=>729}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.7ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:31:46.868730"], ["discount", "729.0"], ["id", 8]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.6ms | Allocations: 1527)
Completed 200 OK in 17ms (Views: 0.1ms | ActiveRecord: 10.6ms | Allocations: 4315)


Started DELETE "/line_items/34" for ::1 at 2024-08-22 18:31:48 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"34"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 34], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 34]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
Redirected to http://localhost:3000/cart.8
Completed 302 Found in 16ms (ActiveRecord: 10.9ms | Allocations: 3030)


Started GET "/cart.8" for ::1 at 2024-08-22 18:31:48 +0300
Processing by CartsController#show as */*
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 2.1ms | Allocations: 3272)
  Rendered carts/show.html.slim within layouts/application (Duration: 3.1ms | Allocations: 4094)
  Rendered layout layouts/application.html.slim (Duration: 7.8ms | Allocations: 6552)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.2ms | Allocations: 7575)


Started GET "/cart.8" for ::1 at 2024-08-22 18:31:48 +0300
Processing by CartsController#show as */*
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 0.7ms | Allocations: 563)
  Rendered carts/show.html.slim within layouts/application (Duration: 3.2ms | Allocations: 1321)
  Rendered layout layouts/application.html.slim (Duration: 5.4ms | Allocations: 3781)
Completed 200 OK in 8ms (Views: 5.6ms | ActiveRecord: 0.4ms | Allocations: 4734)


Started GET "/" for ::1 at 2024-08-22 18:31:49 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 3.3ms | Allocations: 6062)
  Rendered products/index.html.slim within layouts/application (Duration: 7.1ms | Allocations: 9892)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 10.0ms | Allocations: 12912)
Completed 200 OK in 13ms (Views: 10.4ms | ActiveRecord: 0.5ms | Allocations: 14082)


Started POST "/line_items?product_id=1" for ::1 at 2024-08-22 18:31:50 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"1"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 8], ["product_id", 1], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 1], ["cart_id", 8], ["order_id", nil], ["created_at", "2024-08-22 15:31:50.061244"], ["updated_at", "2024-08-22 15:31:50.061244"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.5ms | Allocations: 202)
Completed 200 OK in 20ms (Views: 0.9ms | ActiveRecord: 10.6ms | Allocations: 6216)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 18:31:50 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 8], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 2], ["cart_id", 8], ["order_id", nil], ["created_at", "2024-08-22 15:31:50.494891"], ["updated_at", "2024-08-22 15:31:50.494891"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 19ms (Views: 0.4ms | ActiveRecord: 10.6ms | Allocations: 5203)


Started POST "/line_items?product_id=3" for ::1 at 2024-08-22 18:31:51 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"3"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 8], ["product_id", 3], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 3], ["cart_id", 8], ["order_id", nil], ["created_at", "2024-08-22 15:31:51.053011"], ["updated_at", "2024-08-22 15:31:51.053011"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 19ms (Views: 0.5ms | ActiveRecord: 10.4ms | Allocations: 5230)


Started GET "/cart" for ::1 at 2024-08-22 18:31:51 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [3 times] (Duration: 4.1ms | Allocations: 4211)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 439)
  Rendered carts/show.html.slim within layouts/application (Duration: 6.1ms | Allocations: 5575)
  Rendered layout layouts/application.html.slim (Duration: 8.5ms | Allocations: 8022)
Completed 200 OK in 11ms (Views: 8.5ms | ActiveRecord: 0.5ms | Allocations: 8958)


Started DELETE "/line_items/36" for ::1 at 2024-08-22 18:31:53 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"36"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 36], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 36]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:27:in `block in destroy'
  Rendering line_items/destroy.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.1ms | Allocations: 1526)
  Rendered line_items/destroy.turbo_stream.erb (Duration: 2.4ms | Allocations: 1751)
Completed 200 OK in 19ms (Views: 2.6ms | ActiveRecord: 11.5ms | Allocations: 5411)


Started PATCH "/line_items/38" for ::1 at 2024-08-22 18:31:54 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"38", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:31:54.786655"], ["id", 38]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 6.0ms | Allocations: 11413)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.1ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 7.9ms | Allocations: 13418)
Completed 200 OK in 26ms (Views: 8.0ms | ActiveRecord: 10.7ms | Allocations: 17146)


Started DELETE "/line_items/38" for ::1 at 2024-08-22 18:31:56 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"38"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 38], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 38]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (4.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/line_items_controller.rb:27:in `block in destroy'
  Rendering line_items/destroy.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.3ms | Allocations: 945)
  Rendered line_items/destroy.turbo_stream.erb (Duration: 1.6ms | Allocations: 1170)
Completed 200 OK in 12ms (Views: 1.9ms | ActiveRecord: 5.7ms | Allocations: 4821)


Started GET "/orders/new" for ::1 at 2024-08-22 18:32:00 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 5.8ms | Allocations: 10176)
  Rendered layout layouts/application.html.slim (Duration: 8.2ms | Allocations: 12653)
Completed 200 OK in 17ms (Views: 8.4ms | ActiveRecord: 2.3ms | Allocations: 17226)


Started GET "/" for ::1 at 2024-08-22 18:32:01 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 1.2ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 2.7ms | Allocations: 1366)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 7.4ms | Allocations: 4397)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 0.5ms | Allocations: 5346)


Started GET "/cart" for ::1 at 2024-08-22 18:32:03 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 2.2ms | Allocations: 1443)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.5ms | Allocations: 389)
  Rendered carts/show.html.slim within layouts/application (Duration: 4.5ms | Allocations: 2719)
  Rendered layout layouts/application.html.slim (Duration: 7.7ms | Allocations: 5166)
Completed 200 OK in 10ms (Views: 7.9ms | ActiveRecord: 0.4ms | Allocations: 6099)


Started DELETE "/cart" for ::1 at 2024-08-22 18:32:04 +0300
Processing by CartsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 8]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Destroy (0.2ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 37]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mCart Destroy (0.1ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = $1[0m  [["id", 8]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
Redirected to http://localhost:3000/
Completed 302 Found in 7ms (ActiveRecord: 2.1ms | Allocations: 3459)


Started GET "/" for ::1 at 2024-08-22 18:32:04 +0300
Processing by ProductsController#index as TURBO_STREAM
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mCart Create (0.6ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "discount") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2024-08-22 15:32:04.795183"], ["updated_at", "2024-08-22 15:32:04.795183"], ["discount", "0.0"]]
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 1.2ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 2.2ms | Allocations: 1410)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 6.1ms | Allocations: 4422)
Completed 200 OK in 10ms (Views: 6.1ms | ActiveRecord: 2.4ms | Allocations: 6594)


Started GET "/" for ::1 at 2024-08-22 18:32:05 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 1.1ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 2.2ms | Allocations: 1366)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 7.0ms | Allocations: 4378)
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 0.5ms | Allocations: 5312)


Started POST "/line_items?product_id=1" for ::1 at 2024-08-22 18:33:19 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"1"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 9], ["product_id", 1], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 1], ["cart_id", 9], ["order_id", nil], ["created_at", "2024-08-22 15:33:19.878882"], ["updated_at", "2024-08-22 15:33:19.878882"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 10ms (Views: 0.5ms | ActiveRecord: 2.3ms | Allocations: 5195)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 18:33:20 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 9], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 2], ["cart_id", 9], ["order_id", nil], ["created_at", "2024-08-22 15:33:20.337757"], ["updated_at", "2024-08-22 15:33:20.337757"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 18ms (Views: 0.4ms | ActiveRecord: 10.6ms | Allocations: 5220)


Started POST "/line_items?product_id=3" for ::1 at 2024-08-22 18:33:20 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"3"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 9], ["product_id", 3], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.4ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 3], ["cart_id", 9], ["order_id", nil], ["created_at", "2024-08-22 15:33:20.879504"], ["updated_at", "2024-08-22 15:33:20.879504"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (10.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 20ms (Views: 0.6ms | ActiveRecord: 10.9ms | Allocations: 5226)


Started GET "/cart" for ::1 at 2024-08-22 18:33:22 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [3 times] (Duration: 4.5ms | Allocations: 4214)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 439)
  Rendered carts/show.html.slim within layouts/application (Duration: 6.3ms | Allocations: 5578)
  Rendered layout layouts/application.html.slim (Duration: 8.5ms | Allocations: 8050)
Completed 200 OK in 11ms (Views: 8.5ms | ActiveRecord: 0.5ms | Allocations: 9005)


Started PATCH "/carts/9/update_discount" for ::1 at 2024-08-22 18:33:43 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>396, "id"=>"9", "cart"=>{"discount"=>396}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:33:43.328098"], ["discount", "396.0"], ["id", 9]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.4ms | Allocations: 2727)
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 11.7ms | Allocations: 5269)


Started PATCH "/carts/9/update_discount" for ::1 at 2024-08-22 18:33:48 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>781, "id"=>"9", "cart"=>{"discount"=>781}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:33:48.142726"], ["discount", "781.0"], ["id", 9]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.2ms | Allocations: 2727)
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 11.4ms | Allocations: 5287)


Started PATCH "/carts/9/update_discount" for ::1 at 2024-08-22 18:33:53 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>506, "id"=>"9", "cart"=>{"discount"=>506}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (1.1ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:33:53.559055"], ["discount", "506.0"], ["id", 9]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.8ms | Allocations: 2727)
Completed 200 OK in 20ms (Views: 0.1ms | ActiveRecord: 11.4ms | Allocations: 5267)


Started PATCH "/line_items/39" for ::1 at 2024-08-22 18:33:58 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"39", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (0.9ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:33:58.498092"], ["id", 39]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.6ms | Allocations: 1390)
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.8ms | Allocations: 1993)
  Rendered line_items/update.turbo_stream.erb (Duration: 5.9ms | Allocations: 3692)
Completed 200 OK in 23ms (Views: 5.8ms | ActiveRecord: 11.4ms | Allocations: 7357)


Started PATCH "/line_items/39" for ::1 at 2024-08-22 18:33:58 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>3, "id"=>"39", "line_item"=>{"quantity"=>3}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (2.9ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 15:33:58.663568"], ["id", 39]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.2ms | Allocations: 1391)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.9ms | Allocations: 1993)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.4ms | Allocations: 3693)
Completed 200 OK in 23ms (Views: 4.5ms | ActiveRecord: 13.3ms | Allocations: 7357)


Started PATCH "/line_items/39" for ::1 at 2024-08-22 18:33:58 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>4, "id"=>"39", "line_item"=>{"quantity"=>4}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (2.2ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 4], ["updated_at", "2024-08-22 15:33:58.796034"], ["id", 39]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.6ms | Allocations: 1401)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.1ms | Allocations: 1993)
  Rendered line_items/update.turbo_stream.erb (Duration: 5.1ms | Allocations: 3703)
Completed 200 OK in 23ms (Views: 5.2ms | ActiveRecord: 12.6ms | Allocations: 7358)


Started DELETE "/line_items/39" for ::1 at 2024-08-22 18:34:01 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"39"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 39], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 39]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:27:in `block in destroy'
  Rendering line_items/destroy.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.8ms | Allocations: 1533)
  Rendered line_items/destroy.turbo_stream.erb (Duration: 2.0ms | Allocations: 1758)
Completed 200 OK in 20ms (Views: 2.2ms | ActiveRecord: 11.6ms | Allocations: 5424)


Started GET "/orders/new" for ::1 at 2024-08-22 18:34:12 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 4.6ms | Allocations: 2485)
  Rendered layout layouts/application.html.slim (Duration: 7.5ms | Allocations: 4962)
Completed 200 OK in 9ms (Views: 7.4ms | ActiveRecord: 0.5ms | Allocations: 5942)


Started GET "/cart" for ::1 at 2024-08-22 18:34:15 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 4.7ms | Allocations: 2827)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.4ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 7.2ms | Allocations: 4154)
  Rendered layout layouts/application.html.slim (Duration: 10.1ms | Allocations: 6601)
Completed 200 OK in 12ms (Views: 10.1ms | ActiveRecord: 0.5ms | Allocations: 7555)


Started GET "/cart" for ::1 at 2024-08-22 18:34:17 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [2 times] (Duration: 3.7ms | Allocations: 2820)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.3ms | Allocations: 421)
  Rendered carts/show.html.slim within layouts/application (Duration: 5.7ms | Allocations: 4147)
  Rendered layout layouts/application.html.slim (Duration: 8.1ms | Allocations: 6594)
Completed 200 OK in 10ms (Views: 8.1ms | ActiveRecord: 0.4ms | Allocations: 7530)


Started PATCH "/line_items/40" for ::1 at 2024-08-22 18:34:20 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"40", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (0.9ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:34:20.584978"], ["id", 40]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.3ms | Allocations: 1390)
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.9ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 5.9ms | Allocations: 3118)
Completed 200 OK in 13ms (Views: 5.9ms | ActiveRecord: 3.0ms | Allocations: 6770)


Started PATCH "/line_items/40" for ::1 at 2024-08-22 18:34:20 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>3, "id"=>"40", "line_item"=>{"quantity"=>3}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 40], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (0.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 15:34:20.791056"], ["id", 40]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.7ms | Allocations: 1390)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.3ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.4ms | Allocations: 3118)
Completed 200 OK in 21ms (Views: 4.5ms | ActiveRecord: 11.1ms | Allocations: 6776)


Started PATCH "/line_items/41" for ::1 at 2024-08-22 18:34:21 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"41", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (1.2ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:34:21.448581"], ["id", 41]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.4ms | Allocations: 1392)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 5.0ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 7.9ms | Allocations: 3120)
Completed 200 OK in 27ms (Views: 8.0ms | ActiveRecord: 12.0ms | Allocations: 6762)


Started PATCH "/line_items/41" for ::1 at 2024-08-22 18:34:21 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>3, "id"=>"41", "line_item"=>{"quantity"=>3}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (1.6ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 15:34:21.697976"], ["id", 41]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 3.6ms | Allocations: 1402)
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 2.5ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 6.7ms | Allocations: 3130)
Completed 200 OK in 27ms (Views: 6.8ms | ActiveRecord: 12.2ms | Allocations: 6781)


Started PATCH "/line_items/41" for ::1 at 2024-08-22 18:34:21 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>4, "id"=>"41", "line_item"=>{"quantity"=>4}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 41], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (1.3ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 4], ["updated_at", "2024-08-22 15:34:21.851530"], ["id", 41]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.3ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.5ms | Allocations: 1401)
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.5ms | Allocations: 1419)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.4ms | Allocations: 3129)
Completed 200 OK in 22ms (Views: 4.5ms | ActiveRecord: 11.9ms | Allocations: 6784)


Started PATCH "/carts/9/update_discount" for ::1 at 2024-08-22 18:34:22 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>864, "id"=>"9", "cart"=>{"discount"=>864}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.8ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:34:22.995559"], ["discount", "864.0"], ["id", 9]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.3ms | Allocations: 2134)
Completed 200 OK in 19ms (Views: 0.1ms | ActiveRecord: 11.1ms | Allocations: 4667)


Started DELETE "/cart" for ::1 at 2024-08-22 18:34:26 +0300
Processing by CartsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 9]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Destroy (0.3ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 40]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mLineItem Destroy (0.1ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 41]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mCart Destroy (0.1ms)[0m  [1m[31mDELETE FROM "carts" WHERE "carts"."id" = $1[0m  [["id", 9]]
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
  [1m[36mTRANSACTION (9.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:8:in `destroy'
Redirected to http://localhost:3000/
Completed 302 Found in 18ms (ActiveRecord: 10.6ms | Allocations: 4022)


Started GET "/" for ::1 at 2024-08-22 18:34:26 +0300
Processing by ProductsController#index as TURBO_STREAM
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mCart Create (0.8ms)[0m  [1m[32mINSERT INTO "carts" ("created_at", "updated_at", "discount") VALUES ($1, $2, $3) RETURNING "id"[0m  [["created_at", "2024-08-22 15:34:26.123927"], ["updated_at", "2024-08-22 15:34:26.123927"], ["discount", "0.0"]]
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/application_controller.rb:16:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 1.4ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 2.3ms | Allocations: 1366)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/layouts/application.html.slim:22
  Rendered layout layouts/application.html.slim (Duration: 6.3ms | Allocations: 4404)
Completed 200 OK in 11ms (Views: 6.4ms | ActiveRecord: 2.7ms | Allocations: 6503)


Started GET "/cart" for ::1 at 2024-08-22 18:34:26 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 0.8ms | Allocations: 563)
  Rendered carts/show.html.slim within layouts/application (Duration: 1.9ms | Allocations: 1321)
  Rendered layout layouts/application.html.slim (Duration: 5.2ms | Allocations: 3770)
Completed 200 OK in 7ms (Views: 5.4ms | ActiveRecord: 0.2ms | Allocations: 4715)


Started GET "/" for ::1 at 2024-08-22 18:34:53 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 3.0ms | Allocations: 6095)
  Rendered products/index.html.slim within layouts/application (Duration: 9.3ms | Allocations: 12605)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/layouts/application.html.slim:21
  Rendered layout layouts/application.html.slim (Duration: 35.2ms | Allocations: 47293)
Completed 200 OK in 46ms (Views: 32.0ms | ActiveRecord: 6.8ms | Allocations: 53712)


Started POST "/line_items?product_id=1" for ::1 at 2024-08-22 18:34:54 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"1"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 10], ["product_id", 1], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.2ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 1], ["cart_id", 10], ["order_id", nil], ["created_at", "2024-08-22 15:34:54.035039"], ["updated_at", "2024-08-22 15:34:54.035039"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.3ms | Allocations: 210)
Completed 200 OK in 13ms (Views: 0.8ms | ActiveRecord: 2.2ms | Allocations: 10781)


Started GET "/cart" for ::1 at 2024-08-22 18:34:54 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 4.8ms | Allocations: 11463)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 10312)
  Rendered carts/show.html.slim within layouts/application (Duration: 13.3ms | Allocations: 29271)
  Rendered layout layouts/application.html.slim (Duration: 15.4ms | Allocations: 31687)
Completed 200 OK in 18ms (Views: 15.6ms | ActiveRecord: 0.3ms | Allocations: 32828)


Started PATCH "/line_items/42" for ::1 at 2024-08-22 18:34:55 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"42", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (1.1ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:34:55.960142"], ["id", 42]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 8.2ms | Allocations: 11389)
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.7ms | Allocations: 845)
  Rendered line_items/update.turbo_stream.erb (Duration: 9.8ms | Allocations: 12863)
Completed 200 OK in 27ms (Views: 10.0ms | ActiveRecord: 11.2ms | Allocations: 17195)


Started PATCH "/line_items/42" for ::1 at 2024-08-22 18:34:56 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>3, "id"=>"42", "line_item"=>{"quantity"=>3}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (1.2ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 15:34:56.131660"], ["id", 42]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 2.3ms | Allocations: 1390)
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.0ms | Allocations: 845)
  Rendered line_items/update.turbo_stream.erb (Duration: 3.8ms | Allocations: 2544)
Completed 200 OK in 21ms (Views: 4.0ms | ActiveRecord: 11.3ms | Allocations: 6197)


Started PATCH "/line_items/42" for ::1 at 2024-08-22 18:34:56 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>2, "id"=>"42", "line_item"=>{"quantity"=>2}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (0.8ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:34:56.565715"], ["id", 42]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 3.0ms | Allocations: 1401)
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.0ms | Allocations: 845)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.4ms | Allocations: 2555)
Completed 200 OK in 25ms (Views: 4.7ms | ActiveRecord: 11.0ms | Allocations: 6185)


Started PATCH "/line_items/42" for ::1 at 2024-08-22 18:34:56 +0300
Processing by LineItemsController#update as TURBO_STREAM
  Parameters: {"quantity"=>1, "id"=>"42", "line_item"=>{"quantity"=>1}}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:37:in `update'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Update (0.8ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 1], ["updated_at", "2024-08-22 15:34:56.739954"], ["id", 42]]
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:41:in `update'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/controllers/line_items_controller.rb:45:in `block in update'
  Rendering line_items/update.turbo_stream.erb
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered line_items/templates/_line_item.html.slim (Duration: 3.0ms | Allocations: 1395)
  [1m[36mCACHE Product Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 1.3ms | Allocations: 845)
  Rendered line_items/update.turbo_stream.erb (Duration: 4.9ms | Allocations: 2549)
Completed 200 OK in 22ms (Views: 5.1ms | ActiveRecord: 10.9ms | Allocations: 6173)


Started DELETE "/line_items/42" for ::1 at 2024-08-22 18:34:57 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"42"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 42], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.9ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 42]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (9.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
Redirected to http://localhost:3000/cart.10
Completed 302 Found in 16ms (ActiveRecord: 11.0ms | Allocations: 3066)


Started GET "/cart.10" for ::1 at 2024-08-22 18:34:57 +0300
Processing by CartsController#show as */*
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 2.4ms | Allocations: 3289)
  Rendered carts/show.html.slim within layouts/application (Duration: 3.9ms | Allocations: 4111)
  Rendered layout layouts/application.html.slim (Duration: 6.0ms | Allocations: 6547)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 0.3ms | Allocations: 7565)


Started GET "/cart.10" for ::1 at 2024-08-22 18:34:57 +0300
Processing by CartsController#show as */*
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 0.6ms | Allocations: 556)
  Rendered carts/show.html.slim within layouts/application (Duration: 1.8ms | Allocations: 1314)
  Rendered layout layouts/application.html.slim (Duration: 4.0ms | Allocations: 3725)
Completed 200 OK in 7ms (Views: 4.4ms | ActiveRecord: 0.3ms | Allocations: 4658)


Started GET "/" for ::1 at 2024-08-22 18:34:58 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 0.9ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 1.6ms | Allocations: 1366)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/layouts/application.html.slim:21
  Rendered layout layouts/application.html.slim (Duration: 4.5ms | Allocations: 4340)
Completed 200 OK in 6ms (Views: 4.6ms | ActiveRecord: 0.3ms | Allocations: 5298)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 18:34:59 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 10], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Create (0.3ms)[0m  [1m[32mINSERT INTO "line_items" ("quantity", "product_id", "cart_id", "order_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["quantity", 1], ["product_id", 2], ["cart_id", 10], ["order_id", nil], ["created_at", "2024-08-22 15:34:59.281689"], ["updated_at", "2024-08-22 15:34:59.281689"]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 21ms (Views: 0.8ms | ActiveRecord: 10.8ms | Allocations: 5192)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 18:35:00 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 10], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Update (0.9ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 2], ["updated_at", "2024-08-22 15:35:00.276246"], ["id", 43]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.2ms | Allocations: 67)
Completed 200 OK in 17ms (Views: 0.6ms | ActiveRecord: 11.0ms | Allocations: 4129)


Started POST "/line_items?product_id=2" for ::1 at 2024-08-22 18:35:00 +0300
Processing by LineItemsController#create as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "product_id"=>"2"}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:4:in `create'
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1 AND "line_items"."product_id" = $2 LIMIT $3[0m  [["cart_id", 10], ["product_id", 2], ["LIMIT", 1]]
  â†³ app/models/cart.rb:6:in `add_product'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Update (1.9ms)[0m  [1m[33mUPDATE "line_items" SET "quantity" = $1, "updated_at" = $2 WHERE "line_items"."id" = $3[0m  [["quantity", 3], ["updated_at", "2024-08-22 15:35:00.435606"], ["id", 43]]
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mTRANSACTION (9.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:9:in `block in create'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/controllers/line_items_controller.rb:10:in `block in create'
  Rendering line_items/create.turbo_stream.erb
  Rendered line_items/create.turbo_stream.erb (Duration: 0.1ms | Allocations: 67)
Completed 200 OK in 30ms (Views: 2.5ms | ActiveRecord: 13.8ms | Allocations: 4135)


Started GET "/cart" for ::1 at 2024-08-22 18:35:01 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 1.9ms | Allocations: 1461)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.2ms | Allocations: 403)
  Rendered carts/show.html.slim within layouts/application (Duration: 46.2ms | Allocations: 2751)
  Rendered layout layouts/application.html.slim (Duration: 49.0ms | Allocations: 5188)
Completed 200 OK in 57ms (Views: 48.9ms | ActiveRecord: 0.5ms | Allocations: 6146)


Started PATCH "/carts/10/update_discount" for ::1 at 2024-08-22 18:35:02 +0300
Processing by CartsController#update_discount as TURBO_STREAM
  Parameters: {"discount"=>625, "id"=>"10", "cart"=>{"discount"=>625}}
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mCart Update (0.9ms)[0m  [1m[33mUPDATE "carts" SET "updated_at" = $1, "discount" = $2 WHERE "carts"."id" = $3[0m  [["updated_at", "2024-08-22 15:35:02.580787"], ["discount", "625.0"], ["id", 10]]
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mTRANSACTION (2.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/carts_controller.rb:15:in `update_discount'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/carts/templates/_cart_discount_container.html.slim:4
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 4.6ms | Allocations: 1541)
Completed 200 OK in 12ms (Views: 0.2ms | ActiveRecord: 4.3ms | Allocations: 4305)


Started GET "/orders/new" for ::1 at 2024-08-22 18:35:03 +0300
Processing by OrdersController#new as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering orders/new.html.slim within layouts/application
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/models/cart.rb:16:in `sub_total'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/models/line_item.rb:9:in `total_price'
  Rendered orders/new.html.slim within layouts/application (Duration: 7.1ms | Allocations: 10183)
  Rendered layout layouts/application.html.slim (Duration: 9.2ms | Allocations: 12626)
Completed 200 OK in 18ms (Views: 9.5ms | ActiveRecord: 2.8ms | Allocations: 17215)


Started GET "/" for ::1 at 2024-08-22 18:35:05 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 1.6ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 2.6ms | Allocations: 1366)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/layouts/application.html.slim:21
  Rendered layout layouts/application.html.slim (Duration: 5.7ms | Allocations: 4358)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 0.4ms | Allocations: 5308)


Started GET "/cart" for ::1 at 2024-08-22 18:35:07 +0300
Processing by CartsController#show as HTML
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/carts/show.html.slim:9
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/views/line_items/templates/_line_item.html.slim:4
  Rendered collection of line_items/templates/_line_item.html.slim [1 times] (Duration: 2.5ms | Allocations: 1457)
  Rendered carts/templates/_cart_discount_container.html.slim (Duration: 0.4ms | Allocations: 403)
  Rendered carts/show.html.slim within layouts/application (Duration: 4.7ms | Allocations: 2747)
  Rendered layout layouts/application.html.slim (Duration: 7.7ms | Allocations: 5156)
Completed 200 OK in 10ms (Views: 7.9ms | ActiveRecord: 0.3ms | Allocations: 6094)


Started DELETE "/line_items/43" for ::1 at 2024-08-22 18:35:10 +0300
Processing by LineItemsController#destroy as TURBO_STREAM
  Parameters: {"authenticity_token"=>"[FILTERED]", "id"=>"43"}
  [1m[36mCart Load (0.3ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  [1m[36mLineItem Load (0.2ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."id" = $1 LIMIT $2[0m  [["id", 43], ["LIMIT", 1]]
  â†³ app/controllers/line_items_controller.rb:22:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Destroy (0.8ms)[0m  [1m[31mDELETE FROM "line_items" WHERE "line_items"."id" = $1[0m  [["id", 43]]
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mTRANSACTION (9.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/line_items_controller.rb:23:in `destroy'
  [1m[36mLineItem Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/controllers/line_items_controller.rb:25:in `destroy'
Redirected to http://localhost:3000/cart.10
Completed 302 Found in 18ms (ActiveRecord: 11.2ms | Allocations: 3013)


Started GET "/cart.10" for ::1 at 2024-08-22 18:35:10 +0300
Processing by CartsController#show as */*
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 0.6ms | Allocations: 564)
  Rendered carts/show.html.slim within layouts/application (Duration: 1.7ms | Allocations: 1322)
  Rendered layout layouts/application.html.slim (Duration: 4.0ms | Allocations: 3733)
Completed 200 OK in 6ms (Views: 4.2ms | ActiveRecord: 0.2ms | Allocations: 4677)


Started GET "/cart.10" for ::1 at 2024-08-22 18:35:11 +0300
Processing by CartsController#show as */*
  [1m[36mCart Load (0.1ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering carts/show.html.slim within layouts/application
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/carts/show.html.slim:9
  Rendered carts/templates/_empty_cart.html.slim (Duration: 1.3ms | Allocations: 556)
  Rendered carts/show.html.slim within layouts/application (Duration: 2.5ms | Allocations: 1314)
  Rendered layout layouts/application.html.slim (Duration: 5.3ms | Allocations: 3725)
Completed 200 OK in 7ms (Views: 5.6ms | ActiveRecord: 0.2ms | Allocations: 4672)


Started GET "/" for ::1 at 2024-08-22 18:35:12 +0300
Processing by ProductsController#index as HTML
  [1m[36mCart Load (0.2ms)[0m  [1m[34mSELECT "carts".* FROM "carts" WHERE "carts"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/application_controller.rb:9:in `current_cart'
  Rendering layout layouts/application.html.slim
  Rendering products/index.html.slim within layouts/application
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  â†³ app/views/products/index.html.slim:6
  Rendered collection of products/templates/_product.html.slim [3 times] (Duration: 1.2ms | Allocations: 785)
  Rendered products/index.html.slim within layouts/application (Duration: 2.6ms | Allocations: 1366)
  [1m[36mLineItem Load (0.1ms)[0m  [1m[34mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = $1[0m  [["cart_id", 10]]
  â†³ app/views/layouts/application.html.slim:21
  Rendered layout layouts/application.html.slim (Duration: 7.3ms | Allocations: 4340)
Completed 200 OK in 10ms (Views: 7.1ms | ActiveRecord: 0.7ms | Allocations: 5280)


